{"project":"steel","version":"1.0.0","testSuites":14,"testCases":54,"smelledTestSuites":14,"smelledTestCases":0,"smells":420,"smelledFiles":[{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/unicode.js","testCases":1,"smells":8,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  54 |       assert.ifError(err)\n  55 |\n> 56 |       assert.strictEqual(req.file.originalname, '\\ud83d\\udca9.dat')\n     |      ^ Assertion Roulette\n  57 |       assert.strictEqual(req.file.fieldname, 'small0')\n  58 |\n  59 |       done()","start":{"column":6,"line":56}},{"frame":"  55 |\n  56 |       assert.strictEqual(req.file.originalname, '\\ud83d\\udca9.dat')\n> 57 |       assert.strictEqual(req.file.fieldname, 'small0')\n     |      ^ Assertion Roulette\n  58 |\n  59 |       done()\n  60 |     })","start":{"column":6,"line":57}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  13 |   beforeEach(function (done) {\n  14 |     temp.mkdir(function (err, path) {\n> 15 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  16 |\n  17 |       var storage = multer.diskStorage({\n  18 |         destination: path,","start":{"line":15,"column":6,"index":311}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   9 |\n  10 | describe('Unicode', function () {\n> 11 |   var uploadDir, upload\n     |  ^ Global Variable\n  12 |\n  13 |   beforeEach(function (done) {\n  14 |     temp.mkdir(function (err, path) {","start":{"line":11,"column":2,"index":213}},{"frame":"  15 |       if (err) return done(err)\n  16 |\n> 17 |       var storage = multer.diskStorage({\n     |      ^ Global Variable\n  18 |         destination: path,\n  19 |         filename: function (req, file, cb) {\n  20 |           cb(null, file.originalname)","start":{"line":17,"column":6,"index":344}},{"frame":"  33 |\n  34 |   it('should handle unicode filenames', function (done) {\n> 35 |     var req = new stream.PassThrough()\n     |    ^ Global Variable\n  36 |     var boundary = 'AaB03x'\n  37 |     var body = [\n  38 |       '--' + boundary,","start":{"line":35,"column":4,"index":728}},{"frame":"  34 |   it('should handle unicode filenames', function (done) {\n  35 |     var req = new stream.PassThrough()\n> 36 |     var boundary = 'AaB03x'\n     |    ^ Global Variable\n  37 |     var body = [\n  38 |       '--' + boundary,\n  39 |       'Content-Disposition: form-data; name=\"small0\"; filename=\"poo.dat\"; filename*=utf-8\\'\\'%F0%9F%92%A9.dat',","start":{"line":36,"column":4,"index":767}},{"frame":"  35 |     var req = new stream.PassThrough()\n  36 |     var boundary = 'AaB03x'\n> 37 |     var body = [\n     |    ^ Global Variable\n  38 |       '--' + boundary,\n  39 |       'Content-Disposition: form-data; name=\"small0\"; filename=\"poo.dat\"; filename*=utf-8\\'\\'%F0%9F%92%A9.dat',\n  40 |       'Content-Type: text/plain',","start":{"line":37,"column":4,"index":795}}]}],"metrics":{"aggregate":{"cyclomatic":9,"cyclomaticDensity":17.308,"halstead":{"bugs":0.398,"difficulty":12.527,"effort":14946.824,"length":196,"time":830.379,"vocabulary":68,"volume":1193.143,"operands":{"distinct":55,"total":106,"identifiers":["assert","require","\"assert\"","multer","\"../\"","temp","\"fs-temp\"","rimraf","\"rimraf\"","stream","\"stream\"","describe","\"Unicode\"","uploadDir","upload","beforeEach","done","mkdir","err","path","storage","diskStorage","destination","filename","req","file","cb","null","originalname","afterEach","it","\"should handle unicode filenames\"","PassThrough","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data; name=\"small0\"; filename=\"poo.dat\"; filename*=utf-8''%F0%9F%92%A9.dat\"","\"Content-Type: text/plain\"","\"\"","\"test with unicode filename\"","join","\"\r\n\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","end","single","\"small0\"","ifError","strictEqual","\"ðŸ’©.dat\"","fieldname"]},"operators":{"distinct":13,"total":90,"identifiers":["var","=","()","function",".","if","return","{}",":","new","[]",",","+"]}},"paramCount":9,"sloc":{"logical":52,"physical":63}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":63,"lineStart":1,"maintainability":114.797,"methods":[{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.018,"difficulty":1.929,"effort":102.505,"length":16,"time":5.695,"vocabulary":10,"volume":53.151,"operands":{"distinct":7,"total":9,"identifiers":["uploadDir","upload","beforeEach","done","afterEach","it","\"should handle unicode filenames\""]},"operators":{"distinct":3,"total":7,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":8,"physical":53},"errors":[],"lineEnd":62,"lineStart":10,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.007,"difficulty":1.5,"effort":29.477,"length":7,"time":1.638,"vocabulary":7,"volume":19.651,"operands":{"distinct":4,"total":4,"identifiers":["temp","mkdir","err","path"]},"operators":{"distinct":3,"total":3,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":16},"errors":[],"lineEnd":28,"lineStart":13,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":15.385,"halstead":{"bugs":0.054,"difficulty":6.577,"effort":1055.856,"length":36,"time":58.659,"vocabulary":22,"volume":160.54,"operands":{"distinct":13,"total":19,"identifiers":["err","done","storage","multer","diskStorage","destination","path","filename","req","file","cb","uploadDir","upload"]},"operators":{"distinct":9,"total":17,"identifiers":["if","return","()","var","=",".","{}",":","function"]}},"paramCount":2,"sloc":{"logical":13,"physical":14},"errors":[],"lineEnd":27,"lineStart":14,"name":"<anon method-3>","paramNames":["err","path"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.005,"difficulty":1,"effort":15.51,"length":6,"time":0.862,"vocabulary":6,"volume":15.51,"operands":{"distinct":4,"total":4,"identifiers":["cb","null","file","originalname"]},"operators":{"distinct":2,"total":2,"identifiers":["()","."]}},"paramCount":3,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":21,"lineStart":19,"name":"<anon method-4>","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.003,"difficulty":0.5,"effort":4,"length":4,"time":0.222,"vocabulary":4,"volume":8,"operands":{"distinct":3,"total":3,"identifiers":["rimraf","uploadDir","done"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":32,"lineStart":30,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":9.091,"halstead":{"bugs":0.113,"difficulty":7.792,"effort":2637.734,"length":66,"time":146.541,"vocabulary":35,"volume":338.533,"operands":{"distinct":24,"total":34,"identifiers":["req","stream","PassThrough","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data; name=\"small0\"; filename=\"poo.dat\"; filename*=utf-8''%F0%9F%92%A9.dat\"","\"Content-Type: text/plain\"","\"\"","\"test with unicode filename\"","join","\"\r\n\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","end","upload","single","\"small0\"","null","err"]},"operators":{"distinct":11,"total":32,"identifiers":["var","=","new",".","()","[]",",","+","{}",":","function"]}},"paramCount":1,"sloc":{"logical":11,"physical":28},"errors":[],"lineEnd":61,"lineStart":34,"name":"<anon method-6>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.033,"difficulty":1.455,"effort":145.326,"length":27,"time":8.074,"vocabulary":13,"volume":99.912,"operands":{"distinct":11,"total":16,"identifiers":["assert","ifError","err","strictEqual","req","file","originalname","\"ðŸ’©.dat\"","fieldname","\"small0\"","done"]},"operators":{"distinct":2,"total":11,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":4,"physical":8},"errors":[],"lineEnd":60,"lineStart":53,"name":"<anon method-7>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.125,"cyclomaticDensity":2.163,"halstead":{"bugs":0.05,"difficulty":1.566,"effort":1868.353,"length":24.5,"time":103.797,"vocabulary":8.5,"volume":149.143,"operands":{"distinct":6.875,"total":13.25},"operators":{"distinct":1.625,"total":11.25}},"paramCount":1.125,"sloc":{"logical":6.5,"physical":7.875}},"methodAverage":{"cyclomatic":1.143,"cyclomaticDensity":44.568,"halstead":{"bugs":0.033,"difficulty":2.965,"effort":570.058,"length":23.143,"time":31.67,"vocabulary":13.857,"volume":99.328,"operands":{"distinct":9.429,"total":12.714},"operators":{"distinct":4.429,"total":10.429}},"paramCount":1.286,"sloc":{"logical":5.714,"physical":17.857}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/select-field.js","testCases":2,"smells":12,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  50 |\n  51 |       file = req.files['CA$|-|'][0]\n> 52 |       assert.strictEqual(file.fieldname, 'CA$|-|')\n     |      ^ Assertion Roulette\n  53 |       assert.strictEqual(file.originalname, 'empty.dat')\n  54 |\n  55 |       file = req.files['set-1'][0]","start":{"column":6,"line":52}},{"frame":"  51 |       file = req.files['CA$|-|'][0]\n  52 |       assert.strictEqual(file.fieldname, 'CA$|-|')\n> 53 |       assert.strictEqual(file.originalname, 'empty.dat')\n     |      ^ Assertion Roulette\n  54 |\n  55 |       file = req.files['set-1'][0]\n  56 |       assert.strictEqual(file.fieldname, 'set-1')","start":{"column":6,"line":53}},{"frame":"  54 |\n  55 |       file = req.files['set-1'][0]\n> 56 |       assert.strictEqual(file.fieldname, 'set-1')\n     |      ^ Assertion Roulette\n  57 |       assert.strictEqual(file.originalname, 'tiny0.dat')\n  58 |\n  59 |       file = req.files['set-2'][0]","start":{"column":6,"line":56}},{"frame":"  55 |       file = req.files['set-1'][0]\n  56 |       assert.strictEqual(file.fieldname, 'set-1')\n> 57 |       assert.strictEqual(file.originalname, 'tiny0.dat')\n     |      ^ Assertion Roulette\n  58 |\n  59 |       file = req.files['set-2'][0]\n  60 |       assert.strictEqual(file.fieldname, 'set-2')","start":{"column":6,"line":57}},{"frame":"  58 |\n  59 |       file = req.files['set-2'][0]\n> 60 |       assert.strictEqual(file.fieldname, 'set-2')\n     |      ^ Assertion Roulette\n  61 |       assert.strictEqual(file.originalname, 'tiny1.dat')\n  62 |\n  63 |       done()","start":{"column":6,"line":60}},{"frame":"  59 |       file = req.files['set-2'][0]\n  60 |       assert.strictEqual(file.fieldname, 'set-2')\n> 61 |       assert.strictEqual(file.originalname, 'tiny1.dat')\n     |      ^ Assertion Roulette\n  62 |\n  63 |       done()\n  64 |     })","start":{"column":6,"line":61}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  26 |   assert.strictEqual(files.length, len)\n  27 |\n> 28 |   for (var i = 0; i < len; i++) {\n     |  ^ Conditional Test Logic\n  29 |     assert.strictEqual(files[i].fieldname, setName)\n  30 |     assert.strictEqual(files[i].originalname, fileNames[i])\n  31 |   }","start":{"line":28,"column":2,"index":677}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   8 |\n   9 | function generateForm () {\n> 10 |   var form = new FormData()\n     |  ^ Global Variable\n  11 |\n  12 |   form.append('CA$|-|', util.file('empty.dat'))\n  13 |   form.append('set-1', util.file('tiny0.dat'))","start":{"line":10,"column":2,"index":180}},{"frame":"  22 |\n  23 | function assertSet (files, setName, fileNames) {\n> 24 |   var len = fileNames.length\n     |  ^ Global Variable\n  25 |\n  26 |   assert.strictEqual(files.length, len)\n  27 |","start":{"line":24,"column":2,"index":606}},{"frame":"  26 |   assert.strictEqual(files.length, len)\n  27 |\n> 28 |   for (var i = 0; i < len; i++) {\n     |       ^ Global Variable\n  29 |     assert.strictEqual(files[i].fieldname, setName)\n  30 |     assert.strictEqual(files[i].originalname, fileNames[i])\n  31 |   }","start":{"line":28,"column":7,"index":682}},{"frame":"  33 |\n  34 | describe('Select Field', function () {\n> 35 |   var parser\n     |  ^ Global Variable\n  36 |\n  37 |   before(function () {\n  38 |     parser = multer().fields([","start":{"line":35,"column":2,"index":869}},{"frame":"  47 |       assert.ifError(err)\n  48 |\n> 49 |       var file\n     |      ^ Global Variable\n  50 |\n  51 |       file = req.files['CA$|-|'][0]\n  52 |       assert.strictEqual(file.fieldname, 'CA$|-|')","start":{"line":49,"column":6,"index":1231}}]}],"metrics":{"aggregate":{"cyclomatic":10,"cyclomaticDensity":13.889,"halstead":{"bugs":0.698,"difficulty":29.936,"effort":62672.878,"length":353,"time":3481.827,"vocabulary":61,"volume":2093.55,"operands":{"distinct":47,"total":201,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","generateForm","form","append","\"CA$|-|\"","file","\"empty.dat\"","\"set-1\"","\"tiny0.dat\"","\"tiny1.dat\"","\"set-2\"","assertSet","files","setName","fileNames","len","length","strictEqual","i","0","fieldname","originalname","describe","\"Select Field\"","parser","before","fields","name","maxCount","1","3","it","\"should select the first file with fieldname\"","done","submitForm","err","req","ifError","\"should select all files with fieldname\""]},"operators":{"distinct":14,"total":152,"identifiers":["var","=","()","function","new",".","return","for","<","++ (postfix)","[]",",","{}",":"]}},"paramCount":9,"sloc":{"logical":72,"physical":79}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":79,"lineStart":1,"maintainability":106.946,"methods":[{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.105,"difficulty":12.273,"effort":3862.652,"length":77,"time":214.592,"vocabulary":17,"volume":314.735,"operands":{"distinct":11,"total":45,"identifiers":["form","FormData","append","\"CA$|-|\"","util","file","\"empty.dat\"","\"set-1\"","\"tiny0.dat\"","\"tiny1.dat\"","\"set-2\""]},"operators":{"distinct":6,"total":32,"identifiers":["var","=","new","()",".","return"]}},"paramCount":0,"sloc":{"logical":16,"physical":13},"errors":[],"lineEnd":21,"lineStart":9,"name":"generateForm","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":40,"halstead":{"bugs":0.065,"difficulty":9.455,"effort":1847.462,"length":46,"time":102.637,"vocabulary":19,"volume":195.405,"operands":{"distinct":11,"total":26,"identifiers":["len","fileNames","length","assert","strictEqual","files","i","0","fieldname","setName","originalname"]},"operators":{"distinct":8,"total":20,"identifiers":["var","=",".","()","for","<","++ (postfix)","[]"]}},"paramCount":3,"sloc":{"logical":5,"physical":10},"errors":[],"lineEnd":32,"lineStart":23,"name":"assertSet","paramNames":["files","setName","fileNames"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.016,"difficulty":2,"effort":95.098,"length":15,"time":5.283,"vocabulary":9,"volume":47.549,"operands":{"distinct":6,"total":8,"identifiers":["parser","before","it","\"should select the first file with fieldname\"","done","\"should select all files with fieldname\""]},"operators":{"distinct":3,"total":7,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":7,"physical":45},"errors":[],"lineEnd":78,"lineStart":34,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.042,"difficulty":5.25,"effort":665.235,"length":31,"time":36.957,"vocabulary":17,"volume":126.711,"operands":{"distinct":10,"total":15,"identifiers":["parser","multer","fields","name","\"CA$|-|\"","maxCount","1","\"set-1\"","3","\"set-2\""]},"operators":{"distinct":7,"total":16,"identifiers":["=","()",".","[]",",","{}",":"]}},"paramCount":0,"sloc":{"logical":9,"physical":7},"errors":[],"lineEnd":43,"lineStart":37,"name":"<anon method-2>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.011,"difficulty":1.5,"effort":47.549,"length":10,"time":2.642,"vocabulary":9,"volume":31.699,"operands":{"distinct":6,"total":6,"identifiers":["util","submitForm","parser","generateForm","err","req"]},"operators":{"distinct":3,"total":4,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":3,"physical":21},"errors":[],"lineEnd":65,"lineStart":45,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":8.333,"halstead":{"bugs":0.125,"difficulty":7.353,"effort":2754.355,"length":84,"time":153.02,"vocabulary":22,"volume":374.592,"operands":{"distinct":17,"total":50,"identifiers":["assert","ifError","err","file","req","files","\"CA$|-|\"","0","strictEqual","fieldname","originalname","\"empty.dat\"","\"set-1\"","\"tiny0.dat\"","\"set-2\"","\"tiny1.dat\"","done"]},"operators":{"distinct":5,"total":34,"identifiers":["()",".","var","=","[]"]}},"paramCount":2,"sloc":{"logical":12,"physical":19},"errors":[],"lineEnd":64,"lineStart":46,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.011,"difficulty":1.5,"effort":47.549,"length":10,"time":2.642,"vocabulary":9,"volume":31.699,"operands":{"distinct":6,"total":6,"identifiers":["util","submitForm","parser","generateForm","err","req"]},"operators":{"distinct":3,"total":4,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":3,"physical":11},"errors":[],"lineEnd":77,"lineStart":67,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.061,"difficulty":4,"effort":735.743,"length":45,"time":40.875,"vocabulary":17,"volume":183.936,"operands":{"distinct":13,"total":26,"identifiers":["assert","ifError","err","assertSet","req","files","\"CA$|-|\"","\"empty.dat\"","\"set-1\"","\"tiny0.dat\"","\"tiny1.dat\"","\"set-2\"","done"]},"operators":{"distinct":4,"total":19,"identifiers":["()",".","[]",","]}},"paramCount":2,"sloc":{"logical":5,"physical":9},"errors":[],"lineEnd":76,"lineStart":68,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.111,"cyclomaticDensity":1.543,"halstead":{"bugs":0.078,"difficulty":3.326,"effort":6963.653,"length":39.222,"time":386.87,"vocabulary":6.778,"volume":232.617,"operands":{"distinct":5.222,"total":22.333},"operators":{"distinct":1.556,"total":16.889}},"paramCount":1,"sloc":{"logical":8,"physical":8.778}},"methodAverage":{"cyclomatic":1.125,"cyclomaticDensity":20.831,"halstead":{"bugs":0.054,"difficulty":5.416,"effort":1256.955,"length":39.75,"time":69.831,"vocabulary":14.875,"volume":163.291,"operands":{"distinct":10,"total":22.75},"operators":{"distinct":4.875,"total":17}},"paramCount":1.125,"sloc":{"logical":7.5,"physical":16.875}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/reuse-middleware.js","testCases":1,"smells":15,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  31 |         assert.ifError(err)\n  32 |\n> 33 |         assert.strictEqual(req.body.name, 'Multer')\n     |        ^ Assertion Roulette\n  34 |         assert.strictEqual(req.body.files, '' + fileCount)\n  35 |         assert.strictEqual(req.files.length, fileCount)\n  36 |","start":{"column":8,"line":33}},{"frame":"  32 |\n  33 |         assert.strictEqual(req.body.name, 'Multer')\n> 34 |         assert.strictEqual(req.body.files, '' + fileCount)\n     |        ^ Assertion Roulette\n  35 |         assert.strictEqual(req.files.length, fileCount)\n  36 |\n  37 |         req.files.forEach(function (file) {","start":{"column":8,"line":34}},{"frame":"  33 |         assert.strictEqual(req.body.name, 'Multer')\n  34 |         assert.strictEqual(req.body.files, '' + fileCount)\n> 35 |         assert.strictEqual(req.files.length, fileCount)\n     |        ^ Assertion Roulette\n  36 |\n  37 |         req.files.forEach(function (file) {\n  38 |           assert.strictEqual(file.fieldname, 'them-files')","start":{"column":8,"line":35}},{"frame":"  36 |\n  37 |         req.files.forEach(function (file) {\n> 38 |           assert.strictEqual(file.fieldname, 'them-files')\n     |          ^ Assertion Roulette\n  39 |           assert.strictEqual(file.originalname, 'small0.dat')\n  40 |           assert.strictEqual(file.size, 1778)\n  41 |           assert.strictEqual(file.buffer.length, 1778)","start":{"column":10,"line":38}},{"frame":"  37 |         req.files.forEach(function (file) {\n  38 |           assert.strictEqual(file.fieldname, 'them-files')\n> 39 |           assert.strictEqual(file.originalname, 'small0.dat')\n     |          ^ Assertion Roulette\n  40 |           assert.strictEqual(file.size, 1778)\n  41 |           assert.strictEqual(file.buffer.length, 1778)\n  42 |         })","start":{"column":10,"line":39}},{"frame":"  38 |           assert.strictEqual(file.fieldname, 'them-files')\n  39 |           assert.strictEqual(file.originalname, 'small0.dat')\n> 40 |           assert.strictEqual(file.size, 1778)\n     |          ^ Assertion Roulette\n  41 |           assert.strictEqual(file.buffer.length, 1778)\n  42 |         })\n  43 |","start":{"column":10,"line":40}},{"frame":"  39 |           assert.strictEqual(file.originalname, 'small0.dat')\n  40 |           assert.strictEqual(file.size, 1778)\n> 41 |           assert.strictEqual(file.buffer.length, 1778)\n     |          ^ Assertion Roulette\n  42 |         })\n  43 |\n  44 |         if (--pending === 0) done()","start":{"column":10,"line":41}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  24 |       form.append('files', '' + fileCount)\n  25 |\n> 26 |       for (var i = 0; i < fileCount; i++) {\n     |      ^ Conditional Test Logic\n  27 |         form.append('them-files', util.file('small0.dat'))\n  28 |       }\n  29 |","start":{"line":26,"column":6,"index":530}},{"frame":"  42 |         })\n  43 |\n> 44 |         if (--pending === 0) done()\n     |        ^ Conditional Test Logic\n  45 |       })\n  46 |     }\n  47 |","start":{"line":44,"column":8,"index":1177}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   8 |\n   9 | describe('Reuse Middleware', function () {\n> 10 |   var parser\n     |  ^ Global Variable\n  11 |\n  12 |   before(function (done) {\n  13 |     parser = multer().array('them-files')","start":{"line":10,"column":2,"index":196}},{"frame":"  16 |\n  17 |   it('should accept multiple requests', function (done) {\n> 18 |     var pending = 8\n     |    ^ Global Variable\n  19 |\n  20 |     function submitData (fileCount) {\n  21 |       var form = new FormData()","start":{"line":18,"column":4,"index":356}},{"frame":"  19 |\n  20 |     function submitData (fileCount) {\n> 21 |       var form = new FormData()\n     |      ^ Global Variable\n  22 |\n  23 |       form.append('name', 'Multer')\n  24 |       form.append('files', '' + fileCount)","start":{"line":21,"column":6,"index":417}},{"frame":"  24 |       form.append('files', '' + fileCount)\n  25 |\n> 26 |       for (var i = 0; i < fileCount; i++) {\n     |           ^ Global Variable\n  27 |         form.append('them-files', util.file('small0.dat'))\n  28 |       }\n  29 |","start":{"line":26,"column":11,"index":535}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  38 |           assert.strictEqual(file.fieldname, 'them-files')\n  39 |           assert.strictEqual(file.originalname, 'small0.dat')\n> 40 |           assert.strictEqual(file.size, 1778)\n     |                                        ^ Magic Number\n  41 |           assert.strictEqual(file.buffer.length, 1778)\n  42 |         })\n  43 |","start":{"line":40,"column":40,"index":1096}},{"frame":"  39 |           assert.strictEqual(file.originalname, 'small0.dat')\n  40 |           assert.strictEqual(file.size, 1778)\n> 41 |           assert.strictEqual(file.buffer.length, 1778)\n     |                                                 ^ Magic Number\n  42 |         })\n  43 |\n  44 |         if (--pending === 0) done()","start":{"line":41,"column":49,"index":1151}}]}],"metrics":{"aggregate":{"cyclomatic":9,"cyclomaticDensity":18.367,"halstead":{"bugs":0.433,"difficulty":14.806,"effort":19219.73,"length":214,"time":1067.763,"vocabulary":67,"volume":1298.143,"operands":{"distinct":54,"total":123,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","describe","\"Reuse Middleware\"","parser","before","done","array","\"them-files\"","it","\"should accept multiple requests\"","pending","8","submitData","fileCount","form","append","\"name\"","\"Multer\"","\"files\"","\"\"","i","0","file","\"small0.dat\"","submitForm","err","req","ifError","strictEqual","body","name","files","length","forEach","fieldname","originalname","size","1778","buffer","9","1","5","7","2","3","4"]},"operators":{"distinct":13,"total":91,"identifiers":["var","=","()","function",".","new","+","for","<","++ (postfix)","if","===","-- (prefix)"]}},"paramCount":6,"sloc":{"logical":49,"physical":58}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":58,"lineStart":1,"maintainability":112.146,"methods":[{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.011,"difficulty":1.8,"effort":59.4,"length":11,"time":3.3,"vocabulary":8,"volume":33,"operands":{"distinct":5,"total":6,"identifiers":["parser","before","done","it","\"should accept multiple requests\""]},"operators":{"distinct":3,"total":5,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":5,"physical":49},"errors":[],"lineEnd":57,"lineStart":9,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.01,"difficulty":1.5,"effort":45,"length":10,"time":2.5,"vocabulary":8,"volume":30,"operands":{"distinct":5,"total":5,"identifiers":["parser","multer","array","\"them-files\"","done"]},"operators":{"distinct":3,"total":5,"identifiers":["=","()","."]}},"paramCount":1,"sloc":{"logical":4,"physical":4},"errors":[],"lineEnd":15,"lineStart":12,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":10,"halstead":{"bugs":0.04,"difficulty":3.636,"effort":440.413,"length":31,"time":24.467,"vocabulary":15,"volume":121.114,"operands":{"distinct":11,"total":20,"identifiers":["pending","8","submitData","fileCount","9","1","5","7","2","3","4"]},"operators":{"distinct":4,"total":11,"identifiers":["var","=","function","()"]}},"paramCount":1,"sloc":{"logical":10,"physical":40},"errors":[],"lineEnd":56,"lineStart":17,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":25,"halstead":{"bugs":0.077,"difficulty":7.778,"effort":1794.746,"length":48,"time":99.708,"vocabulary":28,"volume":230.753,"operands":{"distinct":18,"total":28,"identifiers":["form","FormData","append","\"name\"","\"Multer\"","\"files\"","\"\"","fileCount","i","0","\"them-files\"","util","file","\"small0.dat\"","submitForm","parser","err","req"]},"operators":{"distinct":10,"total":20,"identifiers":["var","=","new","()",".","+","for","<","++ (postfix)","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":27},"errors":[],"lineEnd":46,"lineStart":20,"name":"submitData","paramNames":["fileCount"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":25,"halstead":{"bugs":0.079,"difficulty":5.971,"effort":1423.496,"length":52,"time":79.083,"vocabulary":24,"volume":238.418,"operands":{"distinct":17,"total":29,"identifiers":["assert","ifError","err","strictEqual","req","body","name","\"Multer\"","files","\"\"","fileCount","length","forEach","file","pending","0","done"]},"operators":{"distinct":7,"total":23,"identifiers":["()",".","+","function","if","===","-- (prefix)"]}},"paramCount":2,"sloc":{"logical":8,"physical":16},"errors":[],"lineEnd":45,"lineStart":30,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.042,"difficulty":1.909,"effort":240.192,"length":34,"time":13.344,"vocabulary":13,"volume":125.815,"operands":{"distinct":11,"total":21,"identifiers":["assert","strictEqual","file","fieldname","\"them-files\"","originalname","\"small0.dat\"","size","1778","buffer","length"]},"operators":{"distinct":2,"total":13,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":4,"physical":6},"errors":[],"lineEnd":42,"lineStart":37,"name":"<anon method-5>","paramNames":["file"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.286,"cyclomaticDensity":2.624,"halstead":{"bugs":0.062,"difficulty":2.115,"effort":2745.676,"length":30.571,"time":152.538,"vocabulary":9.571,"volume":185.449,"operands":{"distinct":7.714,"total":17.571},"operators":{"distinct":1.857,"total":13}},"paramCount":0.857,"sloc":{"logical":7,"physical":8.286}},"methodAverage":{"cyclomatic":1.333,"cyclomaticDensity":21.667,"halstead":{"bugs":0.043,"difficulty":3.766,"effort":667.208,"length":31,"time":37.067,"vocabulary":16,"volume":129.85,"operands":{"distinct":11.167,"total":18.167},"operators":{"distinct":4.833,"total":12.833}},"paramCount":1,"sloc":{"logical":6.5,"physical":23.667}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/none.js","testCases":2,"smells":11,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  22 |\n  23 |     util.submitForm(parser, form, function (err, req) {\n> 24 |       assert.ok(err)\n     |      ^ Assertion Roulette\n  25 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n  26 |       assert.strictEqual(req.files, undefined)\n  27 |       assert.strictEqual(req.body.key1, 'val1')","start":{"column":6,"line":24}},{"frame":"  23 |     util.submitForm(parser, form, function (err, req) {\n  24 |       assert.ok(err)\n> 25 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n     |      ^ Assertion Roulette\n  26 |       assert.strictEqual(req.files, undefined)\n  27 |       assert.strictEqual(req.body.key1, 'val1')\n  28 |       assert.strictEqual(req.body.key2, 'val2')","start":{"column":6,"line":25}},{"frame":"  24 |       assert.ok(err)\n  25 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 26 |       assert.strictEqual(req.files, undefined)\n     |      ^ Assertion Roulette\n  27 |       assert.strictEqual(req.body.key1, 'val1')\n  28 |       assert.strictEqual(req.body.key2, 'val2')\n  29 |       done()","start":{"column":6,"line":26}},{"frame":"  25 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n  26 |       assert.strictEqual(req.files, undefined)\n> 27 |       assert.strictEqual(req.body.key1, 'val1')\n     |      ^ Assertion Roulette\n  28 |       assert.strictEqual(req.body.key2, 'val2')\n  29 |       done()\n  30 |     })","start":{"column":6,"line":27}},{"frame":"  26 |       assert.strictEqual(req.files, undefined)\n  27 |       assert.strictEqual(req.body.key1, 'val1')\n> 28 |       assert.strictEqual(req.body.key2, 'val2')\n     |      ^ Assertion Roulette\n  29 |       done()\n  30 |     })\n  31 |   })","start":{"column":6,"line":28}},{"frame":"  39 |     util.submitForm(parser, form, function (err, req) {\n  40 |       assert.ifError(err)\n> 41 |       assert.strictEqual(req.files, undefined)\n     |      ^ Assertion Roulette\n  42 |       assert.strictEqual(req.body.key1, 'val1')\n  43 |       assert.strictEqual(req.body.key2, 'val2')\n  44 |       done()","start":{"column":6,"line":41}},{"frame":"  40 |       assert.ifError(err)\n  41 |       assert.strictEqual(req.files, undefined)\n> 42 |       assert.strictEqual(req.body.key1, 'val1')\n     |      ^ Assertion Roulette\n  43 |       assert.strictEqual(req.body.key2, 'val2')\n  44 |       done()\n  45 |     })","start":{"column":6,"line":42}},{"frame":"  41 |       assert.strictEqual(req.files, undefined)\n  42 |       assert.strictEqual(req.body.key1, 'val1')\n> 43 |       assert.strictEqual(req.body.key2, 'val2')\n     |      ^ Assertion Roulette\n  44 |       done()\n  45 |     })\n  46 |   })","start":{"column":6,"line":43}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   8 |\n   9 | describe('None', function () {\n> 10 |   var parser\n     |  ^ Global Variable\n  11 |\n  12 |   before(function () {\n  13 |     parser = multer().none()","start":{"line":10,"column":2,"index":184}},{"frame":"  15 |\n  16 |   it('should not allow file uploads', function (done) {\n> 17 |     var form = new FormData()\n     |    ^ Global Variable\n  18 |\n  19 |     form.append('key1', 'val1')\n  20 |     form.append('key2', 'val2')","start":{"line":17,"column":4,"index":314}},{"frame":"  32 |\n  33 |   it('should handle text fields', function (done) {\n> 34 |     var form = new FormData()\n     |    ^ Global Variable\n  35 |\n  36 |     form.append('key1', 'val1')\n  37 |     form.append('key2', 'val2')","start":{"line":34,"column":4,"index":817}}]}],"metrics":{"aggregate":{"cyclomatic":7,"cyclomaticDensity":16.279,"halstead":{"bugs":0.35,"difficulty":8.25,"effort":8658.183,"length":190,"time":481.01,"vocabulary":46,"volume":1049.477,"operands":{"distinct":40,"total":110,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","describe","\"None\"","parser","before","none","it","\"should not allow file uploads\"","done","form","append","\"key1\"","\"val1\"","\"key2\"","\"val2\"","\"file\"","file","\"small0.dat\"","submitForm","err","req","ok","strictEqual","code","\"LIMIT_UNEXPECTED_FILE\"","files","undefined","body","key1","key2","\"should handle text fields\"","ifError"]},"operators":{"distinct":6,"total":80,"identifiers":["var","=","()","function",".","new"]}},"paramCount":6,"sloc":{"logical":43,"physical":48}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":48,"lineStart":1,"maintainability":117.241,"methods":[{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.016,"difficulty":2,"effort":95.098,"length":15,"time":5.283,"vocabulary":9,"volume":47.549,"operands":{"distinct":6,"total":8,"identifiers":["parser","before","it","\"should not allow file uploads\"","done","\"should handle text fields\""]},"operators":{"distinct":3,"total":7,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":7,"physical":39},"errors":[],"lineEnd":47,"lineStart":9,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.006,"difficulty":1.5,"effort":27.142,"length":7,"time":1.508,"vocabulary":6,"volume":18.095,"operands":{"distinct":3,"total":3,"identifiers":["parser","multer","none"]},"operators":{"distinct":3,"total":4,"identifiers":["=","()","."]}},"paramCount":0,"sloc":{"logical":3,"physical":3},"errors":[],"lineEnd":14,"lineStart":12,"name":"<anon method-2>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.053,"difficulty":4.4,"effort":695.743,"length":36,"time":38.652,"vocabulary":21,"volume":158.123,"operands":{"distinct":15,"total":22,"identifiers":["form","FormData","append","\"key1\"","\"val1\"","\"key2\"","\"val2\"","\"file\"","util","file","\"small0.dat\"","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":14,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":7,"physical":16},"errors":[],"lineEnd":31,"lineStart":16,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.059,"difficulty":1.733,"effort":304.652,"length":43,"time":16.925,"vocabulary":17,"volume":175.761,"operands":{"distinct":15,"total":26,"identifiers":["assert","ok","err","strictEqual","code","\"LIMIT_UNEXPECTED_FILE\"","req","files","undefined","body","key1","\"val1\"","key2","\"val2\"","done"]},"operators":{"distinct":2,"total":17,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":6,"physical":8},"errors":[],"lineEnd":30,"lineStart":23,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.036,"difficulty":4,"effort":433.672,"length":26,"time":24.093,"vocabulary":18,"volume":108.418,"operands":{"distinct":12,"total":16,"identifiers":["form","FormData","append","\"key1\"","\"val1\"","\"key2\"","\"val2\"","util","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":10,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":5,"physical":14},"errors":[],"lineEnd":46,"lineStart":33,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.046,"difficulty":1.615,"effort":220.89,"length":35,"time":12.272,"vocabulary":15,"volume":136.741,"operands":{"distinct":13,"total":21,"identifiers":["assert","ifError","err","strictEqual","req","files","undefined","body","key1","\"val1\"","key2","\"val2\"","done"]},"operators":{"distinct":2,"total":14,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":5,"physical":7},"errors":[],"lineEnd":45,"lineStart":39,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":2.326,"halstead":{"bugs":0.05,"difficulty":1.179,"effort":1236.883,"length":27.143,"time":68.716,"vocabulary":6.571,"volume":149.925,"operands":{"distinct":5.714,"total":15.714},"operators":{"distinct":0.857,"total":11.429}},"paramCount":0.857,"sloc":{"logical":6.143,"physical":6.857}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":19.762,"halstead":{"bugs":0.036,"difficulty":2.541,"effort":296.199,"length":27,"time":16.456,"vocabulary":14.333,"volume":107.448,"operands":{"distinct":10.667,"total":16},"operators":{"distinct":3.667,"total":11}},"paramCount":1,"sloc":{"logical":5.5,"physical":14.5}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/memory-storage.js","testCases":3,"smells":70,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  26 |       assert.ifError(err)\n  27 |\n> 28 |       assert.strictEqual(req.body.name, 'Multer')\n     |      ^ Assertion Roulette\n  29 |\n  30 |       assert.strictEqual(req.file.fieldname, 'small0')\n  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')","start":{"column":6,"line":28}},{"frame":"  28 |       assert.strictEqual(req.body.name, 'Multer')\n  29 |\n> 30 |       assert.strictEqual(req.file.fieldname, 'small0')\n     |      ^ Assertion Roulette\n  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  32 |       assert.strictEqual(req.file.size, 1778)\n  33 |       assert.strictEqual(req.file.buffer.length, 1778)","start":{"column":6,"line":30}},{"frame":"  29 |\n  30 |       assert.strictEqual(req.file.fieldname, 'small0')\n> 31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n     |      ^ Assertion Roulette\n  32 |       assert.strictEqual(req.file.size, 1778)\n  33 |       assert.strictEqual(req.file.buffer.length, 1778)\n  34 |","start":{"column":6,"line":31}},{"frame":"  30 |       assert.strictEqual(req.file.fieldname, 'small0')\n  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n> 32 |       assert.strictEqual(req.file.size, 1778)\n     |      ^ Assertion Roulette\n  33 |       assert.strictEqual(req.file.buffer.length, 1778)\n  34 |\n  35 |       done()","start":{"column":6,"line":32}},{"frame":"  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  32 |       assert.strictEqual(req.file.size, 1778)\n> 33 |       assert.strictEqual(req.file.buffer.length, 1778)\n     |      ^ Assertion Roulette\n  34 |\n  35 |       done()\n  36 |     })","start":{"column":6,"line":33}},{"frame":"  55 |       assert.ifError(err)\n  56 |\n> 57 |       assert.strictEqual(req.body.name, 'Multer')\n     |      ^ Assertion Roulette\n  58 |       assert.strictEqual(req.body.version, '')\n  59 |       assert.strictEqual(req.body.year, '')\n  60 |","start":{"column":6,"line":57}},{"frame":"  56 |\n  57 |       assert.strictEqual(req.body.name, 'Multer')\n> 58 |       assert.strictEqual(req.body.version, '')\n     |      ^ Assertion Roulette\n  59 |       assert.strictEqual(req.body.year, '')\n  60 |\n  61 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))","start":{"column":6,"line":58}},{"frame":"  57 |       assert.strictEqual(req.body.name, 'Multer')\n  58 |       assert.strictEqual(req.body.version, '')\n> 59 |       assert.strictEqual(req.body.year, '')\n     |      ^ Assertion Roulette\n  60 |\n  61 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n  62 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))","start":{"column":6,"line":59}},{"frame":"  59 |       assert.strictEqual(req.body.year, '')\n  60 |\n> 61 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n     |      ^ Assertion Roulette\n  62 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n  63 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  64 |","start":{"column":6,"line":61}},{"frame":"  60 |\n  61 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n> 62 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n     |      ^ Assertion Roulette\n  63 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  64 |\n  65 |       assert.strictEqual(req.file.fieldname, 'empty')","start":{"column":6,"line":62}},{"frame":"  61 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n  62 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n> 63 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n     |      ^ Assertion Roulette\n  64 |\n  65 |       assert.strictEqual(req.file.fieldname, 'empty')\n  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')","start":{"column":6,"line":63}},{"frame":"  63 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  64 |\n> 65 |       assert.strictEqual(req.file.fieldname, 'empty')\n     |      ^ Assertion Roulette\n  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  67 |       assert.strictEqual(req.file.size, 0)\n  68 |       assert.strictEqual(req.file.buffer.length, 0)","start":{"column":6,"line":65}},{"frame":"  64 |\n  65 |       assert.strictEqual(req.file.fieldname, 'empty')\n> 66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n     |      ^ Assertion Roulette\n  67 |       assert.strictEqual(req.file.size, 0)\n  68 |       assert.strictEqual(req.file.buffer.length, 0)\n  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)","start":{"column":6,"line":66}},{"frame":"  65 |       assert.strictEqual(req.file.fieldname, 'empty')\n  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n> 67 |       assert.strictEqual(req.file.size, 0)\n     |      ^ Assertion Roulette\n  68 |       assert.strictEqual(req.file.buffer.length, 0)\n  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)\n  70 |","start":{"column":6,"line":67}},{"frame":"  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  67 |       assert.strictEqual(req.file.size, 0)\n> 68 |       assert.strictEqual(req.file.buffer.length, 0)\n     |      ^ Assertion Roulette\n  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)\n  70 |\n  71 |       done()","start":{"column":6,"line":68}},{"frame":"  67 |       assert.strictEqual(req.file.size, 0)\n  68 |       assert.strictEqual(req.file.buffer.length, 0)\n> 69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)\n     |      ^ Assertion Roulette\n  70 |\n  71 |       done()\n  72 |     })","start":{"column":6,"line":69}},{"frame":"   96 |       assert.ifError(err)\n   97 |\n>  98 |       assert(deepEqual(req.body, {}))\n      |      ^ Assertion Roulette\n   99 |\n  100 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')","start":{"column":6,"line":98}},{"frame":"   98 |       assert(deepEqual(req.body, {}))\n   99 |\n> 100 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n      |      ^ Assertion Roulette\n  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  102 |       assert.strictEqual(req.files.empty[0].size, 0)\n  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)","start":{"column":6,"line":100}},{"frame":"   99 |\n  100 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n> 101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n      |      ^ Assertion Roulette\n  102 |       assert.strictEqual(req.files.empty[0].size, 0)\n  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n  104 |","start":{"column":6,"line":101}},{"frame":"  100 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n> 102 |       assert.strictEqual(req.files.empty[0].size, 0)\n      |      ^ Assertion Roulette\n  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n  104 |\n  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')","start":{"column":6,"line":102}},{"frame":"  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  102 |       assert.strictEqual(req.files.empty[0].size, 0)\n> 103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n      |      ^ Assertion Roulette\n  104 |\n  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')","start":{"column":6,"line":103}},{"frame":"  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n  104 |\n> 105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n      |      ^ Assertion Roulette\n  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)","start":{"column":6,"line":105}},{"frame":"  104 |\n  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n> 106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n      |      ^ Assertion Roulette\n  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n  109 |","start":{"column":6,"line":106}},{"frame":"  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n> 107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n      |      ^ Assertion Roulette\n  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n  109 |\n  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')","start":{"column":6,"line":107}},{"frame":"  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n> 108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n      |      ^ Assertion Roulette\n  109 |\n  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')","start":{"column":6,"line":108}},{"frame":"  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n  109 |\n> 110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n      |      ^ Assertion Roulette\n  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)","start":{"column":6,"line":110}},{"frame":"  109 |\n  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n> 111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n      |      ^ Assertion Roulette\n  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n  114 |","start":{"column":6,"line":111}},{"frame":"  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n> 112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n      |      ^ Assertion Roulette\n  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n  114 |\n  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')","start":{"column":6,"line":112}},{"frame":"  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n> 113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n      |      ^ Assertion Roulette\n  114 |\n  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')","start":{"column":6,"line":113}},{"frame":"  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n  114 |\n> 115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n      |      ^ Assertion Roulette\n  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)","start":{"column":6,"line":115}},{"frame":"  114 |\n  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n> 116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n      |      ^ Assertion Roulette\n  117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n  119 |","start":{"column":6,"line":116}},{"frame":"  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n> 117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n      |      ^ Assertion Roulette\n  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n  119 |\n  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')","start":{"column":6,"line":117}},{"frame":"  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n> 118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n      |      ^ Assertion Roulette\n  119 |\n  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')","start":{"column":6,"line":118}},{"frame":"  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n  119 |\n> 120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n      |      ^ Assertion Roulette\n  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  122 |       assert.strictEqual(req.files.small1[0].size, 315)\n  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)","start":{"column":6,"line":120}},{"frame":"  119 |\n  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n> 121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n      |      ^ Assertion Roulette\n  122 |       assert.strictEqual(req.files.small1[0].size, 315)\n  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n  124 |","start":{"column":6,"line":121}},{"frame":"  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n> 122 |       assert.strictEqual(req.files.small1[0].size, 315)\n      |      ^ Assertion Roulette\n  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n  124 |\n  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')","start":{"column":6,"line":122}},{"frame":"  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  122 |       assert.strictEqual(req.files.small1[0].size, 315)\n> 123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n      |      ^ Assertion Roulette\n  124 |\n  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')","start":{"column":6,"line":123}},{"frame":"  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n  124 |\n> 125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n      |      ^ Assertion Roulette\n  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)","start":{"column":6,"line":125}},{"frame":"  124 |\n  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n> 126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n      |      ^ Assertion Roulette\n  127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n  129 |","start":{"column":6,"line":126}},{"frame":"  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n> 127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n      |      ^ Assertion Roulette\n  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n  129 |\n  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')","start":{"column":6,"line":127}},{"frame":"  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n> 128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n      |      ^ Assertion Roulette\n  129 |\n  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')","start":{"column":6,"line":128}},{"frame":"  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n  129 |\n> 130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n      |      ^ Assertion Roulette\n  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)","start":{"column":6,"line":130}},{"frame":"  129 |\n  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n> 131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n      |      ^ Assertion Roulette\n  132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)\n  134 |","start":{"column":6,"line":131}},{"frame":"  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n> 132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n      |      ^ Assertion Roulette\n  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)\n  134 |\n  135 |       done()","start":{"column":6,"line":132}},{"frame":"  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n> 133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)\n      |      ^ Assertion Roulette\n  134 |\n  135 |       done()\n  136 |     })","start":{"column":6,"line":133}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   9 |\n  10 | describe('Memory Storage', function () {\n> 11 |   var upload\n     |  ^ Global Variable\n  12 |\n  13 |   before(function (done) {\n  14 |     upload = multer()","start":{"line":11,"column":2,"index":232}},{"frame":"  17 |\n  18 |   it('should process multipart/form-data POST request', function (done) {\n> 19 |     var form = new FormData()\n     |    ^ Global Variable\n  20 |     var parser = upload.single('small0')\n  21 |\n  22 |     form.append('name', 'Multer')","start":{"line":19,"column":4,"index":388}},{"frame":"  18 |   it('should process multipart/form-data POST request', function (done) {\n  19 |     var form = new FormData()\n> 20 |     var parser = upload.single('small0')\n     |    ^ Global Variable\n  21 |\n  22 |     form.append('name', 'Multer')\n  23 |     form.append('small0', util.file('small0.dat'))","start":{"line":20,"column":4,"index":418}},{"frame":"  38 |\n  39 |   it('should process empty fields and an empty file', function (done) {\n> 40 |     var form = new FormData()\n     |    ^ Global Variable\n  41 |     var parser = upload.single('empty')\n  42 |\n  43 |     form.append('empty', util.file('empty.dat'))","start":{"line":40,"column":4,"index":997}},{"frame":"  39 |   it('should process empty fields and an empty file', function (done) {\n  40 |     var form = new FormData()\n> 41 |     var parser = upload.single('empty')\n     |    ^ Global Variable\n  42 |\n  43 |     form.append('empty', util.file('empty.dat'))\n  44 |     form.append('name', 'Multer')","start":{"line":41,"column":4,"index":1027}},{"frame":"  74 |\n  75 |   it('should process multiple files', function (done) {\n> 76 |     var form = new FormData()\n     |    ^ Global Variable\n  77 |     var parser = upload.fields([\n  78 |       { name: 'empty', maxCount: 1 },\n  79 |       { name: 'tiny0', maxCount: 1 },","start":{"line":76,"column":4,"index":2218}},{"frame":"  75 |   it('should process multiple files', function (done) {\n  76 |     var form = new FormData()\n> 77 |     var parser = upload.fields([\n     |    ^ Global Variable\n  78 |       { name: 'empty', maxCount: 1 },\n  79 |       { name: 'tiny0', maxCount: 1 },\n  80 |       { name: 'tiny1', maxCount: 1 },","start":{"line":77,"column":4,"index":2248}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  30 |       assert.strictEqual(req.file.fieldname, 'small0')\n  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n> 32 |       assert.strictEqual(req.file.size, 1778)\n     |                                        ^ Magic Number\n  33 |       assert.strictEqual(req.file.buffer.length, 1778)\n  34 |\n  35 |       done()","start":{"line":32,"column":40,"index":833}},{"frame":"  31 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  32 |       assert.strictEqual(req.file.size, 1778)\n> 33 |       assert.strictEqual(req.file.buffer.length, 1778)\n     |                                                 ^ Magic Number\n  34 |\n  35 |       done()\n  36 |     })","start":{"line":33,"column":49,"index":888}},{"frame":"  65 |       assert.strictEqual(req.file.fieldname, 'empty')\n  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n> 67 |       assert.strictEqual(req.file.size, 0)\n     |                                        ^ Magic Number\n  68 |       assert.strictEqual(req.file.buffer.length, 0)\n  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)\n  70 |","start":{"line":67,"column":40,"index":2011}},{"frame":"  66 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  67 |       assert.strictEqual(req.file.size, 0)\n> 68 |       assert.strictEqual(req.file.buffer.length, 0)\n     |                                                 ^ Magic Number\n  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)\n  70 |\n  71 |       done()","start":{"line":68,"column":49,"index":2063}},{"frame":"  100 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n> 102 |       assert.strictEqual(req.files.empty[0].size, 0)\n      |                                                  ^ Magic Number\n  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n  104 |\n  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')","start":{"line":102,"column":50,"index":3210}},{"frame":"  101 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  102 |       assert.strictEqual(req.files.empty[0].size, 0)\n> 103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)\n      |                                                           ^ Magic Number\n  104 |\n  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')","start":{"line":103,"column":59,"index":3272}},{"frame":"  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n> 107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n      |                                                  ^ Magic Number\n  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n  109 |\n  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')","start":{"line":107,"column":50,"index":3461}},{"frame":"  106 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n> 108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)\n      |                                                           ^ Magic Number\n  109 |\n  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')","start":{"line":108,"column":59,"index":3525}},{"frame":"  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n> 112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n      |                                                  ^ Magic Number\n  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n  114 |\n  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')","start":{"line":112,"column":50,"index":3716}},{"frame":"  111 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n> 113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)\n      |                                                           ^ Magic Number\n  114 |\n  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')","start":{"line":113,"column":59,"index":3778}},{"frame":"  115 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n> 117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n      |                                                   ^ Magic Number\n  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n  119 |\n  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')","start":{"line":117,"column":51,"index":3972}},{"frame":"  116 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  117 |       assert.strictEqual(req.files.small0[0].size, 1778)\n> 118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)\n      |                                                            ^ Magic Number\n  119 |\n  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')","start":{"line":118,"column":60,"index":4038}},{"frame":"  120 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n> 122 |       assert.strictEqual(req.files.small1[0].size, 315)\n      |                                                   ^ Magic Number\n  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n  124 |\n  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')","start":{"line":122,"column":51,"index":4235}},{"frame":"  121 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  122 |       assert.strictEqual(req.files.small1[0].size, 315)\n> 123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)\n      |                                                            ^ Magic Number\n  124 |\n  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')","start":{"line":123,"column":60,"index":4300}},{"frame":"  125 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n> 127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n      |                                                   ^ Magic Number\n  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n  129 |\n  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')","start":{"line":127,"column":51,"index":4496}},{"frame":"  126 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  127 |       assert.strictEqual(req.files.medium[0].size, 13196)\n> 128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)\n      |                                                            ^ Magic Number\n  129 |\n  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')","start":{"line":128,"column":60,"index":4563}},{"frame":"  130 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n> 132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n      |                                                  ^ Magic Number\n  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)\n  134 |\n  135 |       done()","start":{"line":132,"column":50,"index":4756}},{"frame":"  131 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  132 |       assert.strictEqual(req.files.large[0].size, 2413677)\n> 133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)\n      |                                                           ^ Magic Number\n  134 |\n  135 |       done()\n  136 |     })","start":{"line":133,"column":59,"index":4824}}]}],"metrics":{"aggregate":{"cyclomatic":9,"cyclomaticDensity":6.569,"halstead":{"bugs":2.077,"difficulty":30.977,"effort":192996.624,"length":944,"time":10722.035,"vocabulary":97,"volume":6230.318,"operands":{"distinct":87,"total":539,"identifiers":["assert","require","\"assert\"","deepEqual","\"deep-equal\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","describe","\"Memory Storage\"","upload","before","done","it","\"should process multipart/form-data POST request\"","form","parser","single","\"small0\"","append","\"name\"","\"Multer\"","file","\"small0.dat\"","submitForm","err","req","ifError","strictEqual","body","name","fieldname","originalname","size","1778","buffer","length","\"should process empty fields and an empty file\"","\"empty\"","\"empty.dat\"","\"version\"","\"\"","\"year\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","version","year","checkboxfull","checkboxhalfempty","checkboxempty","0","Buffer","isBuffer","true","\"should process multiple files\"","fields","maxCount","1","\"tiny0\"","\"tiny1\"","\"small1\"","\"medium\"","\"large\"","\"tiny0.dat\"","\"tiny1.dat\"","\"small1.dat\"","\"medium.dat\"","\"large.jpg\"","files","empty","tiny0","122","tiny1","7","small0","small1","315","medium","13196","large","2413677"]},"operators":{"distinct":10,"total":405,"identifiers":["var","=","()","function","new",".","[]",",","{}",":"]}},"paramCount":10,"sloc":{"logical":137,"physical":139}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":139,"lineStart":1,"maintainability":92.783,"methods":[{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.023,"difficulty":2.571,"effort":179.384,"length":21,"time":9.966,"vocabulary":10,"volume":69.76,"operands":{"distinct":7,"total":12,"identifiers":["upload","before","done","it","\"should process multipart/form-data POST request\"","\"should process empty fields and an empty file\"","\"should process multiple files\""]},"operators":{"distinct":3,"total":9,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":9,"physical":129},"errors":[],"lineEnd":138,"lineStart":10,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.005,"difficulty":1,"effort":13.932,"length":6,"time":0.774,"vocabulary":5,"volume":13.932,"operands":{"distinct":3,"total":3,"identifiers":["upload","multer","done"]},"operators":{"distinct":2,"total":3,"identifiers":["=","()"]}},"paramCount":1,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":16,"lineStart":13,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.056,"difficulty":4.4,"effort":734.395,"length":38,"time":40.8,"vocabulary":21,"volume":166.908,"operands":{"distinct":15,"total":22,"identifiers":["form","FormData","parser","upload","single","\"small0\"","append","\"name\"","\"Multer\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":16,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":20},"errors":[],"lineEnd":37,"lineStart":18,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.085,"difficulty":1.944,"effort":495.821,"length":59,"time":27.546,"vocabulary":20,"volume":254.994,"operands":{"distinct":18,"total":35,"identifiers":["assert","ifError","err","strictEqual","req","body","name","\"Multer\"","file","fieldname","\"small0\"","originalname","\"small0.dat\"","size","1778","buffer","length","done"]},"operators":{"distinct":2,"total":24,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":7,"physical":12},"errors":[],"lineEnd":36,"lineStart":25,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.139,"difficulty":7.043,"effort":2942.669,"length":86,"time":163.482,"vocabulary":29,"volume":417.786,"operands":{"distinct":23,"total":54,"identifiers":["form","FormData","parser","upload","single","\"empty\"","append","util","file","\"empty.dat\"","\"name\"","\"Multer\"","\"version\"","\"\"","\"year\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","submitForm","err","req"]},"operators":{"distinct":6,"total":32,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":16,"physical":35},"errors":[],"lineEnd":73,"lineStart":39,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.882,"halstead":{"bugs":0.224,"difficulty":5.067,"effort":3402.495,"length":132,"time":189.028,"vocabulary":34,"volume":671.545,"operands":{"distinct":30,"total":76,"identifiers":["assert","ifError","err","strictEqual","req","body","name","\"Multer\"","version","\"\"","year","deepEqual","checkboxfull","\"cb1\"","\"cb2\"","checkboxhalfempty","checkboxempty","file","fieldname","\"empty\"","originalname","\"empty.dat\"","size","0","buffer","length","Buffer","isBuffer","true","done"]},"operators":{"distinct":4,"total":56,"identifiers":["()",".","[]",","]}},"paramCount":2,"sloc":{"logical":17,"physical":19},"errors":[],"lineEnd":72,"lineStart":54,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":3.03,"halstead":{"bugs":0.257,"difficulty":14.464,"effort":11158.406,"length":147,"time":619.911,"vocabulary":38,"volume":771.445,"operands":{"distinct":28,"total":81,"identifiers":["form","FormData","parser","upload","fields","name","\"empty\"","maxCount","1","\"tiny0\"","\"tiny1\"","\"small0\"","\"small1\"","\"medium\"","\"large\"","append","util","file","\"empty.dat\"","\"tiny0.dat\"","\"tiny1.dat\"","\"small0.dat\"","\"small1.dat\"","\"medium.dat\"","\"large.jpg\"","submitForm","err","req"]},"operators":{"distinct":10,"total":66,"identifiers":["var","=","new","()",".","[]",",","{}",":","function"]}},"paramCount":1,"sloc":{"logical":33,"physical":63},"errors":[],"lineEnd":137,"lineStart":75,"name":"<anon method-7>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":3.125,"halstead":{"bugs":0.775,"difficulty":11.381,"effort":26465.49,"length":421,"time":1470.305,"vocabulary":46,"volume":2325.42,"operands":{"distinct":42,"total":239,"identifiers":["assert","ifError","err","deepEqual","req","body","strictEqual","files","empty","0","fieldname","\"empty\"","originalname","\"empty.dat\"","size","buffer","length","tiny0","\"tiny0\"","\"tiny0.dat\"","122","tiny1","\"tiny1\"","\"tiny1.dat\"","7","small0","\"small0\"","\"small0.dat\"","1778","small1","\"small1\"","\"small1.dat\"","315","medium","\"medium\"","\"medium.dat\"","13196","large","\"large\"","\"large.jpg\"","2413677","done"]},"operators":{"distinct":4,"total":182,"identifiers":["()",".","{}","[]"]}},"paramCount":2,"sloc":{"logical":32,"physical":42},"errors":[],"lineEnd":136,"lineStart":95,"name":"<anon method-8>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":0.73,"halstead":{"bugs":0.231,"difficulty":3.442,"effort":21444.069,"length":104.889,"time":1191.337,"vocabulary":10.778,"volume":692.258,"operands":{"distinct":9.667,"total":59.889},"operators":{"distinct":1.111,"total":45}},"paramCount":1.111,"sloc":{"logical":15.222,"physical":15.444}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":11.19,"halstead":{"bugs":0.195,"difficulty":5.984,"effort":5674.074,"length":113.75,"time":315.226,"vocabulary":25.375,"volume":586.474,"operands":{"distinct":20.75,"total":65.25},"operators":{"distinct":4.625,"total":48.5}},"paramCount":1.25,"sloc":{"logical":15.625,"physical":40.5}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/issue-232.js","testCases":1,"smells":6,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  35 |       assert.ok(err, 'an error was given')\n  36 |\n> 37 |       assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')\n     |      ^ Assertion Roulette\n  38 |       assert.strictEqual(err.field, 'file')\n  39 |\n  40 |       done()","start":{"column":6,"line":37}},{"frame":"  36 |\n  37 |       assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')\n> 38 |       assert.strictEqual(err.field, 'file')\n     |      ^ Assertion Roulette\n  39 |\n  40 |       done()\n  41 |     })","start":{"column":6,"line":38}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  14 |   before(function (done) {\n  15 |     temp.mkdir(function (err, path) {\n> 16 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  17 |\n  18 |       uploadDir = path\n  19 |       upload = multer({ dest: path, limits: { fileSize: 100 } })","start":{"line":16,"column":6,"index":345}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  10 |\n  11 | describe('Issue #232', function () {\n> 12 |   var uploadDir, upload\n     |  ^ Global Variable\n  13 |\n  14 |   before(function (done) {\n  15 |     temp.mkdir(function (err, path) {","start":{"line":12,"column":2,"index":251}},{"frame":"  27 |\n  28 |   it('should report limit errors', function (done) {\n> 29 |     var form = new FormData()\n     |    ^ Global Variable\n  30 |     var parser = upload.single('file')\n  31 |\n  32 |     form.append('file', util.file('large.jpg'))","start":{"line":29,"column":4,"index":603}},{"frame":"  28 |   it('should report limit errors', function (done) {\n  29 |     var form = new FormData()\n> 30 |     var parser = upload.single('file')\n     |    ^ Global Variable\n  31 |\n  32 |     form.append('file', util.file('large.jpg'))\n  33 |","start":{"line":30,"column":4,"index":633}}]}],"metrics":{"aggregate":{"cyclomatic":8,"cyclomaticDensity":17.391,"halstead":{"bugs":0.284,"difficulty":9.318,"effort":7936.513,"length":148,"time":440.917,"vocabulary":54,"volume":851.723,"operands":{"distinct":44,"total":82,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","temp","\"fs-temp\"","rimraf","\"rimraf\"","FormData","\"form-data\"","describe","\"Issue #232\"","uploadDir","upload","before","done","mkdir","err","path","dest","limits","fileSize","100","after","it","\"should report limit errors\"","form","parser","single","\"file\"","append","file","\"large.jpg\"","submitForm","req","ok","\"an error was given\"","strictEqual","code","\"LIMIT_FILE_SIZE\"","field"]},"operators":{"distinct":10,"total":66,"identifiers":["var","=","()","function",".","if","return","{}",":","new"]}},"paramCount":7,"sloc":{"logical":46,"physical":44}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":44,"lineStart":1,"maintainability":116.312,"methods":[{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.018,"difficulty":1.929,"effort":102.505,"length":16,"time":5.695,"vocabulary":10,"volume":53.151,"operands":{"distinct":7,"total":9,"identifiers":["uploadDir","upload","before","done","after","it","\"should report limit errors\""]},"operators":{"distinct":3,"total":7,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":8,"physical":33},"errors":[],"lineEnd":43,"lineStart":11,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.007,"difficulty":1.5,"effort":29.477,"length":7,"time":1.638,"vocabulary":7,"volume":19.651,"operands":{"distinct":4,"total":4,"identifiers":["temp","mkdir","err","path"]},"operators":{"distinct":3,"total":3,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":9},"errors":[],"lineEnd":22,"lineStart":14,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":20,"halstead":{"bugs":0.033,"difficulty":3.9,"effort":390,"length":25,"time":21.667,"vocabulary":16,"volume":100,"operands":{"distinct":10,"total":13,"identifiers":["err","done","uploadDir","path","upload","multer","dest","limits","fileSize","100"]},"operators":{"distinct":6,"total":12,"identifiers":["if","return","()","=","{}",":"]}},"paramCount":2,"sloc":{"logical":10,"physical":7},"errors":[],"lineEnd":21,"lineStart":15,"name":"<anon method-3>","paramNames":["err","path"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.003,"difficulty":0.5,"effort":4,"length":4,"time":0.222,"vocabulary":4,"volume":8,"operands":{"distinct":3,"total":3,"identifiers":["rimraf","uploadDir","done"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":26,"lineStart":24,"name":"<anon method-4>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.045,"difficulty":4.154,"effort":564.648,"length":32,"time":31.369,"vocabulary":19,"volume":135.934,"operands":{"distinct":13,"total":18,"identifiers":["form","FormData","parser","upload","single","\"file\"","append","util","file","\"large.jpg\"","submitForm","err","req"]},"operators":{"distinct":6,"total":14,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":7,"physical":15},"errors":[],"lineEnd":42,"lineStart":28,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.029,"difficulty":1.5,"effort":129.059,"length":24,"time":7.17,"vocabulary":12,"volume":86.039,"operands":{"distinct":10,"total":15,"identifiers":["assert","ok","err","\"an error was given\"","strictEqual","code","\"LIMIT_FILE_SIZE\"","field","\"file\"","done"]},"operators":{"distinct":2,"total":9,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":4,"physical":8},"errors":[],"lineEnd":41,"lineStart":34,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.143,"cyclomaticDensity":2.484,"halstead":{"bugs":0.041,"difficulty":1.331,"effort":1133.788,"length":21.143,"time":62.988,"vocabulary":7.714,"volume":121.675,"operands":{"distinct":6.286,"total":11.714},"operators":{"distinct":1.429,"total":9.429}},"paramCount":1,"sloc":{"logical":6.571,"physical":6.286}},"methodAverage":{"cyclomatic":1.167,"cyclomaticDensity":36.964,"halstead":{"bugs":0.022,"difficulty":2.247,"effort":203.281,"length":18,"time":11.293,"vocabulary":11.333,"volume":67.129,"operands":{"distinct":7.833,"total":10.333},"operators":{"distinct":3.5,"total":7.667}},"paramCount":1.167,"sloc":{"logical":5.333,"physical":12.5}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/functionality.js","testCases":5,"smells":28,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  52 |       util.submitForm(parser, env.form, function (err, req) {\n  53 |         assert.ifError(err)\n> 54 |         assert.ok(startsWith(req.file.path, env.uploadDir))\n     |        ^ Assertion Roulette\n  55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)\n  56 |         done()\n  57 |       })","start":{"column":8,"line":54}},{"frame":"  53 |         assert.ifError(err)\n  54 |         assert.ok(startsWith(req.file.path, env.uploadDir))\n> 55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)\n     |        ^ Assertion Roulette\n  56 |         done()\n  57 |       })\n  58 |     })","start":{"column":8,"line":55}},{"frame":"   99 |       util.submitForm(parser, env.form, function (err, req) {\n  100 |         assert.ifError(err)\n> 101 |         assert.strictEqual(req.files.length, 2)\n      |        ^ Assertion Roulette\n  102 |         assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')\n  103 |         assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')\n  104 |         done()","start":{"column":8,"line":101}},{"frame":"  100 |         assert.ifError(err)\n  101 |         assert.strictEqual(req.files.length, 2)\n> 102 |         assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')\n      |        ^ Assertion Roulette\n  103 |         assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')\n  104 |         done()\n  105 |       })","start":{"column":8,"line":102}},{"frame":"  101 |         assert.strictEqual(req.files.length, 2)\n  102 |         assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')\n> 103 |         assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')\n      |        ^ Assertion Roulette\n  104 |         done()\n  105 |       })\n  106 |     })","start":{"column":8,"line":103}},{"frame":"  129 |     util.submitForm(parser, form, function (err, req) {\n  130 |       assert.ifError(err)\n> 131 |       assert.strictEqual(req.files.length, 2)\n      |      ^ Assertion Roulette\n  132 |       assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)\n  133 |       assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)\n  134 |       done()","start":{"column":6,"line":131}},{"frame":"  130 |       assert.ifError(err)\n  131 |       assert.strictEqual(req.files.length, 2)\n> 132 |       assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)\n      |      ^ Assertion Roulette\n  133 |       assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)\n  134 |       done()\n  135 |     })","start":{"column":6,"line":132}},{"frame":"  131 |       assert.strictEqual(req.files.length, 2)\n  132 |       assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)\n> 133 |       assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)\n      |      ^ Assertion Roulette\n  134 |       done()\n  135 |     })\n  136 |   })","start":{"column":6,"line":133}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  22 |   function makeStandardEnv (cb) {\n  23 |     temp.mkdir(function (err, uploadDir) {\n> 24 |       if (err) return cb(err)\n     |      ^ Conditional Test Logic\n  25 |\n  26 |       cleanup.push(uploadDir)\n  27 |","start":{"line":24,"column":6,"index":539}},{"frame":"  40 |\n  41 |   after(function () {\n> 42 |     while (cleanup.length) rimraf.sync(cleanup.pop())\n     |    ^ Conditional Test Logic\n  43 |   })\n  44 |\n  45 |   it('should upload the file to the `dest` dir', function (done) {","start":{"line":42,"column":4,"index":882}},{"frame":"  45 |   it('should upload the file to the `dest` dir', function (done) {\n  46 |     makeStandardEnv(function (err, env) {\n> 47 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  48 |\n  49 |       var parser = env.upload.single('small0')\n  50 |       env.form.append('small0', util.file('small0.dat'))","start":{"line":47,"column":6,"index":1053}},{"frame":"  61 |   it('should rename the uploaded file', function (done) {\n  62 |     makeStandardEnv(function (err, env) {\n> 63 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  64 |\n  65 |       var parser = env.upload.single('small0')\n  66 |       env.form.append('small0', util.file('small0.dat'))","start":{"line":63,"column":6,"index":1541}},{"frame":"  76 |   it('should ensure all req.files values (single-file per field) point to an array', function (done) {\n  77 |     makeStandardEnv(function (err, env) {\n> 78 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  79 |\n  80 |       var parser = env.upload.single('tiny0')\n  81 |       env.form.append('tiny0', util.file('tiny0.dat'))","start":{"line":78,"column":6,"index":2017}},{"frame":"  91 |   it('should ensure all req.files values (multi-files per field) point to an array', function (done) {\n  92 |     makeStandardEnv(function (err, env) {\n> 93 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  94 |\n  95 |       var parser = env.upload.array('themFiles', 2)\n  96 |       env.form.append('themFiles', util.file('small0.dat'))","start":{"line":93,"column":6,"index":2488}},{"frame":"  111 |       destination: function (req, file, cb) {\n  112 |         temp.template('testforme-%s').mkdir(function (err, uploadDir) {\n> 113 |           if (err) return cb(err)\n      |          ^ Conditional Test Logic\n  114 |\n  115 |           cleanup.push(uploadDir)\n  116 |           cb(null, uploadDir)","start":{"line":113,"column":10,"index":3267}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  18 |\n  19 | describe('Functionality', function () {\n> 20 |   var cleanup = []\n     |  ^ Global Variable\n  21 |\n  22 |   function makeStandardEnv (cb) {\n  23 |     temp.mkdir(function (err, uploadDir) {","start":{"line":20,"column":2,"index":438}},{"frame":"  26 |       cleanup.push(uploadDir)\n  27 |\n> 28 |       var storage = multer.diskStorage({\n     |      ^ Global Variable\n  29 |         destination: uploadDir,\n  30 |         filename: generateFilename\n  31 |       })","start":{"line":28,"column":6,"index":601}},{"frame":"  47 |       if (err) return done(err)\n  48 |\n> 49 |       var parser = env.upload.single('small0')\n     |      ^ Global Variable\n  50 |       env.form.append('small0', util.file('small0.dat'))\n  51 |\n  52 |       util.submitForm(parser, env.form, function (err, req) {","start":{"line":49,"column":6,"index":1086}},{"frame":"  63 |       if (err) return done(err)\n  64 |\n> 65 |       var parser = env.upload.single('small0')\n     |      ^ Global Variable\n  66 |       env.form.append('small0', util.file('small0.dat'))\n  67 |\n  68 |       util.submitForm(parser, env.form, function (err, req) {","start":{"line":65,"column":6,"index":1574}},{"frame":"  78 |       if (err) return done(err)\n  79 |\n> 80 |       var parser = env.upload.single('tiny0')\n     |      ^ Global Variable\n  81 |       env.form.append('tiny0', util.file('tiny0.dat'))\n  82 |\n  83 |       util.submitForm(parser, env.form, function (err, req) {","start":{"line":80,"column":6,"index":2050}},{"frame":"  93 |       if (err) return done(err)\n  94 |\n> 95 |       var parser = env.upload.array('themFiles', 2)\n     |      ^ Global Variable\n  96 |       env.form.append('themFiles', util.file('small0.dat'))\n  97 |       env.form.append('themFiles', util.file('small1.dat'))\n  98 |","start":{"line":95,"column":6,"index":2521}},{"frame":"  108 |\n  109 |   it('should rename the destination directory to a different directory', function (done) {\n> 110 |     var storage = multer.diskStorage({\n      |    ^ Global Variable\n  111 |       destination: function (req, file, cb) {\n  112 |         temp.template('testforme-%s').mkdir(function (err, uploadDir) {\n  113 |           if (err) return cb(err)","start":{"line":110,"column":4,"index":3104}},{"frame":"  120 |     })\n  121 |\n> 122 |     var form = new FormData()\n      |    ^ Global Variable\n  123 |     var upload = multer({ storage: storage })\n  124 |     var parser = upload.array('themFiles', 2)\n  125 |","start":{"line":122,"column":4,"index":3421}},{"frame":"  121 |\n  122 |     var form = new FormData()\n> 123 |     var upload = multer({ storage: storage })\n      |    ^ Global Variable\n  124 |     var parser = upload.array('themFiles', 2)\n  125 |\n  126 |     form.append('themFiles', util.file('small0.dat'))","start":{"line":123,"column":4,"index":3451}},{"frame":"  122 |     var form = new FormData()\n  123 |     var upload = multer({ storage: storage })\n> 124 |     var parser = upload.array('themFiles', 2)\n      |    ^ Global Variable\n  125 |\n  126 |     form.append('themFiles', util.file('small0.dat'))\n  127 |     form.append('themFiles', util.file('small1.dat'))","start":{"line":124,"column":4,"index":3497}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  53 |         assert.ifError(err)\n  54 |         assert.ok(startsWith(req.file.path, env.uploadDir))\n> 55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)\n     |                                                         ^ Magic Number\n  56 |         done()\n  57 |       })\n  58 |     })","start":{"line":55,"column":57,"index":1392}},{"frame":"   99 |       util.submitForm(parser, env.form, function (err, req) {\n  100 |         assert.ifError(err)\n> 101 |         assert.strictEqual(req.files.length, 2)\n      |                                             ^ Magic Number\n  102 |         assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')\n  103 |         assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')\n  104 |         done()","start":{"line":101,"column":45,"index":2823}},{"frame":"  129 |     util.submitForm(parser, form, function (err, req) {\n  130 |       assert.ifError(err)\n> 131 |       assert.strictEqual(req.files.length, 2)\n      |                                           ^ Magic Number\n  132 |       assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)\n  133 |       assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)\n  134 |       done()","start":{"line":131,"column":43,"index":3774}}]}],"metrics":{"aggregate":{"cyclomatic":30,"cyclomaticDensity":20.408,"halstead":{"bugs":1.339,"difficulty":32.658,"effort":131219.55,"length":613,"time":7289.975,"vocabulary":94,"volume":4017.963,"operands":{"distinct":79,"total":344,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","temp","\"fs-temp\"","rimraf","\"rimraf\"","FormData","\"form-data\"","generateFilename","req","file","cb","null","fieldname","originalname","startsWith","str","start","substring","0","length","describe","\"Functionality\"","cleanup","makeStandardEnv","mkdir","err","uploadDir","push","storage","diskStorage","destination","filename","upload","form","after","sync","pop","it","\"should upload the file to the `dest` dir\"","done","env","parser","single","\"small0\"","append","\"small0.dat\"","submitForm","ifError","ok","path","strictEqual","fileSize","1778","\"should rename the uploaded file\"","\"small0small0.dat\"","\"should ensure all req.files values (single-file per field) point to an array\"","\"tiny0\"","\"tiny0.dat\"","\"tiny0tiny0.dat\"","\"should ensure all req.files values (multi-files per field) point to an array\"","array","\"themFiles\"","2","\"small1.dat\"","files","\"themFilessmall0.dat\"","1","\"themFilessmall1.dat\"","\"should rename the destination directory to a different directory\"","template","\"testforme-%s\"","indexOf","\"/testforme-\""]},"operators":{"distinct":15,"total":269,"identifiers":["var","=","()","function","+",".","return","===","[]","if","{}",":","new","while",">="]}},"paramCount":36,"sloc":{"logical":147,"physical":138}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":138,"lineStart":1,"maintainability":111.104,"methods":[{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.01,"difficulty":1.8,"effort":54,"length":10,"time":3,"vocabulary":8,"volume":30,"operands":{"distinct":5,"total":6,"identifiers":["cb","null","file","fieldname","originalname"]},"operators":{"distinct":3,"total":4,"identifiers":["()","+","."]}},"paramCount":3,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":13,"lineStart":11,"name":"generateFilename","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.012,"difficulty":2.4,"effort":83.686,"length":11,"time":4.649,"vocabulary":9,"volume":34.869,"operands":{"distinct":5,"total":6,"identifiers":["str","substring","0","start","length"]},"operators":{"distinct":4,"total":5,"identifiers":["return","===","()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":3},"errors":[],"lineEnd":17,"lineStart":15,"name":"startsWith","paramNames":["str","start"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":7.143,"halstead":{"bugs":0.047,"difficulty":4.318,"effort":604.545,"length":35,"time":33.586,"vocabulary":16,"volume":140,"operands":{"distinct":11,"total":19,"identifiers":["cleanup","makeStandardEnv","cb","after","it","\"should upload the file to the `dest` dir\"","done","\"should rename the uploaded file\"","\"should ensure all req.files values (single-file per field) point to an array\"","\"should ensure all req.files values (multi-files per field) point to an array\"","\"should rename the destination directory to a different directory\""]},"operators":{"distinct":5,"total":16,"identifiers":["var","=","[]","function","()"]}},"paramCount":0,"sloc":{"logical":14,"physical":119},"errors":[],"lineEnd":137,"lineStart":19,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.007,"difficulty":1.5,"effort":29.477,"length":7,"time":1.638,"vocabulary":7,"volume":19.651,"operands":{"distinct":4,"total":4,"identifiers":["temp","mkdir","err","uploadDir"]},"operators":{"distinct":3,"total":3,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":18},"errors":[],"lineEnd":39,"lineStart":22,"name":"makeStandardEnv","paramNames":["cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":14.286,"halstead":{"bugs":0.067,"difficulty":6.9,"effort":1391.995,"length":44,"time":77.333,"vocabulary":24,"volume":201.738,"operands":{"distinct":15,"total":23,"identifiers":["err","cb","cleanup","push","uploadDir","storage","multer","diskStorage","destination","filename","generateFilename","null","upload","form","FormData"]},"operators":{"distinct":9,"total":21,"identifiers":["if","return","()",".","var","=","{}",":","new"]}},"paramCount":2,"sloc":{"logical":14,"physical":16},"errors":[],"lineEnd":38,"lineStart":23,"name":"<anon method-2>","paramNames":["err","uploadDir"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":66.667,"halstead":{"bugs":0.012,"difficulty":1.8,"effort":64.8,"length":12,"time":3.6,"vocabulary":8,"volume":36,"operands":{"distinct":5,"total":6,"identifiers":["cleanup","length","rimraf","sync","pop"]},"operators":{"distinct":3,"total":6,"identifiers":["while",".","()"]}},"paramCount":0,"sloc":{"logical":3,"physical":3},"errors":[],"lineEnd":43,"lineStart":41,"name":"<anon method-3>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["makeStandardEnv","err","env"]},"operators":{"distinct":2,"total":2,"identifiers":["()","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":15},"errors":[],"lineEnd":59,"lineStart":45,"name":"<anon method-4>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":22.222,"halstead":{"bugs":0.057,"difficulty":5.5,"effort":942.152,"length":39,"time":52.342,"vocabulary":21,"volume":171.3,"operands":{"distinct":14,"total":22,"identifiers":["err","done","parser","env","upload","single","\"small0\"","form","append","util","file","\"small0.dat\"","submitForm","req"]},"operators":{"distinct":7,"total":17,"identifiers":["if","return","()","var","=",".","function"]}},"paramCount":2,"sloc":{"logical":9,"physical":13},"errors":[],"lineEnd":58,"lineStart":46,"name":"<anon method-5>","paramNames":["err","env"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.048,"difficulty":1.333,"effort":190.748,"length":35,"time":10.597,"vocabulary":17,"volume":143.061,"operands":{"distinct":15,"total":20,"identifiers":["assert","ifError","err","ok","startsWith","req","file","path","env","uploadDir","strictEqual","util","fileSize","1778","done"]},"operators":{"distinct":2,"total":15,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":6,"physical":6},"errors":[],"lineEnd":57,"lineStart":52,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["makeStandardEnv","err","env"]},"operators":{"distinct":2,"total":2,"identifiers":["()","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":14},"errors":[],"lineEnd":74,"lineStart":61,"name":"<anon method-7>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":22.222,"halstead":{"bugs":0.057,"difficulty":5.5,"effort":942.152,"length":39,"time":52.342,"vocabulary":21,"volume":171.3,"operands":{"distinct":14,"total":22,"identifiers":["err","done","parser","env","upload","single","\"small0\"","form","append","util","file","\"small0.dat\"","submitForm","req"]},"operators":{"distinct":7,"total":17,"identifiers":["if","return","()","var","=",".","function"]}},"paramCount":2,"sloc":{"logical":9,"physical":12},"errors":[],"lineEnd":73,"lineStart":62,"name":"<anon method-8>","paramNames":["err","env"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.111,"effort":65.345,"length":17,"time":3.63,"vocabulary":11,"volume":58.81,"operands":{"distinct":9,"total":10,"identifiers":["assert","ifError","err","strictEqual","req","file","filename","\"small0small0.dat\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":72,"lineStart":68,"name":"<anon method-9>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["makeStandardEnv","err","env"]},"operators":{"distinct":2,"total":2,"identifiers":["()","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":14},"errors":[],"lineEnd":89,"lineStart":76,"name":"<anon method-10>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":22.222,"halstead":{"bugs":0.057,"difficulty":5.5,"effort":942.152,"length":39,"time":52.342,"vocabulary":21,"volume":171.3,"operands":{"distinct":14,"total":22,"identifiers":["err","done","parser","env","upload","single","\"tiny0\"","form","append","util","file","\"tiny0.dat\"","submitForm","req"]},"operators":{"distinct":7,"total":17,"identifiers":["if","return","()","var","=",".","function"]}},"paramCount":2,"sloc":{"logical":9,"physical":12},"errors":[],"lineEnd":88,"lineStart":77,"name":"<anon method-11>","paramNames":["err","env"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.111,"effort":65.345,"length":17,"time":3.63,"vocabulary":11,"volume":58.81,"operands":{"distinct":9,"total":10,"identifiers":["assert","ifError","err","strictEqual","req","file","filename","\"tiny0tiny0.dat\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":87,"lineStart":83,"name":"<anon method-12>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["makeStandardEnv","err","env"]},"operators":{"distinct":2,"total":2,"identifiers":["()","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":17},"errors":[],"lineEnd":107,"lineStart":91,"name":"<anon method-13>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":18.182,"halstead":{"bugs":0.078,"difficulty":6.563,"effort":1543.666,"length":52,"time":85.759,"vocabulary":23,"volume":235.225,"operands":{"distinct":16,"total":30,"identifiers":["err","done","parser","env","upload","array","\"themFiles\"","2","form","append","util","file","\"small0.dat\"","\"small1.dat\"","submitForm","req"]},"operators":{"distinct":7,"total":22,"identifiers":["if","return","()","var","=",".","function"]}},"paramCount":2,"sloc":{"logical":11,"physical":15},"errors":[],"lineEnd":106,"lineStart":92,"name":"<anon method-14>","paramNames":["err","env"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.056,"difficulty":2.571,"effort":430.935,"length":41,"time":23.941,"vocabulary":17,"volume":167.586,"operands":{"distinct":14,"total":24,"identifiers":["assert","ifError","err","strictEqual","req","files","length","2","0","filename","\"themFilessmall0.dat\"","1","\"themFilessmall1.dat\"","done"]},"operators":{"distinct":3,"total":17,"identifiers":["()",".","[]"]}},"paramCount":2,"sloc":{"logical":5,"physical":7},"errors":[],"lineEnd":105,"lineStart":99,"name":"<anon method-15>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.882,"halstead":{"bugs":0.113,"difficulty":6.909,"effort":2339.249,"length":69,"time":129.958,"vocabulary":30,"volume":338.575,"operands":{"distinct":22,"total":38,"identifiers":["storage","multer","diskStorage","destination","req","file","cb","filename","generateFilename","form","FormData","upload","parser","array","\"themFiles\"","2","append","util","\"small0.dat\"","\"small1.dat\"","submitForm","err"]},"operators":{"distinct":8,"total":31,"identifiers":["var","=","()",".","{}",":","function","new"]}},"paramCount":1,"sloc":{"logical":17,"physical":28},"errors":[],"lineEnd":136,"lineStart":109,"name":"<anon method-16>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.012,"difficulty":1.5,"effort":52.304,"length":11,"time":2.906,"vocabulary":9,"volume":34.869,"operands":{"distinct":6,"total":6,"identifiers":["temp","template","\"testforme-%s\"","mkdir","err","uploadDir"]},"operators":{"distinct":3,"total":5,"identifiers":["()",".","function"]}},"paramCount":3,"sloc":{"logical":3,"physical":8},"errors":[],"lineEnd":118,"lineStart":111,"name":"<anon method-17>","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":40,"halstead":{"bugs":0.017,"difficulty":3,"effort":149.487,"length":15,"time":8.305,"vocabulary":10,"volume":49.829,"operands":{"distinct":6,"total":9,"identifiers":["err","cb","cleanup","push","uploadDir","null"]},"operators":{"distinct":4,"total":6,"identifiers":["if","return","()","."]}},"paramCount":2,"sloc":{"logical":5,"physical":6},"errors":[],"lineEnd":117,"lineStart":112,"name":"<anon method-18>","paramNames":["err","uploadDir"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.072,"difficulty":3.733,"effort":808.805,"length":51,"time":44.934,"vocabulary":19,"volume":216.644,"operands":{"distinct":15,"total":28,"identifiers":["assert","ifError","err","strictEqual","req","files","length","2","ok","0","path","indexOf","\"/testforme-\"","1","done"]},"operators":{"distinct":4,"total":23,"identifiers":["()",".",">=","[]"]}},"paramCount":2,"sloc":{"logical":7,"physical":7},"errors":[],"lineEnd":135,"lineStart":129,"name":"<anon method-19>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.304,"cyclomaticDensity":0.887,"halstead":{"bugs":0.058,"difficulty":1.42,"effort":5705.198,"length":26.652,"time":316.955,"vocabulary":4.087,"volume":174.694,"operands":{"distinct":3.435,"total":14.957},"operators":{"distinct":0.652,"total":11.696}},"paramCount":1.565,"sloc":{"logical":6.391,"physical":6}},"methodAverage":{"cyclomatic":1.318,"cyclomaticDensity":34.99,"halstead":{"bugs":0.035,"difficulty":3.048,"effort":488.513,"length":25.636,"time":27.14,"vocabulary":13.727,"volume":105.728,"operands":{"distinct":9.591,"total":14.409},"operators":{"distinct":4.136,"total":11.227}},"paramCount":1.636,"sloc":{"logical":5.955,"physical":15.727}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/file-ordering.js","testCases":1,"smells":15,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  40 |     util.submitForm(parser, form, function (err, req) {\n  41 |       assert.ifError(err)\n> 42 |       assert.strictEqual(req.files.length, 2)\n     |      ^ Assertion Roulette\n  43 |       assert.strictEqual(req.files[0].originalname, 'small0.dat')\n  44 |       assert.strictEqual(req.files[1].originalname, 'small1.dat')\n  45 |       done()","start":{"column":6,"line":42}},{"frame":"  41 |       assert.ifError(err)\n  42 |       assert.strictEqual(req.files.length, 2)\n> 43 |       assert.strictEqual(req.files[0].originalname, 'small0.dat')\n     |      ^ Assertion Roulette\n  44 |       assert.strictEqual(req.files[1].originalname, 'small1.dat')\n  45 |       done()\n  46 |     })","start":{"column":6,"line":43}},{"frame":"  42 |       assert.strictEqual(req.files.length, 2)\n  43 |       assert.strictEqual(req.files[0].originalname, 'small0.dat')\n> 44 |       assert.strictEqual(req.files[1].originalname, 'small1.dat')\n     |      ^ Assertion Roulette\n  45 |       done()\n  46 |     })\n  47 |   })","start":{"column":6,"line":44}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  21 |\n  22 |       _handleFile.call(this, req, file, function (err, info) {\n> 23 |         if (err) return cb(err)\n     |        ^ Conditional Test Logic\n  24 |\n  25 |         calls[id].cb = cb\n  26 |         calls[id].info = info","start":{"line":23,"column":8,"index":646}},{"frame":"  26 |         calls[id].info = info\n  27 |\n> 28 |         if (--pending === 0) {\n     |        ^ Conditional Test Logic\n  29 |           calls[1].cb(null, calls[1].info)\n  30 |           calls[0].cb(null, calls[0].info)\n  31 |         }","start":{"line":28,"column":8,"index":736}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   9 | describe('File ordering', function () {\n  10 |   it('should present files in same order as they came', function (done) {\n> 11 |     var storage = multer.memoryStorage()\n     |    ^ Global Variable\n  12 |     var upload = multer({ storage: storage })\n  13 |     var parser = upload.array('themFiles', 2)\n  14 |","start":{"line":11,"column":4,"index":269}},{"frame":"  10 |   it('should present files in same order as they came', function (done) {\n  11 |     var storage = multer.memoryStorage()\n> 12 |     var upload = multer({ storage: storage })\n     |    ^ Global Variable\n  13 |     var parser = upload.array('themFiles', 2)\n  14 |\n  15 |     var i = 0","start":{"line":12,"column":4,"index":310}},{"frame":"  11 |     var storage = multer.memoryStorage()\n  12 |     var upload = multer({ storage: storage })\n> 13 |     var parser = upload.array('themFiles', 2)\n     |    ^ Global Variable\n  14 |\n  15 |     var i = 0\n  16 |     var calls = [{}, {}]","start":{"line":13,"column":4,"index":356}},{"frame":"  13 |     var parser = upload.array('themFiles', 2)\n  14 |\n> 15 |     var i = 0\n     |    ^ Global Variable\n  16 |     var calls = [{}, {}]\n  17 |     var pending = 2\n  18 |     var _handleFile = storage._handleFile","start":{"line":15,"column":4,"index":403}},{"frame":"  14 |\n  15 |     var i = 0\n> 16 |     var calls = [{}, {}]\n     |    ^ Global Variable\n  17 |     var pending = 2\n  18 |     var _handleFile = storage._handleFile\n  19 |     storage._handleFile = function (req, file, cb) {","start":{"line":16,"column":4,"index":417}},{"frame":"  15 |     var i = 0\n  16 |     var calls = [{}, {}]\n> 17 |     var pending = 2\n     |    ^ Global Variable\n  18 |     var _handleFile = storage._handleFile\n  19 |     storage._handleFile = function (req, file, cb) {\n  20 |       var id = (i++)","start":{"line":17,"column":4,"index":442}},{"frame":"  16 |     var calls = [{}, {}]\n  17 |     var pending = 2\n> 18 |     var _handleFile = storage._handleFile\n     |    ^ Global Variable\n  19 |     storage._handleFile = function (req, file, cb) {\n  20 |       var id = (i++)\n  21 |","start":{"line":18,"column":4,"index":462}},{"frame":"  18 |     var _handleFile = storage._handleFile\n  19 |     storage._handleFile = function (req, file, cb) {\n> 20 |       var id = (i++)\n     |      ^ Global Variable\n  21 |\n  22 |       _handleFile.call(this, req, file, function (err, info) {\n  23 |         if (err) return cb(err)","start":{"line":20,"column":6,"index":559}},{"frame":"  33 |     }\n  34 |\n> 35 |     var form = new FormData()\n     |    ^ Global Variable\n  36 |\n  37 |     form.append('themFiles', util.file('small0.dat'))\n  38 |     form.append('themFiles', util.file('small1.dat'))","start":{"line":35,"column":4,"index":875}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  40 |     util.submitForm(parser, form, function (err, req) {\n  41 |       assert.ifError(err)\n> 42 |       assert.strictEqual(req.files.length, 2)\n     |                                           ^ Magic Number\n  43 |       assert.strictEqual(req.files[0].originalname, 'small0.dat')\n  44 |       assert.strictEqual(req.files[1].originalname, 'small1.dat')\n  45 |       done()","start":{"line":42,"column":43,"index":1136}}]}],"metrics":{"aggregate":{"cyclomatic":8,"cyclomaticDensity":16.667,"halstead":{"bugs":0.447,"difficulty":21.511,"effort":28832.345,"length":226,"time":1601.797,"vocabulary":61,"volume":1340.347,"operands":{"distinct":45,"total":121,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","describe","\"File ordering\"","it","\"should present files in same order as they came\"","done","storage","memoryStorage","upload","parser","array","\"themFiles\"","2","i","0","calls","pending","_handleFile","req","file","cb","id","call","err","info","1","null","form","append","\"small0.dat\"","\"small1.dat\"","submitForm","ifError","strictEqual","files","length","originalname"]},"operators":{"distinct":16,"total":105,"identifiers":["var","=","()","function",".","{}",":","[]",",","++ (postfix)","this","if","return","===","-- (prefix)","new"]}},"paramCount":8,"sloc":{"logical":48,"physical":49}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":49,"lineStart":1,"maintainability":108.032,"methods":[{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["it","\"should present files in same order as they came\"","done"]},"operators":{"distinct":2,"total":2,"identifiers":["()","function"]}},"paramCount":0,"sloc":{"logical":2,"physical":40},"errors":[],"lineEnd":48,"lineStart":9,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5,"halstead":{"bugs":0.149,"difficulty":9.375,"effort":4197.157,"length":88,"time":233.175,"vocabulary":34,"volume":447.697,"operands":{"distinct":24,"total":45,"identifiers":["storage","multer","memoryStorage","upload","parser","array","\"themFiles\"","2","i","0","calls","pending","_handleFile","req","file","cb","form","FormData","append","util","\"small0.dat\"","\"small1.dat\"","submitForm","err"]},"operators":{"distinct":10,"total":43,"identifiers":["var","=","()",".","{}",":","[]",",","function","new"]}},"paramCount":1,"sloc":{"logical":20,"physical":38},"errors":[],"lineEnd":47,"lineStart":10,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":3.5,"effort":205.112,"length":15,"time":11.395,"vocabulary":15,"volume":58.603,"operands":{"distinct":8,"total":8,"identifiers":["id","i","_handleFile","call","req","file","err","info"]},"operators":{"distinct":7,"total":7,"identifiers":["var","=","++ (postfix)","()",".","this","function"]}},"paramCount":3,"sloc":{"logical":3,"physical":15},"errors":[],"lineEnd":33,"lineStart":19,"name":"<anon method-3>","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":3,"cyclomaticDensity":37.5,"halstead":{"bugs":0.067,"difficulty":12,"effort":2403.428,"length":49,"time":133.524,"vocabulary":17,"volume":200.286,"operands":{"distinct":9,"total":27,"identifiers":["err","cb","calls","id","info","pending","0","1","null"]},"operators":{"distinct":8,"total":22,"identifiers":["if","return","()","=",".","[]","===","-- (prefix)"]}},"paramCount":2,"sloc":{"logical":8,"physical":11},"errors":[],"lineEnd":32,"lineStart":22,"name":"<anon method-4>","paramNames":["err","info"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.056,"difficulty":2.571,"effort":430.935,"length":41,"time":23.941,"vocabulary":17,"volume":167.586,"operands":{"distinct":14,"total":24,"identifiers":["assert","ifError","err","strictEqual","req","files","length","2","0","originalname","\"small0.dat\"","1","\"small1.dat\"","done"]},"operators":{"distinct":3,"total":17,"identifiers":["()",".","[]"]}},"paramCount":2,"sloc":{"logical":5,"physical":7},"errors":[],"lineEnd":46,"lineStart":40,"name":"<anon method-5>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.333,"cyclomaticDensity":2.778,"halstead":{"bugs":0.074,"difficulty":3.585,"effort":4805.391,"length":37.667,"time":266.966,"vocabulary":10.167,"volume":223.391,"operands":{"distinct":7.5,"total":20.167},"operators":{"distinct":2.667,"total":17.5}},"paramCount":1.333,"sloc":{"logical":8,"physical":8.167}},"methodAverage":{"cyclomatic":1.4,"cyclomaticDensity":29.167,"halstead":{"bugs":0.059,"difficulty":5.689,"effort":1449.648,"length":39.6,"time":80.536,"vocabulary":17.6,"volume":177.156,"operands":{"distinct":11.6,"total":21.4},"operators":{"distinct":6,"total":18.2}},"paramCount":1.6,"sloc":{"logical":7.6,"physical":22.2}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/file-filter.js","testCases":2,"smells":13,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  33 |     util.submitForm(parser, form, function (err, req) {\n  34 |       assert.ifError(err)\n> 35 |       assert.strictEqual(req.files.notme, undefined)\n     |      ^ Assertion Roulette\n  36 |       assert.strictEqual(req.files.butme[0].fieldname, 'butme')\n  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n  38 |       assert.strictEqual(req.files.butme[0].size, 7)","start":{"column":6,"line":35}},{"frame":"  34 |       assert.ifError(err)\n  35 |       assert.strictEqual(req.files.notme, undefined)\n> 36 |       assert.strictEqual(req.files.butme[0].fieldname, 'butme')\n     |      ^ Assertion Roulette\n  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n  38 |       assert.strictEqual(req.files.butme[0].size, 7)\n  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)","start":{"column":6,"line":36}},{"frame":"  35 |       assert.strictEqual(req.files.notme, undefined)\n  36 |       assert.strictEqual(req.files.butme[0].fieldname, 'butme')\n> 37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n     |      ^ Assertion Roulette\n  38 |       assert.strictEqual(req.files.butme[0].size, 7)\n  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)\n  40 |       done()","start":{"column":6,"line":37}},{"frame":"  36 |       assert.strictEqual(req.files.butme[0].fieldname, 'butme')\n  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n> 38 |       assert.strictEqual(req.files.butme[0].size, 7)\n     |      ^ Assertion Roulette\n  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)\n  40 |       done()\n  41 |     })","start":{"column":6,"line":38}},{"frame":"  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n  38 |       assert.strictEqual(req.files.butme[0].size, 7)\n> 39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)\n     |      ^ Assertion Roulette\n  40 |       done()\n  41 |     })\n  42 |   })","start":{"column":6,"line":39}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  21 | describe('File Filter', function () {\n  22 |   it('should skip some files', function (done) {\n> 23 |     var form = new FormData()\n     |    ^ Global Variable\n  24 |     var upload = withFilter(skipSpecificFile)\n  25 |     var parser = upload.fields([\n  26 |       { name: 'notme', maxCount: 1 },","start":{"line":23,"column":4,"index":486}},{"frame":"  22 |   it('should skip some files', function (done) {\n  23 |     var form = new FormData()\n> 24 |     var upload = withFilter(skipSpecificFile)\n     |    ^ Global Variable\n  25 |     var parser = upload.fields([\n  26 |       { name: 'notme', maxCount: 1 },\n  27 |       { name: 'butme', maxCount: 1 }","start":{"line":24,"column":4,"index":516}},{"frame":"  23 |     var form = new FormData()\n  24 |     var upload = withFilter(skipSpecificFile)\n> 25 |     var parser = upload.fields([\n     |    ^ Global Variable\n  26 |       { name: 'notme', maxCount: 1 },\n  27 |       { name: 'butme', maxCount: 1 }\n  28 |     ])","start":{"line":25,"column":4,"index":562}},{"frame":"  43 |\n  44 |   it('should report errors from fileFilter', function (done) {\n> 45 |     var form = new FormData()\n     |    ^ Global Variable\n  46 |     var upload = withFilter(reportFakeError)\n  47 |     var parser = upload.single('test')\n  48 |","start":{"line":45,"column":4,"index":1251}},{"frame":"  44 |   it('should report errors from fileFilter', function (done) {\n  45 |     var form = new FormData()\n> 46 |     var upload = withFilter(reportFakeError)\n     |    ^ Global Variable\n  47 |     var parser = upload.single('test')\n  48 |\n  49 |     form.append('test', util.file('tiny0.dat'))","start":{"line":46,"column":4,"index":1281}},{"frame":"  45 |     var form = new FormData()\n  46 |     var upload = withFilter(reportFakeError)\n> 47 |     var parser = upload.single('test')\n     |    ^ Global Variable\n  48 |\n  49 |     form.append('test', util.file('tiny0.dat'))\n  50 |","start":{"line":47,"column":4,"index":1326}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  36 |       assert.strictEqual(req.files.butme[0].fieldname, 'butme')\n  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n> 38 |       assert.strictEqual(req.files.butme[0].size, 7)\n     |                                                  ^ Magic Number\n  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)\n  40 |       done()\n  41 |     })","start":{"line":38,"column":50,"index":1093}},{"frame":"  37 |       assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')\n  38 |       assert.strictEqual(req.files.butme[0].size, 7)\n> 39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)\n     |                                                           ^ Magic Number\n  40 |       done()\n  41 |     })\n  42 |   })","start":{"line":39,"column":59,"index":1155}}]}],"metrics":{"aggregate":{"cyclomatic":9,"cyclomaticDensity":16.364,"halstead":{"bugs":0.52,"difficulty":15.818,"effort":24660.307,"length":257,"time":1370.017,"vocabulary":67,"volume":1558.985,"operands":{"distinct":55,"total":145,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","withFilter","fileFilter","skipSpecificFile","req","file","cb","null","fieldname","\"notme\"","reportFakeError","Error","\"Fake error\"","describe","\"File Filter\"","it","\"should skip some files\"","done","form","upload","parser","fields","name","maxCount","1","\"butme\"","append","\"tiny0.dat\"","\"tiny1.dat\"","submitForm","err","ifError","strictEqual","files","notme","undefined","butme","0","originalname","size","7","buffer","length","\"should report errors from fileFilter\"","single","\"test\"","message"]},"operators":{"distinct":12,"total":112,"identifiers":["var","=","()","function","return","{}",":","!==",".","new","[]",","]}},"paramCount":13,"sloc":{"logical":55,"physical":57}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":57,"lineStart":1,"maintainability":114.604,"methods":[{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.006,"difficulty":3,"effort":54.284,"length":7,"time":3.016,"vocabulary":6,"volume":18.095,"operands":{"distinct":2,"total":3,"identifiers":["multer","fileFilter"]},"operators":{"distinct":4,"total":4,"identifiers":["return","()","{}",":"]}},"paramCount":1,"sloc":{"logical":3,"physical":3},"errors":[],"lineEnd":11,"lineStart":9,"name":"withFilter","paramNames":["fileFilter"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.008,"difficulty":1.5,"effort":36,"length":8,"time":2,"vocabulary":8,"volume":24,"operands":{"distinct":5,"total":5,"identifiers":["cb","null","file","fieldname","\"notme\""]},"operators":{"distinct":3,"total":3,"identifiers":["()","!==","."]}},"paramCount":3,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":15,"lineStart":13,"name":"skipSpecificFile","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["cb","Error","\"Fake error\""]},"operators":{"distinct":2,"total":2,"identifiers":["()","new"]}},"paramCount":3,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":19,"lineStart":17,"name":"reportFakeError","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.009,"difficulty":1.5,"effort":38.774,"length":10,"time":2.154,"vocabulary":6,"volume":25.85,"operands":{"distinct":4,"total":6,"identifiers":["it","\"should skip some files\"","done","\"should report errors from fileFilter\""]},"operators":{"distinct":2,"total":4,"identifiers":["()","function"]}},"paramCount":0,"sloc":{"logical":4,"physical":36},"errors":[],"lineEnd":56,"lineStart":21,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.667,"halstead":{"bugs":0.103,"difficulty":8.5,"effort":2627.64,"length":63,"time":145.98,"vocabulary":30,"volume":309.134,"operands":{"distinct":20,"total":34,"identifiers":["form","FormData","upload","withFilter","skipSpecificFile","parser","fields","name","\"notme\"","maxCount","1","\"butme\"","append","util","file","\"tiny0.dat\"","\"tiny1.dat\"","submitForm","err","req"]},"operators":{"distinct":10,"total":29,"identifiers":["var","=","new","()",".","[]",",","{}",":","function"]}},"paramCount":1,"sloc":{"logical":15,"physical":21},"errors":[],"lineEnd":42,"lineStart":22,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.111,"difficulty":3.395,"effort":1135.395,"length":75,"time":63.077,"vocabulary":22,"volume":334.457,"operands":{"distinct":19,"total":43,"identifiers":["assert","ifError","err","strictEqual","req","files","notme","undefined","butme","0","fieldname","\"butme\"","originalname","\"tiny1.dat\"","size","7","buffer","length","done"]},"operators":{"distinct":3,"total":32,"identifiers":["()",".","[]"]}},"paramCount":2,"sloc":{"logical":7,"physical":9},"errors":[],"lineEnd":41,"lineStart":33,"name":"<anon method-3>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.056,"difficulty":4.2,"effort":701.014,"length":38,"time":38.945,"vocabulary":21,"volume":166.908,"operands":{"distinct":15,"total":21,"identifiers":["form","FormData","upload","withFilter","reportFakeError","parser","single","\"test\"","append","util","file","\"tiny0.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":17,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":9,"physical":12},"errors":[],"lineEnd":55,"lineStart":44,"name":"<anon method-4>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","message","\"Fake error\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":54,"lineStart":51,"name":"<anon method-5>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":1.818,"halstead":{"bugs":0.058,"difficulty":1.758,"effort":2740.034,"length":28.556,"time":152.224,"vocabulary":7.444,"volume":173.221,"operands":{"distinct":6.111,"total":16.111},"operators":{"distinct":1.333,"total":12.444}},"paramCount":1.444,"sloc":{"logical":6.111,"physical":6.333}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":42.55,"halstead":{"bugs":0.038,"difficulty":3.012,"effort":579.34,"length":27,"time":32.186,"vocabulary":13.25,"volume":115.007,"operands":{"distinct":9.25,"total":15.125},"operators":{"distinct":4,"total":11.875}},"paramCount":1.625,"sloc":{"logical":5.25,"physical":11.375}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/fields.js","testCases":5,"smells":11,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  74 |     parser(req, null, function (err) {\n  75 |       assert.ifError(err)\n> 76 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)\n     |      ^ Assertion Roulette\n  77 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)\n  78 |       done()\n  79 |     })","start":{"column":6,"line":76}},{"frame":"  75 |       assert.ifError(err)\n  76 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)\n> 77 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)\n     |      ^ Assertion Roulette\n  78 |       done()\n  79 |     })\n  80 |   })","start":{"column":6,"line":77}},{"frame":"  92 |     parser(req, null, function (err) {\n  93 |       assert.ifError(err)\n> 94 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)\n     |      ^ Assertion Roulette\n  95 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)\n  96 |       done()\n  97 |     })","start":{"column":6,"line":94}},{"frame":"  93 |       assert.ifError(err)\n  94 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)\n> 95 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)\n     |      ^ Assertion Roulette\n  96 |       done()\n  97 |     })\n  98 |   })","start":{"column":6,"line":95}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  11 |\n  12 | describe('Fields', function () {\n> 13 |   var parser\n     |  ^ Global Variable\n  14 |\n  15 |   before(function () {\n  16 |     parser = multer().fields([])","start":{"line":13,"column":2,"index":304}},{"frame":"  18 |\n  19 |   it('should process multiple fields', function (done) {\n> 20 |     var form = new FormData()\n     |    ^ Global Variable\n  21 |\n  22 |     form.append('name', 'Multer')\n  23 |     form.append('key', 'value')","start":{"line":20,"column":4,"index":439}},{"frame":"  36 |\n  37 |   it('should process empty fields', function (done) {\n> 38 |     var form = new FormData()\n     |    ^ Global Variable\n  39 |\n  40 |     form.append('name', 'Multer')\n  41 |     form.append('key', '')","start":{"line":38,"column":4,"index":839}},{"frame":"  63 |\n  64 |   it('should not process non-multipart POST request', function (done) {\n> 65 |     var req = new stream.PassThrough()\n     |    ^ Global Variable\n  66 |\n  67 |     req.end('name=Multer')\n  68 |     req.method = 'POST'","start":{"line":65,"column":4,"index":1589}},{"frame":"  81 |\n  82 |   it('should not process non-multipart GET request', function (done) {\n> 83 |     var req = new stream.PassThrough()\n     |    ^ Global Variable\n  84 |\n  85 |     req.end('name=Multer')\n  86 |     req.method = 'GET'","start":{"line":83,"column":4,"index":2122}},{"frame":"  100 |   testData.forEach(function (test) {\n  101 |     it('should handle ' + test.name, function (done) {\n> 102 |       var form = new FormData()\n      |      ^ Global Variable\n  103 |\n  104 |       test.fields.forEach(function (field) {\n  105 |         form.append(field.key, field.value)","start":{"line":102,"column":6,"index":2677}},{"frame":"  115 |\n  116 |   it('should convert arrays into objects', function (done) {\n> 117 |     var form = new FormData()\n      |    ^ Global Variable\n  118 |\n  119 |     form.append('obj[0]', 'a')\n  120 |     form.append('obj[2]', 'c')","start":{"line":117,"column":4,"index":3042}}]}],"metrics":{"aggregate":{"cyclomatic":17,"cyclomaticDensity":13.821,"halstead":{"bugs":1.138,"difficulty":18.563,"effort":63374.578,"length":515,"time":3520.81,"vocabulary":99,"volume":3414.119,"operands":{"distinct":88,"total":297,"identifiers":["assert","require","\"assert\"","deepEqual","\"deep-equal\"","stream","\"stream\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","testData","\"testdata-w3c-json-form\"","describe","\"Fields\"","parser","before","fields","it","\"should process multiple fields\"","done","form","append","\"name\"","\"Multer\"","\"key\"","\"value\"","\"abc\"","\"xyz\"","submitForm","err","req","ifError","body","name","key","abc","\"should process empty fields\"","\"\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","checkboxfull","checkboxhalfempty","checkboxempty","\"should not process non-multipart POST request\"","PassThrough","end","\"name=Multer\"","method","\"POST\"","headers","\"content-type\"","\"application/x-www-form-urlencoded\"","\"content-length\"","11","null","strictEqual","Object","prototype","hasOwnProperty","call","\"body\"","false","\"files\"","\"should not process non-multipart GET request\"","\"GET\"","forEach","test","\"should handle \"","field","value","expected","\"should convert arrays into objects\"","\"obj[0]\"","\"a\"","\"obj[2]\"","\"c\"","\"obj[x]\"","\"yz\"","obj","0","2","x"]},"operators":{"distinct":11,"total":218,"identifiers":["var","=","()","function",".","[]","new","{}",":",",","+"]}},"paramCount":18,"sloc":{"logical":123,"physical":136}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":136,"lineStart":1,"maintainability":110.816,"methods":[{"cyclomatic":1,"cyclomaticDensity":6.667,"halstead":{"bugs":0.048,"difficulty":3.333,"effort":480,"length":36,"time":26.667,"vocabulary":16,"volume":144,"operands":{"distinct":12,"total":20,"identifiers":["parser","before","it","\"should process multiple fields\"","done","\"should process empty fields\"","\"should not process non-multipart POST request\"","\"should not process non-multipart GET request\"","testData","forEach","test","\"should convert arrays into objects\""]},"operators":{"distinct":4,"total":16,"identifiers":["var","()","function","."]}},"paramCount":0,"sloc":{"logical":15,"physical":124},"errors":[],"lineEnd":135,"lineStart":12,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.007,"difficulty":2,"effort":44.918,"length":8,"time":2.495,"vocabulary":7,"volume":22.459,"operands":{"distinct":3,"total":3,"identifiers":["parser","multer","fields"]},"operators":{"distinct":4,"total":5,"identifiers":["=","()",".","[]"]}},"paramCount":0,"sloc":{"logical":3,"physical":3},"errors":[],"lineEnd":17,"lineStart":15,"name":"<anon method-2>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.046,"difficulty":4.286,"effort":592.722,"length":32,"time":32.929,"vocabulary":20,"volume":138.302,"operands":{"distinct":14,"total":20,"identifiers":["form","FormData","append","\"name\"","\"Multer\"","\"key\"","\"value\"","\"abc\"","\"xyz\"","util","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":12,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":6,"physical":17},"errors":[],"lineEnd":35,"lineStart":19,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.033,"difficulty":2.154,"effort":211.29,"length":24,"time":11.738,"vocabulary":17,"volume":98.099,"operands":{"distinct":13,"total":14,"identifiers":["assert","ifError","err","deepEqual","req","body","name","\"Multer\"","key","\"value\"","abc","\"xyz\"","done"]},"operators":{"distinct":4,"total":10,"identifiers":["()",".","{}",":"]}},"paramCount":2,"sloc":{"logical":7,"physical":9},"errors":[],"lineEnd":34,"lineStart":26,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":8.333,"halstead":{"bugs":0.104,"difficulty":7.333,"effort":2286.368,"length":68,"time":127.02,"vocabulary":24,"volume":311.777,"operands":{"distinct":18,"total":44,"identifiers":["form","FormData","append","\"name\"","\"Multer\"","\"key\"","\"\"","\"abc\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","util","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":24,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":12,"physical":26},"errors":[],"lineEnd":62,"lineStart":37,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":10,"halstead":{"bugs":0.063,"difficulty":4.059,"effort":771.134,"length":42,"time":42.841,"vocabulary":23,"volume":189.99,"operands":{"distinct":17,"total":23,"identifiers":["assert","ifError","err","deepEqual","req","body","name","\"Multer\"","key","\"\"","abc","checkboxfull","\"cb1\"","\"cb2\"","checkboxhalfempty","checkboxempty","done"]},"operators":{"distinct":6,"total":19,"identifiers":["()",".","{}",":","[]",","]}},"paramCount":2,"sloc":{"logical":10,"physical":12},"errors":[],"lineEnd":61,"lineStart":50,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.051,"difficulty":5.067,"effort":779.259,"length":34,"time":43.292,"vocabulary":23,"volume":153.801,"operands":{"distinct":15,"total":19,"identifiers":["req","stream","PassThrough","end","\"name=Multer\"","method","\"POST\"","headers","\"content-type\"","\"application/x-www-form-urlencoded\"","\"content-length\"","11","parser","null","err"]},"operators":{"distinct":8,"total":15,"identifiers":["var","=","new",".","()","{}",":","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":17},"errors":[],"lineEnd":80,"lineStart":64,"name":"<anon method-7>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.048,"difficulty":1.692,"effort":244.631,"length":37,"time":13.591,"vocabulary":15,"volume":144.555,"operands":{"distinct":13,"total":22,"identifiers":["assert","ifError","err","strictEqual","Object","prototype","hasOwnProperty","call","req","\"body\"","false","\"files\"","done"]},"operators":{"distinct":2,"total":15,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":6,"physical":6},"errors":[],"lineEnd":79,"lineStart":74,"name":"<anon method-8>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.051,"difficulty":5.067,"effort":779.259,"length":34,"time":43.292,"vocabulary":23,"volume":153.801,"operands":{"distinct":15,"total":19,"identifiers":["req","stream","PassThrough","end","\"name=Multer\"","method","\"GET\"","headers","\"content-type\"","\"application/x-www-form-urlencoded\"","\"content-length\"","11","parser","null","err"]},"operators":{"distinct":8,"total":15,"identifiers":["var","=","new",".","()","{}",":","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":17},"errors":[],"lineEnd":98,"lineStart":82,"name":"<anon method-9>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.048,"difficulty":1.692,"effort":244.631,"length":37,"time":13.591,"vocabulary":15,"volume":144.555,"operands":{"distinct":13,"total":22,"identifiers":["assert","ifError","err","strictEqual","Object","prototype","hasOwnProperty","call","req","\"body\"","false","\"files\"","done"]},"operators":{"distinct":2,"total":15,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":6,"physical":6},"errors":[],"lineEnd":97,"lineStart":92,"name":"<anon method-10>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":2,"effort":57.059,"length":9,"time":3.17,"vocabulary":9,"volume":28.529,"operands":{"distinct":5,"total":5,"identifiers":["it","\"should handle \"","test","name","done"]},"operators":{"distinct":4,"total":4,"identifiers":["()","+",".","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":15},"errors":[],"lineEnd":114,"lineStart":100,"name":"<anon method-11>","paramNames":["test"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.03,"difficulty":3.273,"effort":294.297,"length":22,"time":16.35,"vocabulary":17,"volume":89.924,"operands":{"distinct":11,"total":12,"identifiers":["form","FormData","test","fields","forEach","field","util","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":10,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":5,"physical":13},"errors":[],"lineEnd":113,"lineStart":101,"name":"<anon method-12>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.009,"difficulty":1.2,"effort":33.688,"length":10,"time":1.872,"vocabulary":7,"volume":28.074,"operands":{"distinct":5,"total":6,"identifiers":["form","append","field","key","value"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":106,"lineStart":104,"name":"<anon method-13>","paramNames":["field"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.02,"difficulty":1.111,"effort":65.345,"length":17,"time":3.63,"vocabulary":11,"volume":58.81,"operands":{"distinct":9,"total":10,"identifiers":["assert","ifError","err","deepEqual","req","body","test","expected","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":4,"physical":5},"errors":[],"lineEnd":112,"lineStart":108,"name":"<anon method-14>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.046,"difficulty":4.286,"effort":592.722,"length":32,"time":32.929,"vocabulary":20,"volume":138.302,"operands":{"distinct":14,"total":20,"identifiers":["form","FormData","append","\"obj[0]\"","\"a\"","\"obj[2]\"","\"c\"","\"obj[x]\"","\"yz\"","util","submitForm","parser","err","req"]},"operators":{"distinct":6,"total":12,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":6,"physical":19},"errors":[],"lineEnd":134,"lineStart":116,"name":"<anon method-15>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.038,"difficulty":2.143,"effort":241.26,"length":27,"time":13.403,"vocabulary":18,"volume":112.588,"operands":{"distinct":14,"total":15,"identifiers":["assert","ifError","err","deepEqual","req","body","obj","0","\"a\"","2","\"c\"","x","\"yz\"","done"]},"operators":{"distinct":4,"total":12,"identifiers":["()",".","{}",":"]}},"paramCount":2,"sloc":{"logical":8,"physical":11},"errors":[],"lineEnd":133,"lineStart":123,"name":"<anon method-16>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":0.813,"halstead":{"bugs":0.067,"difficulty":1.092,"effort":3727.916,"length":30.294,"time":207.106,"vocabulary":5.824,"volume":200.831,"operands":{"distinct":5.176,"total":17.471},"operators":{"distinct":0.647,"total":12.824}},"paramCount":1.059,"sloc":{"logical":7.235,"physical":8}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":23.237,"halstead":{"bugs":0.041,"difficulty":3.168,"effort":482.411,"length":29.313,"time":26.801,"vocabulary":16.563,"volume":122.348,"operands":{"distinct":11.938,"total":17.125},"operators":{"distinct":4.625,"total":12.188}},"paramCount":1.125,"sloc":{"logical":6.688,"physical":18.938}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/express-integration.js","testCases":5,"smells":57,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  50 |\n  51 |     router.use(function (err, req, res, next) {\n> 52 |       assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')\n     |      ^ Assertion Roulette\n  53 |\n  54 |       errorCalled++\n  55 |       res.status(500).end('ERROR')","start":{"column":6,"line":52}},{"frame":"  60 |       assert.ifError(err)\n  61 |\n> 62 |       assert.strictEqual(routeCalled, 0)\n     |      ^ Assertion Roulette\n  63 |       assert.strictEqual(errorCalled, 1)\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n  65 |       assert.strictEqual(res.statusCode, 500)","start":{"column":6,"line":62}},{"frame":"  61 |\n  62 |       assert.strictEqual(routeCalled, 0)\n> 63 |       assert.strictEqual(errorCalled, 1)\n     |      ^ Assertion Roulette\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n  65 |       assert.strictEqual(res.statusCode, 500)\n  66 |","start":{"column":6,"line":63}},{"frame":"  62 |       assert.strictEqual(routeCalled, 0)\n  63 |       assert.strictEqual(errorCalled, 1)\n> 64 |       assert.strictEqual(body.toString(), 'ERROR')\n     |      ^ Assertion Roulette\n  65 |       assert.strictEqual(res.statusCode, 500)\n  66 |\n  67 |       done()","start":{"column":6,"line":64}},{"frame":"  63 |       assert.strictEqual(errorCalled, 1)\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n> 65 |       assert.strictEqual(res.statusCode, 500)\n     |      ^ Assertion Roulette\n  66 |\n  67 |       done()\n  68 |     })","start":{"column":6,"line":65}},{"frame":"  89 |\n  90 |     router.use(function (err, req, res, next) {\n> 91 |       assert.strictEqual(err.message, 'TEST')\n     |      ^ Assertion Roulette\n  92 |\n  93 |       errorCalled++\n  94 |       res.status(500).end('ERROR')","start":{"column":6,"line":91}},{"frame":"   99 |       assert.ifError(err)\n  100 |\n> 101 |       assert.strictEqual(routeCalled, 0)\n      |      ^ Assertion Roulette\n  102 |       assert.strictEqual(errorCalled, 1)\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n  104 |       assert.strictEqual(res.statusCode, 500)","start":{"column":6,"line":101}},{"frame":"  100 |\n  101 |       assert.strictEqual(routeCalled, 0)\n> 102 |       assert.strictEqual(errorCalled, 1)\n      |      ^ Assertion Roulette\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n  104 |       assert.strictEqual(res.statusCode, 500)\n  105 |","start":{"column":6,"line":102}},{"frame":"  101 |       assert.strictEqual(routeCalled, 0)\n  102 |       assert.strictEqual(errorCalled, 1)\n> 103 |       assert.strictEqual(body.toString(), 'ERROR')\n      |      ^ Assertion Roulette\n  104 |       assert.strictEqual(res.statusCode, 500)\n  105 |\n  106 |       done()","start":{"column":6,"line":103}},{"frame":"  102 |       assert.strictEqual(errorCalled, 1)\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n> 104 |       assert.strictEqual(res.statusCode, 500)\n      |      ^ Assertion Roulette\n  105 |\n  106 |       done()\n  107 |     })","start":{"column":6,"line":104}},{"frame":"  116 |\n  117 |     app.use(function (err, req, res, next) {\n> 118 |       assert.strictEqual(err.message, 'Unexpected end of form')\n      |      ^ Assertion Roulette\n  119 |       res.status(200).end('Correct error')\n  120 |     })\n  121 |","start":{"column":6,"line":118}},{"frame":"  140 |\n  141 |     var req = http.request(options, (res) => {\n> 142 |       assert.strictEqual(res.statusCode, 200)\n      |      ^ Assertion Roulette\n  143 |       done()\n  144 |     })\n  145 |","start":{"column":6,"line":142}},{"frame":"  160 |\n  161 |     app.use(function (err, req, res, next) {\n> 162 |       assert.strictEqual(err.message, 'Malformed part header')\n      |      ^ Assertion Roulette\n  163 |       res.status(200).end('Correct error')\n  164 |     })\n  165 |","start":{"column":6,"line":162}},{"frame":"  186 |\n  187 |     var req = http.request(options, (res) => {\n> 188 |       assert.strictEqual(res.statusCode, 200)\n      |      ^ Assertion Roulette\n  189 |       done()\n  190 |     })\n  191 |","start":{"column":6,"line":188}},{"frame":"  206 |\n  207 |     app.use(function (err, req, res, next) {\n> 208 |       assert.strictEqual(err.message, 'Unexpected end of form')\n      |      ^ Assertion Roulette\n  209 |       res.status(200).end('Correct error')\n  210 |     })\n  211 |","start":{"column":6,"line":208}},{"frame":"  232 |\n  233 |     var req = http.request(options, (res) => {\n> 234 |       assert.strictEqual(res.statusCode, 200)\n      |      ^ Assertion Roulette\n  235 |       done()\n  236 |     })\n  237 |","start":{"column":6,"line":234}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  11 | var concat = require('concat-stream')\n  12 |\n> 13 | var port = 34279\n  14 |\n  15 | describe('Express Integration', function () {\n  16 |   var app","start":{"line":13,"column":0,"index":250}},{"frame":"  14 |\n  15 | describe('Express Integration', function () {\n> 16 |   var app\n     |  ^ Global Variable\n  17 |\n  18 |   before(function (done) {\n  19 |     app = express()","start":{"line":16,"column":2,"index":316}},{"frame":"  22 |\n  23 |   function submitForm (form, path, cb) {\n> 24 |     var req = form.submit('http://localhost:' + port + path)\n     |    ^ Global Variable\n  25 |\n  26 |     req.on('error', cb)\n  27 |     req.on('response', function (res) {","start":{"line":24,"column":4,"index":450}},{"frame":"  34 |\n  35 |   it('should work with express error handling', function (done) {\n> 36 |     var limits = { fileSize: 200 }\n     |    ^ Global Variable\n  37 |     var upload = multer({ limits: limits })\n  38 |     var router = new express.Router()\n  39 |     var form = new FormData()","start":{"line":36,"column":4,"index":782}},{"frame":"  35 |   it('should work with express error handling', function (done) {\n  36 |     var limits = { fileSize: 200 }\n> 37 |     var upload = multer({ limits: limits })\n     |    ^ Global Variable\n  38 |     var router = new express.Router()\n  39 |     var form = new FormData()\n  40 |","start":{"line":37,"column":4,"index":817}},{"frame":"  36 |     var limits = { fileSize: 200 }\n  37 |     var upload = multer({ limits: limits })\n> 38 |     var router = new express.Router()\n     |    ^ Global Variable\n  39 |     var form = new FormData()\n  40 |\n  41 |     var routeCalled = 0","start":{"line":38,"column":4,"index":861}},{"frame":"  37 |     var upload = multer({ limits: limits })\n  38 |     var router = new express.Router()\n> 39 |     var form = new FormData()\n     |    ^ Global Variable\n  40 |\n  41 |     var routeCalled = 0\n  42 |     var errorCalled = 0","start":{"line":39,"column":4,"index":899}},{"frame":"  39 |     var form = new FormData()\n  40 |\n> 41 |     var routeCalled = 0\n     |    ^ Global Variable\n  42 |     var errorCalled = 0\n  43 |\n  44 |     form.append('avatar', util.file('large.jpg'))","start":{"line":41,"column":4,"index":930}},{"frame":"  40 |\n  41 |     var routeCalled = 0\n> 42 |     var errorCalled = 0\n     |    ^ Global Variable\n  43 |\n  44 |     form.append('avatar', util.file('large.jpg'))\n  45 |","start":{"line":42,"column":4,"index":954}},{"frame":"  74 |     }\n  75 |\n> 76 |     var upload = multer({ fileFilter: fileFilter })\n     |    ^ Global Variable\n  77 |     var router = new express.Router()\n  78 |     var form = new FormData()\n  79 |","start":{"line":76,"column":4,"index":1818}},{"frame":"  75 |\n  76 |     var upload = multer({ fileFilter: fileFilter })\n> 77 |     var router = new express.Router()\n     |    ^ Global Variable\n  78 |     var form = new FormData()\n  79 |\n  80 |     var routeCalled = 0","start":{"line":77,"column":4,"index":1870}},{"frame":"  76 |     var upload = multer({ fileFilter: fileFilter })\n  77 |     var router = new express.Router()\n> 78 |     var form = new FormData()\n     |    ^ Global Variable\n  79 |\n  80 |     var routeCalled = 0\n  81 |     var errorCalled = 0","start":{"line":78,"column":4,"index":1908}},{"frame":"  78 |     var form = new FormData()\n  79 |\n> 80 |     var routeCalled = 0\n     |    ^ Global Variable\n  81 |     var errorCalled = 0\n  82 |\n  83 |     form.append('avatar', util.file('large.jpg'))","start":{"line":80,"column":4,"index":1939}},{"frame":"  79 |\n  80 |     var routeCalled = 0\n> 81 |     var errorCalled = 0\n     |    ^ Global Variable\n  82 |\n  83 |     form.append('avatar', util.file('large.jpg'))\n  84 |","start":{"line":81,"column":4,"index":1963}},{"frame":"  109 |\n  110 |   it('should not crash on malformed request', function (done) {\n> 111 |     var upload = multer()\n      |    ^ Global Variable\n  112 |\n  113 |     app.post('/upload', upload.single('file'), function (req, res) {\n  114 |       res.status(500).end('Request should not be processed')","start":{"line":111,"column":4,"index":2731}},{"frame":"  120 |     })\n  121 |\n> 122 |     var boundary = 'AaB03x'\n      |    ^ Global Variable\n  123 |     var body = [\n  124 |       '--' + boundary,\n  125 |       'Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"',","start":{"line":122,"column":4,"index":3056}},{"frame":"  121 |\n  122 |     var boundary = 'AaB03x'\n> 123 |     var body = [\n      |    ^ Global Variable\n  124 |       '--' + boundary,\n  125 |       'Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"',\n  126 |       'Content-Type: text/plain',","start":{"line":123,"column":4,"index":3084}},{"frame":"  128 |       'test without end boundary'\n  129 |     ].join('\\r\\n')\n> 130 |     var options = {\n      |    ^ Global Variable\n  131 |       hostname: 'localhost',\n  132 |       port,\n  133 |       path: '/upload',","start":{"line":130,"column":4,"index":3295}},{"frame":"  139 |     }\n  140 |\n> 141 |     var req = http.request(options, (res) => {\n      |    ^ Global Variable\n  142 |       assert.strictEqual(res.statusCode, 200)\n  143 |       done()\n  144 |     })","start":{"line":141,"column":4,"index":3540}},{"frame":"  153 |\n  154 |   it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {\n> 155 |     var upload = multer()\n      |    ^ Global Variable\n  156 |\n  157 |     app.post('/upload2', upload.single('file'), function (req, res) {\n  158 |       res.status(500).end('Request should not be processed')","start":{"line":155,"column":4,"index":3860}},{"frame":"  164 |     })\n  165 |\n> 166 |     var boundary = 'AaB03x'\n      |    ^ Global Variable\n  167 |     // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`\n  168 |     var body = [\n  169 |       '--' + boundary,","start":{"line":166,"column":4,"index":4185}},{"frame":"  166 |     var boundary = 'AaB03x'\n  167 |     // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`\n> 168 |     var body = [\n      |    ^ Global Variable\n  169 |       '--' + boundary,\n  170 |       'Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"',\n  171 |       'Content-Type: text/plain',","start":{"line":168,"column":4,"index":4329}},{"frame":"  174 |       ''\n  175 |     ].join('\\r\\n')\n> 176 |     var options = {\n      |    ^ Global Variable\n  177 |       hostname: 'localhost',\n  178 |       port,\n  179 |       path: '/upload2',","start":{"line":176,"column":4,"index":4545}},{"frame":"  185 |     }\n  186 |\n> 187 |     var req = http.request(options, (res) => {\n      |    ^ Global Variable\n  188 |       assert.strictEqual(res.statusCode, 200)\n  189 |       done()\n  190 |     })","start":{"line":187,"column":4,"index":4791}},{"frame":"  199 |\n  200 |   it('should not crash on malformed multipart body with bad boundary', function (done) {\n> 201 |     var upload = multer()\n      |    ^ Global Variable\n  202 |\n  203 |     app.post('/upload3', upload.single('image'), function (req, res) {\n  204 |       res.status(500).end('Request should not be processed')","start":{"line":201,"column":4,"index":5089}},{"frame":"  210 |     })\n  211 |\n> 212 |     var boundary = '----FormBoundary'\n      |    ^ Global Variable\n  213 |     var body = [\n  214 |       '------FormBoundary',\n  215 |       'Content-Disposition: form-data; name=\"image\"; filename=\"\"',","start":{"line":212,"column":4,"index":5416}},{"frame":"  211 |\n  212 |     var boundary = '----FormBoundary'\n> 213 |     var body = [\n      |    ^ Global Variable\n  214 |       '------FormBoundary',\n  215 |       'Content-Disposition: form-data; name=\"image\"; filename=\"\"',\n  216 |       'Content-Type: application/octet-stream',","start":{"line":213,"column":4,"index":5454}},{"frame":"  220 |     ].join('\\r\\n')\n  221 |\n> 222 |     var options = {\n      |    ^ Global Variable\n  223 |       hostname: 'localhost',\n  224 |       port,\n  225 |       path: '/upload3',","start":{"line":222,"column":4,"index":5753}},{"frame":"  231 |     }\n  232 |\n> 233 |     var req = http.request(options, (res) => {\n      |    ^ Global Variable\n  234 |       assert.strictEqual(res.statusCode, 200)\n  235 |       done()\n  236 |     })","start":{"line":233,"column":4,"index":6011}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  60 |       assert.ifError(err)\n  61 |\n> 62 |       assert.strictEqual(routeCalled, 0)\n     |                                      ^ Magic Number\n  63 |       assert.strictEqual(errorCalled, 1)\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n  65 |       assert.strictEqual(res.statusCode, 500)","start":{"line":62,"column":38,"index":1494}},{"frame":"  61 |\n  62 |       assert.strictEqual(routeCalled, 0)\n> 63 |       assert.strictEqual(errorCalled, 1)\n     |                                      ^ Magic Number\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n  65 |       assert.strictEqual(res.statusCode, 500)\n  66 |","start":{"line":63,"column":38,"index":1535}},{"frame":"  63 |       assert.strictEqual(errorCalled, 1)\n  64 |       assert.strictEqual(body.toString(), 'ERROR')\n> 65 |       assert.strictEqual(res.statusCode, 500)\n     |                                         ^ Magic Number\n  66 |\n  67 |       done()\n  68 |     })","start":{"line":65,"column":41,"index":1630}},{"frame":"   99 |       assert.ifError(err)\n  100 |\n> 101 |       assert.strictEqual(routeCalled, 0)\n      |                                      ^ Magic Number\n  102 |       assert.strictEqual(errorCalled, 1)\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n  104 |       assert.strictEqual(res.statusCode, 500)","start":{"line":101,"column":38,"index":2495}},{"frame":"  100 |\n  101 |       assert.strictEqual(routeCalled, 0)\n> 102 |       assert.strictEqual(errorCalled, 1)\n      |                                      ^ Magic Number\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n  104 |       assert.strictEqual(res.statusCode, 500)\n  105 |","start":{"line":102,"column":38,"index":2536}},{"frame":"  102 |       assert.strictEqual(errorCalled, 1)\n  103 |       assert.strictEqual(body.toString(), 'ERROR')\n> 104 |       assert.strictEqual(res.statusCode, 500)\n      |                                         ^ Magic Number\n  105 |\n  106 |       done()\n  107 |     })","start":{"line":104,"column":41,"index":2631}},{"frame":"  140 |\n  141 |     var req = http.request(options, (res) => {\n> 142 |       assert.strictEqual(res.statusCode, 200)\n      |                                         ^ Magic Number\n  143 |       done()\n  144 |     })\n  145 |","start":{"line":142,"column":41,"index":3624}},{"frame":"  186 |\n  187 |     var req = http.request(options, (res) => {\n> 188 |       assert.strictEqual(res.statusCode, 200)\n      |                                         ^ Magic Number\n  189 |       done()\n  190 |     })\n  191 |","start":{"line":188,"column":41,"index":4875}},{"frame":"  232 |\n  233 |     var req = http.request(options, (res) => {\n> 234 |       assert.strictEqual(res.statusCode, 200)\n      |                                         ^ Magic Number\n  235 |       done()\n  236 |     })\n  237 |","start":{"line":234,"column":41,"index":6095}}]},{"name":"Mystery Guest","packageName":"mysteryGuest","items":[{"frame":"  139 |     }\n  140 |\n> 141 |     var req = http.request(options, (res) => {\n      |              ^ Mystery Guest\n  142 |       assert.strictEqual(res.statusCode, 200)\n  143 |       done()\n  144 |     })","start":{"column":14,"line":141}},{"frame":"  185 |     }\n  186 |\n> 187 |     var req = http.request(options, (res) => {\n      |              ^ Mystery Guest\n  188 |       assert.strictEqual(res.statusCode, 200)\n  189 |       done()\n  190 |     })","start":{"column":14,"line":187}},{"frame":"  231 |     }\n  232 |\n> 233 |     var req = http.request(options, (res) => {\n      |              ^ Mystery Guest\n  234 |       assert.strictEqual(res.statusCode, 200)\n  235 |       done()\n  236 |     })","start":{"column":14,"line":233}}]}],"metrics":{"aggregate":{"cyclomatic":29,"cyclomaticDensity":13.942,"halstead":{"bugs":2.06,"difficulty":26.159,"effort":161666.756,"length":872,"time":8981.486,"vocabulary":136,"volume":6180.268,"operands":{"distinct":123,"total":495,"identifiers":["assert","require","\"assert\"","http","\"http\"","multer","\"../\"","util","\"./_util\"","express","\"express\"","FormData","\"form-data\"","concat","\"concat-stream\"","port","34279","describe","\"Express Integration\"","app","before","done","listen","submitForm","form","path","cb","req","submit","\"http://localhost:\"","on","\"error\"","\"response\"","res","pipe","encoding","\"buffer\"","body","null","it","\"should work with express error handling\"","limits","fileSize","200","upload","router","Router","routeCalled","0","errorCalled","append","\"avatar\"","file","\"large.jpg\"","post","\"/profile\"","single","next","status","end","\"SUCCESS\"","use","err","strictEqual","code","\"LIMIT_FILE_SIZE\"","500","\"ERROR\"","\"/t1\"","\"/t1/profile\"","ifError","1","toString","statusCode","\"should work when receiving error from fileFilter\"","fileFilter","Error","\"TEST\"","message","\"/t2\"","\"/t2/profile\"","\"should not crash on malformed request\"","\"/upload\"","\"file\"","\"Request should not be processed\"","\"Unexpected end of form\"","\"Correct error\"","boundary","\"AaB03x\"","\"--\"","\"Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"\"","\"Content-Type: text/plain\"","\"\"","\"test without end boundary\"","join","\"\r\n\"","options","hostname","\"localhost\"","method","\"POST\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","request","write","\"should not crash on malformed request that causes two errors to be emitted by busboy\"","\"/upload2\"","\"Malformed part header\"","\"should not crash on malformed multipart body with bad boundary\"","\"/upload3\"","\"image\"","\"----FormBoundary\"","\"------FormBoundary\"","\"Content-Disposition: form-data; name=\"image\"; filename=\"\"\"","\"Content-Type: application/octet-stream\"","\"------FormBoundar\"","\"Content-Type\"","\"Content-Length\"","Buffer","byteLength"]},"operators":{"distinct":13,"total":377,"identifiers":["var","=","()","function",".","+","{}",":","new","++ (postfix)","[]",",","function=>"]}},"paramCount":57,"sloc":{"logical":208,"physical":242}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":242,"lineStart":1,"maintainability":109.581,"methods":[{"cyclomatic":1,"cyclomaticDensity":7.143,"halstead":{"bugs":0.048,"difficulty":2.538,"effort":365.538,"length":36,"time":20.308,"vocabulary":16,"volume":144,"operands":{"distinct":13,"total":22,"identifiers":["app","before","done","submitForm","form","path","cb","it","\"should work with express error handling\"","\"should work when receiving error from fileFilter\"","\"should not crash on malformed request\"","\"should not crash on malformed request that causes two errors to be emitted by busboy\"","\"should not crash on malformed multipart body with bad boundary\""]},"operators":{"distinct":3,"total":14,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":14,"physical":227},"errors":[],"lineEnd":241,"lineStart":15,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.01,"difficulty":1.8,"effort":54,"length":10,"time":3,"vocabulary":8,"volume":30,"operands":{"distinct":5,"total":6,"identifiers":["app","express","listen","port","done"]},"operators":{"distinct":3,"total":4,"identifiers":["=","()","."]}},"paramCount":1,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":21,"lineStart":18,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.034,"difficulty":3.818,"effort":390.167,"length":25,"time":21.676,"vocabulary":17,"volume":102.187,"operands":{"distinct":11,"total":14,"identifiers":["req","form","submit","\"http://localhost:\"","port","path","on","\"error\"","cb","\"response\"","res"]},"operators":{"distinct":6,"total":11,"identifiers":["var","=","()",".","+","function"]}},"paramCount":3,"sloc":{"logical":5,"physical":11},"errors":[],"lineEnd":33,"lineStart":23,"name":"submitForm","paramNames":["form","path","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":20,"halstead":{"bugs":0.023,"difficulty":2.778,"effort":190.368,"length":18,"time":10.576,"vocabulary":14,"volume":68.532,"operands":{"distinct":9,"total":10,"identifiers":["res","on","\"error\"","cb","pipe","concat","encoding","\"buffer\"","body"]},"operators":{"distinct":5,"total":8,"identifiers":["()",".","{}",":","function"]}},"paramCount":1,"sloc":{"logical":5,"physical":6},"errors":[],"lineEnd":32,"lineStart":27,"name":"<anon method-3>","paramNames":["res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.004,"difficulty":0.5,"effort":5.805,"length":5,"time":0.322,"vocabulary":5,"volume":11.61,"operands":{"distinct":4,"total":4,"identifiers":["cb","null","res","body"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":31,"lineStart":29,"name":"<anon method-4>","paramNames":["body"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.263,"halstead":{"bugs":0.146,"difficulty":6.065,"effort":2660.433,"length":83,"time":147.802,"vocabulary":39,"volume":438.688,"operands":{"distinct":31,"total":47,"identifiers":["limits","fileSize","200","upload","multer","router","express","Router","form","FormData","routeCalled","0","errorCalled","append","\"avatar\"","util","file","\"large.jpg\"","post","\"/profile\"","single","req","res","next","use","err","app","\"/t1\"","submitForm","\"/t1/profile\"","body"]},"operators":{"distinct":8,"total":36,"identifiers":["var","=","{}",":","()","new",".","function"]}},"paramCount":1,"sloc":{"logical":19,"physical":35},"errors":[],"lineEnd":69,"lineStart":35,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.012,"difficulty":1.5,"effort":52.304,"length":11,"time":2.906,"vocabulary":9,"volume":34.869,"operands":{"distinct":6,"total":6,"identifiers":["routeCalled","res","status","200","end","\"SUCCESS\""]},"operators":{"distinct":3,"total":5,"identifiers":["++ (postfix)","()","."]}},"paramCount":3,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":49,"lineStart":46,"name":"<anon method-6>","paramNames":["req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.024,"difficulty":1.5,"effort":108.51,"length":19,"time":6.028,"vocabulary":14,"volume":72.34,"operands":{"distinct":11,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FILE_SIZE\"","errorCalled","res","status","500","end","\"ERROR\""]},"operators":{"distinct":3,"total":8,"identifiers":["()",".","++ (postfix)"]}},"paramCount":4,"sloc":{"logical":4,"physical":6},"errors":[],"lineEnd":56,"lineStart":51,"name":"<anon method-7>","paramNames":["err","req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.049,"difficulty":1.467,"effort":215.818,"length":36,"time":11.99,"vocabulary":17,"volume":147.149,"operands":{"distinct":15,"total":22,"identifiers":["assert","ifError","err","strictEqual","routeCalled","0","errorCalled","1","body","toString","\"ERROR\"","res","statusCode","500","done"]},"operators":{"distinct":2,"total":14,"identifiers":["()","."]}},"paramCount":3,"sloc":{"logical":7,"physical":10},"errors":[],"lineEnd":68,"lineStart":59,"name":"<anon method-8>","paramNames":["err","res","body"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.556,"halstead":{"bugs":0.142,"difficulty":6.4,"effort":2720.526,"length":81,"time":151.14,"vocabulary":38,"volume":425.082,"operands":{"distinct":30,"total":48,"identifiers":["fileFilter","req","file","cb","upload","multer","router","express","Router","form","FormData","routeCalled","0","errorCalled","append","\"avatar\"","util","\"large.jpg\"","post","\"/profile\"","single","res","next","use","err","app","\"/t2\"","submitForm","\"/t2/profile\"","body"]},"operators":{"distinct":8,"total":33,"identifiers":["function","var","=","()","{}",":","new","."]}},"paramCount":1,"sloc":{"logical":18,"physical":38},"errors":[],"lineEnd":108,"lineStart":71,"name":"<anon method-9>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.004,"difficulty":1,"effort":11.61,"length":5,"time":0.645,"vocabulary":5,"volume":11.61,"operands":{"distinct":3,"total":3,"identifiers":["cb","Error","\"TEST\""]},"operators":{"distinct":2,"total":2,"identifiers":["()","new"]}},"paramCount":3,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":74,"lineStart":72,"name":"fileFilter","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.012,"difficulty":1.5,"effort":52.304,"length":11,"time":2.906,"vocabulary":9,"volume":34.869,"operands":{"distinct":6,"total":6,"identifiers":["routeCalled","res","status","200","end","\"SUCCESS\""]},"operators":{"distinct":3,"total":5,"identifiers":["++ (postfix)","()","."]}},"paramCount":3,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":88,"lineStart":85,"name":"<anon method-10>","paramNames":["req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.024,"difficulty":1.5,"effort":108.51,"length":19,"time":6.028,"vocabulary":14,"volume":72.34,"operands":{"distinct":11,"total":11,"identifiers":["assert","strictEqual","err","message","\"TEST\"","errorCalled","res","status","500","end","\"ERROR\""]},"operators":{"distinct":3,"total":8,"identifiers":["()",".","++ (postfix)"]}},"paramCount":4,"sloc":{"logical":4,"physical":6},"errors":[],"lineEnd":95,"lineStart":90,"name":"<anon method-11>","paramNames":["err","req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.049,"difficulty":1.467,"effort":215.818,"length":36,"time":11.99,"vocabulary":17,"volume":147.149,"operands":{"distinct":15,"total":22,"identifiers":["assert","ifError","err","strictEqual","routeCalled","0","errorCalled","1","body","toString","\"ERROR\"","res","statusCode","500","done"]},"operators":{"distinct":2,"total":14,"identifiers":["()","."]}},"paramCount":3,"sloc":{"logical":7,"physical":10},"errors":[],"lineEnd":107,"lineStart":98,"name":"<anon method-12>","paramNames":["err","res","body"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":4,"halstead":{"bugs":0.197,"difficulty":7.838,"effort":4623.594,"length":104,"time":256.866,"vocabulary":51,"volume":589.932,"operands":{"distinct":40,"total":57,"identifiers":["upload","multer","app","post","\"/upload\"","single","\"file\"","req","res","use","err","next","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"\"","\"Content-Type: text/plain\"","\"\"","\"test without end boundary\"","join","\"\r\n\"","options","hostname","\"localhost\"","port","path","method","\"POST\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","http","request","on","\"error\"","write","end"]},"operators":{"distinct":11,"total":47,"identifiers":["var","=","()",".","function","[]",",","+","{}",":","function=>"]}},"paramCount":1,"sloc":{"logical":25,"physical":43},"errors":[],"lineEnd":152,"lineStart":110,"name":"<anon method-13>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.008,"difficulty":1,"effort":25.266,"length":9,"time":1.404,"vocabulary":7,"volume":25.266,"operands":{"distinct":5,"total":5,"identifiers":["res","status","500","end","\"Request should not be processed\""]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":3},"errors":[],"lineEnd":115,"lineStart":113,"name":"<anon method-14>","paramNames":["req","res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1,"effort":60.944,"length":17,"time":3.386,"vocabulary":12,"volume":60.944,"operands":{"distinct":10,"total":10,"identifiers":["assert","strictEqual","err","message","\"Unexpected end of form\"","res","status","200","end","\"Correct error\""]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":4,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":120,"lineStart":117,"name":"<anon method-15>","paramNames":["err","req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","res","statusCode","200","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":144,"lineStart":141,"name":"<anon method-16>","paramNames":["res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.002,"difficulty":0.5,"effort":2.377,"length":3,"time":0.132,"vocabulary":3,"volume":4.755,"operands":{"distinct":2,"total":2,"identifiers":["done","err"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":148,"lineStart":146,"name":"<anon method-17>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":4,"halstead":{"bugs":0.207,"difficulty":8.462,"effort":5253.128,"length":110,"time":291.84,"vocabulary":50,"volume":620.824,"operands":{"distinct":39,"total":60,"identifiers":["upload","multer","app","post","\"/upload2\"","single","\"file\"","req","res","use","err","next","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data; name=\"file\"; filename=\"test.txt\"\"","\"Content-Type: text/plain\"","\"\"","join","\"\r\n\"","options","hostname","\"localhost\"","port","path","method","\"POST\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","http","request","on","\"error\"","write","end"]},"operators":{"distinct":11,"total":50,"identifiers":["var","=","()",".","function","[]",",","+","{}",":","function=>"]}},"paramCount":1,"sloc":{"logical":25,"physical":45},"errors":[],"lineEnd":198,"lineStart":154,"name":"<anon method-18>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.008,"difficulty":1,"effort":25.266,"length":9,"time":1.404,"vocabulary":7,"volume":25.266,"operands":{"distinct":5,"total":5,"identifiers":["res","status","500","end","\"Request should not be processed\""]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":3},"errors":[],"lineEnd":159,"lineStart":157,"name":"<anon method-19>","paramNames":["req","res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1,"effort":60.944,"length":17,"time":3.386,"vocabulary":12,"volume":60.944,"operands":{"distinct":10,"total":10,"identifiers":["assert","strictEqual","err","message","\"Malformed part header\"","res","status","200","end","\"Correct error\""]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":4,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":164,"lineStart":161,"name":"<anon method-20>","paramNames":["err","req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","res","statusCode","200","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":190,"lineStart":187,"name":"<anon method-21>","paramNames":["res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.002,"difficulty":0.5,"effort":2.377,"length":3,"time":0.132,"vocabulary":3,"volume":4.755,"operands":{"distinct":2,"total":2,"identifiers":["done","err"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":194,"lineStart":192,"name":"<anon method-22>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":4.167,"halstead":{"bugs":0.186,"difficulty":7.615,"effort":4255.033,"length":99,"time":236.391,"vocabulary":50,"volume":558.742,"operands":{"distinct":39,"total":54,"identifiers":["upload","multer","app","post","\"/upload3\"","single","\"image\"","req","res","use","err","next","boundary","\"----FormBoundary\"","body","\"------FormBoundary\"","\"Content-Disposition: form-data; name=\"image\"; filename=\"\"\"","\"Content-Type: application/octet-stream\"","\"\"","\"------FormBoundar\"","join","\"\r\n\"","options","hostname","\"localhost\"","port","path","method","\"POST\"","headers","\"Content-Type\"","\"multipart/form-data; boundary=\"","\"Content-Length\"","Buffer","byteLength","http","request","write","end"]},"operators":{"distinct":11,"total":45,"identifiers":["var","=","()",".","function","[]",",","{}",":","+","function=>"]}},"paramCount":1,"sloc":{"logical":24,"physical":41},"errors":[],"lineEnd":240,"lineStart":200,"name":"<anon method-23>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.008,"difficulty":1,"effort":25.266,"length":9,"time":1.404,"vocabulary":7,"volume":25.266,"operands":{"distinct":5,"total":5,"identifiers":["res","status","500","end","\"Request should not be processed\""]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":3},"errors":[],"lineEnd":205,"lineStart":203,"name":"<anon method-24>","paramNames":["req","res"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1,"effort":60.944,"length":17,"time":3.386,"vocabulary":12,"volume":60.944,"operands":{"distinct":10,"total":10,"identifiers":["assert","strictEqual","err","message","\"Unexpected end of form\"","res","status","200","end","\"Correct error\""]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":4,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":210,"lineStart":207,"name":"<anon method-25>","paramNames":["err","req","res","next"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","res","statusCode","200","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":236,"lineStart":233,"name":"<anon method-26>","paramNames":["res"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":0.481,"halstead":{"bugs":0.071,"difficulty":0.902,"effort":5574.716,"length":30.069,"time":309.706,"vocabulary":4.69,"volume":213.113,"operands":{"distinct":4.241,"total":17.069},"operators":{"distinct":0.448,"total":13}},"paramCount":1.966,"sloc":{"logical":7.172,"physical":8.345}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":37.454,"halstead":{"bugs":0.046,"difficulty":2.42,"effort":772.745,"length":29.357,"time":42.93,"vocabulary":16.429,"volume":138.145,"operands":{"distinct":12.679,"total":16.786},"operators":{"distinct":3.75,"total":12.571}},"paramCount":2.036,"sloc":{"logical":6.821,"physical":19.107}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/expected-files.js","testCases":6,"smells":30,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  22 |\n  23 |     util.submitForm(parser, form, function (err, req) {\n> 24 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n     |      ^ Assertion Roulette\n  25 |       assert.strictEqual(err.field, 'notme')\n  26 |       done()\n  27 |     })","start":{"column":6,"line":24}},{"frame":"  23 |     util.submitForm(parser, form, function (err, req) {\n  24 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 25 |       assert.strictEqual(err.field, 'notme')\n     |      ^ Assertion Roulette\n  26 |       done()\n  27 |     })\n  28 |   })","start":{"column":6,"line":25}},{"frame":"  36 |\n  37 |     util.submitForm(parser, form, function (err, req) {\n> 38 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n     |      ^ Assertion Roulette\n  39 |       assert.strictEqual(err.field, 'notme')\n  40 |       done()\n  41 |     })","start":{"column":6,"line":38}},{"frame":"  37 |     util.submitForm(parser, form, function (err, req) {\n  38 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 39 |       assert.strictEqual(err.field, 'notme')\n     |      ^ Assertion Roulette\n  40 |       done()\n  41 |     })\n  42 |   })","start":{"column":6,"line":39}},{"frame":"  50 |\n  51 |     util.submitForm(parser, form, function (err, req) {\n> 52 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n     |      ^ Assertion Roulette\n  53 |       assert.strictEqual(err.field, 'butme')\n  54 |       done()\n  55 |     })","start":{"column":6,"line":52}},{"frame":"  51 |     util.submitForm(parser, form, function (err, req) {\n  52 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 53 |       assert.strictEqual(err.field, 'butme')\n     |      ^ Assertion Roulette\n  54 |       done()\n  55 |     })\n  56 |   })","start":{"column":6,"line":53}},{"frame":"  70 |       assert.ifError(err)\n  71 |\n> 72 |       assert.strictEqual(req.files.butme.length, 2)\n     |      ^ Assertion Roulette\n  73 |       assert.strictEqual(req.files.andme.length, 1)\n  74 |\n  75 |       done()","start":{"column":6,"line":72}},{"frame":"  71 |\n  72 |       assert.strictEqual(req.files.butme.length, 2)\n> 73 |       assert.strictEqual(req.files.andme.length, 1)\n     |      ^ Assertion Roulette\n  74 |\n  75 |       done()\n  76 |     })","start":{"column":6,"line":73}},{"frame":"  90 |\n  91 |     util.submitForm(parser, form, function (err, req) {\n> 92 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n     |      ^ Assertion Roulette\n  93 |       assert.strictEqual(err.field, 'notme')\n  94 |       done()\n  95 |     })","start":{"column":6,"line":92}},{"frame":"  91 |     util.submitForm(parser, form, function (err, req) {\n  92 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 93 |       assert.strictEqual(err.field, 'notme')\n     |      ^ Assertion Roulette\n  94 |       done()\n  95 |     })\n  96 |   })","start":{"column":6,"line":93}},{"frame":"  106 |     util.submitForm(parser, form, function (err, req) {\n  107 |       assert.ifError(err)\n> 108 |       assert.strictEqual(req.files.length, 3)\n      |      ^ Assertion Roulette\n  109 |       assert.strictEqual(req.files[0].fieldname, 'butme')\n  110 |       assert.strictEqual(req.files[1].fieldname, 'butme')\n  111 |       assert.strictEqual(req.files[2].fieldname, 'andme')","start":{"column":6,"line":108}},{"frame":"  107 |       assert.ifError(err)\n  108 |       assert.strictEqual(req.files.length, 3)\n> 109 |       assert.strictEqual(req.files[0].fieldname, 'butme')\n      |      ^ Assertion Roulette\n  110 |       assert.strictEqual(req.files[1].fieldname, 'butme')\n  111 |       assert.strictEqual(req.files[2].fieldname, 'andme')\n  112 |       done()","start":{"column":6,"line":109}},{"frame":"  108 |       assert.strictEqual(req.files.length, 3)\n  109 |       assert.strictEqual(req.files[0].fieldname, 'butme')\n> 110 |       assert.strictEqual(req.files[1].fieldname, 'butme')\n      |      ^ Assertion Roulette\n  111 |       assert.strictEqual(req.files[2].fieldname, 'andme')\n  112 |       done()\n  113 |     })","start":{"column":6,"line":110}},{"frame":"  109 |       assert.strictEqual(req.files[0].fieldname, 'butme')\n  110 |       assert.strictEqual(req.files[1].fieldname, 'butme')\n> 111 |       assert.strictEqual(req.files[2].fieldname, 'andme')\n      |      ^ Assertion Roulette\n  112 |       done()\n  113 |     })\n  114 |   })","start":{"column":6,"line":111}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"   8 |\n   9 | describe('Expected files', function () {\n> 10 |   var upload\n     |  ^ Global Variable\n  11 |\n  12 |   before(function (done) {\n  13 |     upload = multer()","start":{"line":10,"column":2,"index":194}},{"frame":"  16 |\n  17 |   it('should reject single unexpected file', function (done) {\n> 18 |     var form = new FormData()\n     |    ^ Global Variable\n  19 |     var parser = upload.single('butme')\n  20 |\n  21 |     form.append('notme', util.file('small0.dat'))","start":{"line":18,"column":4,"index":339}},{"frame":"  17 |   it('should reject single unexpected file', function (done) {\n  18 |     var form = new FormData()\n> 19 |     var parser = upload.single('butme')\n     |    ^ Global Variable\n  20 |\n  21 |     form.append('notme', util.file('small0.dat'))\n  22 |","start":{"line":19,"column":4,"index":369}},{"frame":"  29 |\n  30 |   it('should reject array of multiple files', function (done) {\n> 31 |     var form = new FormData()\n     |    ^ Global Variable\n  32 |     var parser = upload.array('butme', 4)\n  33 |\n  34 |     form.append('notme', util.file('small0.dat'))","start":{"line":31,"column":4,"index":712}},{"frame":"  30 |   it('should reject array of multiple files', function (done) {\n  31 |     var form = new FormData()\n> 32 |     var parser = upload.array('butme', 4)\n     |    ^ Global Variable\n  33 |\n  34 |     form.append('notme', util.file('small0.dat'))\n  35 |     form.append('notme', util.file('small1.dat'))","start":{"line":32,"column":4,"index":742}},{"frame":"  43 |\n  44 |   it('should reject overflowing arrays', function (done) {\n> 45 |     var form = new FormData()\n     |    ^ Global Variable\n  46 |     var parser = upload.array('butme', 1)\n  47 |\n  48 |     form.append('butme', util.file('small0.dat'))","start":{"line":45,"column":4,"index":1132}},{"frame":"  44 |   it('should reject overflowing arrays', function (done) {\n  45 |     var form = new FormData()\n> 46 |     var parser = upload.array('butme', 1)\n     |    ^ Global Variable\n  47 |\n  48 |     form.append('butme', util.file('small0.dat'))\n  49 |     form.append('butme', util.file('small1.dat'))","start":{"line":46,"column":4,"index":1162}},{"frame":"  57 |\n  58 |   it('should accept files with expected fieldname', function (done) {\n> 59 |     var form = new FormData()\n     |    ^ Global Variable\n  60 |     var parser = upload.fields([\n  61 |       { name: 'butme', maxCount: 2 },\n  62 |       { name: 'andme', maxCount: 2 }","start":{"line":59,"column":4,"index":1563}},{"frame":"  58 |   it('should accept files with expected fieldname', function (done) {\n  59 |     var form = new FormData()\n> 60 |     var parser = upload.fields([\n     |    ^ Global Variable\n  61 |       { name: 'butme', maxCount: 2 },\n  62 |       { name: 'andme', maxCount: 2 }\n  63 |     ])","start":{"line":60,"column":4,"index":1593}},{"frame":"  78 |\n  79 |   it('should reject files with unexpected fieldname', function (done) {\n> 80 |     var form = new FormData()\n     |    ^ Global Variable\n  81 |     var parser = upload.fields([\n  82 |       { name: 'butme', maxCount: 2 },\n  83 |       { name: 'andme', maxCount: 2 }","start":{"line":80,"column":4,"index":2145}},{"frame":"  79 |   it('should reject files with unexpected fieldname', function (done) {\n  80 |     var form = new FormData()\n> 81 |     var parser = upload.fields([\n     |    ^ Global Variable\n  82 |       { name: 'butme', maxCount: 2 },\n  83 |       { name: 'andme', maxCount: 2 }\n  84 |     ])","start":{"line":81,"column":4,"index":2175}},{"frame":"   97 |\n   98 |   it('should allow any file to come thru', function (done) {\n>  99 |     var form = new FormData()\n      |    ^ Global Variable\n  100 |     var parser = upload.any()\n  101 |\n  102 |     form.append('butme', util.file('small0.dat'))","start":{"line":99,"column":4,"index":2738}},{"frame":"   98 |   it('should allow any file to come thru', function (done) {\n   99 |     var form = new FormData()\n> 100 |     var parser = upload.any()\n      |    ^ Global Variable\n  101 |\n  102 |     form.append('butme', util.file('small0.dat'))\n  103 |     form.append('butme', util.file('small1.dat'))","start":{"line":100,"column":4,"index":2768}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  70 |       assert.ifError(err)\n  71 |\n> 72 |       assert.strictEqual(req.files.butme.length, 2)\n     |                                                 ^ Magic Number\n  73 |       assert.strictEqual(req.files.andme.length, 1)\n  74 |\n  75 |       done()","start":{"line":72,"column":49,"index":1987}},{"frame":"  71 |\n  72 |       assert.strictEqual(req.files.butme.length, 2)\n> 73 |       assert.strictEqual(req.files.andme.length, 1)\n     |                                                 ^ Magic Number\n  74 |\n  75 |       done()\n  76 |     })","start":{"line":73,"column":49,"index":2039}},{"frame":"  106 |     util.submitForm(parser, form, function (err, req) {\n  107 |       assert.ifError(err)\n> 108 |       assert.strictEqual(req.files.length, 3)\n      |                                           ^ Magic Number\n  109 |       assert.strictEqual(req.files[0].fieldname, 'butme')\n  110 |       assert.strictEqual(req.files[1].fieldname, 'butme')\n  111 |       assert.strictEqual(req.files[2].fieldname, 'andme')","start":{"line":108,"column":43,"index":3070}}]}],"metrics":{"aggregate":{"cyclomatic":15,"cyclomaticDensity":12.712,"halstead":{"bugs":1.082,"difficulty":28,"effort":90889.575,"length":539,"time":5049.421,"vocabulary":65,"volume":3246.056,"operands":{"distinct":55,"total":308,"identifiers":["assert","require","\"assert\"","util","\"./_util\"","multer","\"../\"","FormData","\"form-data\"","describe","\"Expected files\"","upload","before","done","it","\"should reject single unexpected file\"","form","parser","single","\"butme\"","append","\"notme\"","file","\"small0.dat\"","submitForm","err","req","strictEqual","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"should reject array of multiple files\"","array","4","\"small1.dat\"","\"should reject overflowing arrays\"","1","\"should accept files with expected fieldname\"","fields","name","maxCount","2","\"andme\"","\"empty.dat\"","ifError","files","butme","length","andme","\"should reject files with unexpected fieldname\"","\"should allow any file to come thru\"","any","3","0","fieldname"]},"operators":{"distinct":10,"total":231,"identifiers":["var","=","()","function","new",".","[]",",","{}",":"]}},"paramCount":19,"sloc":{"logical":118,"physical":116}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":116,"lineStart":1,"maintainability":107.799,"methods":[{"cyclomatic":1,"cyclomaticDensity":6.667,"halstead":{"bugs":0.044,"difficulty":3.15,"effort":419.63,"length":36,"time":23.313,"vocabulary":13,"volume":133.216,"operands":{"distinct":10,"total":21,"identifiers":["upload","before","done","it","\"should reject single unexpected file\"","\"should reject array of multiple files\"","\"should reject overflowing arrays\"","\"should accept files with expected fieldname\"","\"should reject files with unexpected fieldname\"","\"should allow any file to come thru\""]},"operators":{"distinct":3,"total":15,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":15,"physical":107},"errors":[],"lineEnd":115,"lineStart":9,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.005,"difficulty":1,"effort":13.932,"length":6,"time":0.774,"vocabulary":5,"volume":13.932,"operands":{"distinct":3,"total":3,"identifiers":["upload","multer","done"]},"operators":{"distinct":2,"total":3,"identifiers":["=","()"]}},"paramCount":1,"sloc":{"logical":3,"physical":4},"errors":[],"lineEnd":15,"lineStart":12,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.046,"difficulty":3.857,"effort":533.449,"length":32,"time":29.636,"vocabulary":20,"volume":138.302,"operands":{"distinct":14,"total":18,"identifiers":["form","FormData","parser","upload","single","\"butme\"","append","\"notme\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":14,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":7,"physical":12},"errors":[],"lineEnd":28,"lineStart":17,"name":"<anon method-3>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"notme\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":27,"lineStart":23,"name":"<anon method-4>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.064,"difficulty":4.688,"effort":898.854,"length":43,"time":49.936,"vocabulary":22,"volume":191.756,"operands":{"distinct":16,"total":25,"identifiers":["form","FormData","parser","upload","array","\"butme\"","4","append","\"notme\"","util","file","\"small0.dat\"","\"small1.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":18,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":9,"physical":13},"errors":[],"lineEnd":42,"lineStart":30,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"notme\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":41,"lineStart":37,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.063,"difficulty":5,"effort":944.348,"length":43,"time":52.464,"vocabulary":21,"volume":188.87,"operands":{"distinct":15,"total":25,"identifiers":["form","FormData","parser","upload","array","\"butme\"","1","append","util","file","\"small0.dat\"","\"small1.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":18,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":9,"physical":13},"errors":[],"lineEnd":56,"lineStart":44,"name":"<anon method-7>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"butme\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":55,"lineStart":51,"name":"<anon method-8>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.667,"halstead":{"bugs":0.108,"difficulty":9.737,"effort":3169.193,"length":67,"time":176.066,"vocabulary":29,"volume":325.485,"operands":{"distinct":19,"total":37,"identifiers":["form","FormData","parser","upload","fields","name","\"butme\"","maxCount","2","\"andme\"","append","util","file","\"small0.dat\"","\"small1.dat\"","\"empty.dat\"","submitForm","err","req"]},"operators":{"distinct":10,"total":30,"identifiers":["var","=","new","()",".","[]",",","{}",":","function"]}},"paramCount":1,"sloc":{"logical":15,"physical":20},"errors":[],"lineEnd":77,"lineStart":58,"name":"<anon method-9>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.039,"difficulty":1.5,"effort":177.042,"length":31,"time":9.836,"vocabulary":14,"volume":118.028,"operands":{"distinct":12,"total":18,"identifiers":["assert","ifError","err","strictEqual","req","files","butme","length","2","andme","1","done"]},"operators":{"distinct":2,"total":13,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":4,"physical":8},"errors":[],"lineEnd":76,"lineStart":69,"name":"<anon method-10>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.882,"halstead":{"bugs":0.126,"difficulty":10.75,"effort":4061.679,"length":77,"time":225.649,"vocabulary":30,"volume":377.831,"operands":{"distinct":20,"total":43,"identifiers":["form","FormData","parser","upload","fields","name","\"butme\"","maxCount","2","\"andme\"","append","util","file","\"small0.dat\"","\"small1.dat\"","\"empty.dat\"","\"notme\"","submitForm","err","req"]},"operators":{"distinct":10,"total":34,"identifiers":["var","=","new","()",".","[]",",","{}",":","function"]}},"paramCount":1,"sloc":{"logical":17,"physical":18},"errors":[],"lineEnd":96,"lineStart":79,"name":"<anon method-11>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"notme\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":95,"lineStart":91,"name":"<anon method-12>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":9.091,"halstead":{"bugs":0.076,"difficulty":5.438,"effort":1236.656,"length":51,"time":68.703,"vocabulary":22,"volume":227.431,"operands":{"distinct":16,"total":29,"identifiers":["form","FormData","parser","upload","any","append","\"butme\"","util","file","\"small0.dat\"","\"small1.dat\"","\"andme\"","\"empty.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":22,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":11,"physical":17},"errors":[],"lineEnd":114,"lineStart":98,"name":"<anon method-13>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":16.667,"halstead":{"bugs":0.074,"difficulty":3.1,"effort":685.119,"length":53,"time":38.062,"vocabulary":18,"volume":221.006,"operands":{"distinct":15,"total":31,"identifiers":["assert","ifError","err","strictEqual","req","files","length","3","0","fieldname","\"butme\"","1","2","\"andme\"","done"]},"operators":{"distinct":3,"total":22,"identifiers":["()",".","[]"]}},"paramCount":2,"sloc":{"logical":6,"physical":8},"errors":[],"lineEnd":113,"lineStart":106,"name":"<anon method-14>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":0.847,"halstead":{"bugs":0.072,"difficulty":1.867,"effort":6059.305,"length":35.933,"time":336.628,"vocabulary":4.333,"volume":216.404,"operands":{"distinct":3.667,"total":20.533},"operators":{"distinct":0.667,"total":15.4}},"paramCount":1.267,"sloc":{"logical":7.867,"physical":7.733}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":19.511,"halstead":{"bugs":0.052,"difficulty":3.837,"effort":890.627,"length":36.5,"time":49.479,"vocabulary":16.714,"volume":155.36,"operands":{"distinct":12.286,"total":21},"operators":{"distinct":4.429,"total":15.5}},"paramCount":1.357,"sloc":{"logical":7.714,"physical":17.143}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/error-handling.js","testCases":15,"smells":60,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  26 |\n  27 |     util.submitForm(upload, form, function (err, req) {\n> 28 |       assert.strictEqual(err instanceof Error, true)\n     |      ^ Assertion Roulette\n  29 |       assert.strictEqual(err instanceof multer.MulterError, true)\n  30 |       done()\n  31 |     })","start":{"column":6,"line":28}},{"frame":"  27 |     util.submitForm(upload, form, function (err, req) {\n  28 |       assert.strictEqual(err instanceof Error, true)\n> 29 |       assert.strictEqual(err instanceof multer.MulterError, true)\n     |      ^ Assertion Roulette\n  30 |       done()\n  31 |     })\n  32 |   })","start":{"column":6,"line":29}},{"frame":"  58 |\n  59 |     util.submitForm(parser, form, function (err, req) {\n> 60 |       assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')\n     |      ^ Assertion Roulette\n  61 |       assert.strictEqual(err.field, 'small0')\n  62 |       done()\n  63 |     })","start":{"column":6,"line":60}},{"frame":"  59 |     util.submitForm(parser, form, function (err, req) {\n  60 |       assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')\n> 61 |       assert.strictEqual(err.field, 'small0')\n     |      ^ Assertion Roulette\n  62 |       done()\n  63 |     })\n  64 |   })","start":{"column":6,"line":61}},{"frame":"  115 |\n  116 |     util.submitForm(parser, form, function (err, req) {\n> 117 |       assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')\n      |      ^ Assertion Roulette\n  118 |       assert.strictEqual(err.field, 'field1')\n  119 |       done()\n  120 |     })","start":{"column":6,"line":117}},{"frame":"  116 |     util.submitForm(parser, form, function (err, req) {\n  117 |       assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')\n> 118 |       assert.strictEqual(err.field, 'field1')\n      |      ^ Assertion Roulette\n  119 |       done()\n  120 |     })\n  121 |   })","start":{"column":6,"line":118}},{"frame":"  143 |\n  144 |     util.submitForm(parser, form, function (err, req) {\n> 145 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n      |      ^ Assertion Roulette\n  146 |       assert.strictEqual(err.field, 'small0')\n  147 |       done()\n  148 |     })","start":{"column":6,"line":145}},{"frame":"  144 |     util.submitForm(parser, form, function (err, req) {\n  145 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 146 |       assert.strictEqual(err.field, 'small0')\n      |      ^ Assertion Roulette\n  147 |       done()\n  148 |     })\n  149 |   })","start":{"column":6,"line":146}},{"frame":"  206 |\n  207 |     util.submitForm(parser, form, function (err, req) {\n> 208 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n      |      ^ Assertion Roulette\n  209 |       assert.strictEqual(err.field, 'small0')\n  210 |\n  211 |       assert.strictEqual(err.storageErrors.length, 1)","start":{"column":6,"line":208}},{"frame":"  207 |     util.submitForm(parser, form, function (err, req) {\n  208 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 209 |       assert.strictEqual(err.field, 'small0')\n      |      ^ Assertion Roulette\n  210 |\n  211 |       assert.strictEqual(err.storageErrors.length, 1)\n  212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')","start":{"column":6,"line":209}},{"frame":"  209 |       assert.strictEqual(err.field, 'small0')\n  210 |\n> 211 |       assert.strictEqual(err.storageErrors.length, 1)\n      |      ^ Assertion Roulette\n  212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')\n  213 |       assert.strictEqual(err.storageErrors[0].field, 'tiny0')\n  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)","start":{"column":6,"line":211}},{"frame":"  210 |\n  211 |       assert.strictEqual(err.storageErrors.length, 1)\n> 212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')\n      |      ^ Assertion Roulette\n  213 |       assert.strictEqual(err.storageErrors[0].field, 'tiny0')\n  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)\n  215 |","start":{"column":6,"line":212}},{"frame":"  211 |       assert.strictEqual(err.storageErrors.length, 1)\n  212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')\n> 213 |       assert.strictEqual(err.storageErrors[0].field, 'tiny0')\n      |      ^ Assertion Roulette\n  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)\n  215 |\n  216 |       done()","start":{"column":6,"line":213}},{"frame":"  212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')\n  213 |       assert.strictEqual(err.storageErrors[0].field, 'tiny0')\n> 214 |       assert.strictEqual(err.storageErrors[0].file, req.file)\n      |      ^ Assertion Roulette\n  215 |\n  216 |       done()\n  217 |     })","start":{"column":6,"line":214}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  10 |\n  11 | function withLimits (limits, fields) {\n> 12 |   var storage = multer.memoryStorage()\n     |  ^ Global Variable\n  13 |   return multer({ storage: storage, limits: limits }).fields(fields)\n  14 | }\n  15 |","start":{"line":12,"column":2,"index":246}},{"frame":"  16 | describe('Error Handling', function () {\n  17 |   it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\\'s error', function (done) {\n> 18 |     var form = new FormData()\n     |    ^ Global Variable\n  19 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n  20 |     var upload = multer({ storage: storage }).fields([\n  21 |       { name: 'small0', maxCount: 1 }","start":{"line":18,"column":4,"index":521}},{"frame":"  17 |   it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\\'s error', function (done) {\n  18 |     var form = new FormData()\n> 19 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n     |    ^ Global Variable\n  20 |     var upload = multer({ storage: storage }).fields([\n  21 |       { name: 'small0', maxCount: 1 }\n  22 |     ])","start":{"line":19,"column":4,"index":551}},{"frame":"  18 |     var form = new FormData()\n  19 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n> 20 |     var upload = multer({ storage: storage }).fields([\n     |    ^ Global Variable\n  21 |       { name: 'small0', maxCount: 1 }\n  22 |     ])\n  23 |","start":{"line":20,"column":4,"index":618}},{"frame":"  33 |\n  34 |   it('should respect parts limit', function (done) {\n> 35 |     var form = new FormData()\n     |    ^ Global Variable\n  36 |     var parser = withLimits({ parts: 1 }, [\n  37 |       { name: 'small0', maxCount: 1 }\n  38 |     ])","start":{"line":35,"column":4,"index":1076}},{"frame":"  34 |   it('should respect parts limit', function (done) {\n  35 |     var form = new FormData()\n> 36 |     var parser = withLimits({ parts: 1 }, [\n     |    ^ Global Variable\n  37 |       { name: 'small0', maxCount: 1 }\n  38 |     ])\n  39 |","start":{"line":36,"column":4,"index":1106}},{"frame":"  48 |\n  49 |   it('should respect file size limit', function (done) {\n> 50 |     var form = new FormData()\n     |    ^ Global Variable\n  51 |     var parser = withLimits({ fileSize: 1500 }, [\n  52 |       { name: 'tiny0', maxCount: 1 },\n  53 |       { name: 'small0', maxCount: 1 }","start":{"line":50,"column":4,"index":1477}},{"frame":"  49 |   it('should respect file size limit', function (done) {\n  50 |     var form = new FormData()\n> 51 |     var parser = withLimits({ fileSize: 1500 }, [\n     |    ^ Global Variable\n  52 |       { name: 'tiny0', maxCount: 1 },\n  53 |       { name: 'small0', maxCount: 1 }\n  54 |     ])","start":{"line":51,"column":4,"index":1507}},{"frame":"  65 |\n  66 |   it('should respect file count limit', function (done) {\n> 67 |     var form = new FormData()\n     |    ^ Global Variable\n  68 |     var parser = withLimits({ files: 1 }, [\n  69 |       { name: 'small0', maxCount: 1 },\n  70 |       { name: 'small1', maxCount: 1 }","start":{"line":67,"column":4,"index":1982}},{"frame":"  66 |   it('should respect file count limit', function (done) {\n  67 |     var form = new FormData()\n> 68 |     var parser = withLimits({ files: 1 }, [\n     |    ^ Global Variable\n  69 |       { name: 'small0', maxCount: 1 },\n  70 |       { name: 'small1', maxCount: 1 }\n  71 |     ])","start":{"line":68,"column":4,"index":2012}},{"frame":"  81 |\n  82 |   it('should respect file key limit', function (done) {\n> 83 |     var form = new FormData()\n     |    ^ Global Variable\n  84 |     var parser = withLimits({ fieldNameSize: 4 }, [\n  85 |       { name: 'small0', maxCount: 1 }\n  86 |     ])","start":{"line":83,"column":4,"index":2437}},{"frame":"  82 |   it('should respect file key limit', function (done) {\n  83 |     var form = new FormData()\n> 84 |     var parser = withLimits({ fieldNameSize: 4 }, [\n     |    ^ Global Variable\n  85 |       { name: 'small0', maxCount: 1 }\n  86 |     ])\n  87 |","start":{"line":84,"column":4,"index":2467}},{"frame":"   95 |\n   96 |   it('should respect field key limit', function (done) {\n>  97 |     var form = new FormData()\n      |    ^ Global Variable\n   98 |     var parser = withLimits({ fieldNameSize: 4 }, [])\n   99 |\n  100 |     form.append('ok', 'SMILE')","start":{"line":97,"column":4,"index":2810}},{"frame":"   96 |   it('should respect field key limit', function (done) {\n   97 |     var form = new FormData()\n>  98 |     var parser = withLimits({ fieldNameSize: 4 }, [])\n      |    ^ Global Variable\n   99 |\n  100 |     form.append('ok', 'SMILE')\n  101 |     form.append('blowup', 'BOOM!')","start":{"line":98,"column":4,"index":2840}},{"frame":"  108 |\n  109 |   it('should respect field value limit', function (done) {\n> 110 |     var form = new FormData()\n      |    ^ Global Variable\n  111 |     var parser = withLimits({ fieldSize: 16 }, [])\n  112 |\n  113 |     form.append('field0', 'This is okay')","start":{"line":110,"column":4,"index":3157}},{"frame":"  109 |   it('should respect field value limit', function (done) {\n  110 |     var form = new FormData()\n> 111 |     var parser = withLimits({ fieldSize: 16 }, [])\n      |    ^ Global Variable\n  112 |\n  113 |     form.append('field0', 'This is okay')\n  114 |     form.append('field1', 'This will make the parser explode')","start":{"line":111,"column":4,"index":3187}},{"frame":"  122 |\n  123 |   it('should respect field count limit', function (done) {\n> 124 |     var form = new FormData()\n      |    ^ Global Variable\n  125 |     var parser = withLimits({ fields: 1 }, [])\n  126 |\n  127 |     form.append('field0', 'BOOM!')","start":{"line":124,"column":4,"index":3588}},{"frame":"  123 |   it('should respect field count limit', function (done) {\n  124 |     var form = new FormData()\n> 125 |     var parser = withLimits({ fields: 1 }, [])\n      |    ^ Global Variable\n  126 |\n  127 |     form.append('field0', 'BOOM!')\n  128 |     form.append('field1', 'BOOM!')","start":{"line":125,"column":4,"index":3618}},{"frame":"  135 |\n  136 |   it('should respect fields given', function (done) {\n> 137 |     var form = new FormData()\n      |    ^ Global Variable\n  138 |     var parser = withLimits(undefined, [\n  139 |       { name: 'wrongname', maxCount: 1 }\n  140 |     ])","start":{"line":137,"column":4,"index":3929}},{"frame":"  136 |   it('should respect fields given', function (done) {\n  137 |     var form = new FormData()\n> 138 |     var parser = withLimits(undefined, [\n      |    ^ Global Variable\n  139 |       { name: 'wrongname', maxCount: 1 }\n  140 |     ])\n  141 |","start":{"line":138,"column":4,"index":3959}},{"frame":"  150 |\n  151 |   it('should notify of missing field name', function (done) {\n> 152 |     var req = new stream.PassThrough()\n      |    ^ Global Variable\n  153 |     var storage = multer.memoryStorage()\n  154 |     var upload = multer({ storage: storage }).single('tiny0')\n  155 |     var boundary = 'AaB03x'","start":{"line":152,"column":4,"index":4351}},{"frame":"  151 |   it('should notify of missing field name', function (done) {\n  152 |     var req = new stream.PassThrough()\n> 153 |     var storage = multer.memoryStorage()\n      |    ^ Global Variable\n  154 |     var upload = multer({ storage: storage }).single('tiny0')\n  155 |     var boundary = 'AaB03x'\n  156 |     var body = [","start":{"line":153,"column":4,"index":4390}},{"frame":"  152 |     var req = new stream.PassThrough()\n  153 |     var storage = multer.memoryStorage()\n> 154 |     var upload = multer({ storage: storage }).single('tiny0')\n      |    ^ Global Variable\n  155 |     var boundary = 'AaB03x'\n  156 |     var body = [\n  157 |       '--' + boundary,","start":{"line":154,"column":4,"index":4431}},{"frame":"  153 |     var storage = multer.memoryStorage()\n  154 |     var upload = multer({ storage: storage }).single('tiny0')\n> 155 |     var boundary = 'AaB03x'\n      |    ^ Global Variable\n  156 |     var body = [\n  157 |       '--' + boundary,\n  158 |       'Content-Disposition: form-data',","start":{"line":155,"column":4,"index":4493}},{"frame":"  154 |     var upload = multer({ storage: storage }).single('tiny0')\n  155 |     var boundary = 'AaB03x'\n> 156 |     var body = [\n      |    ^ Global Variable\n  157 |       '--' + boundary,\n  158 |       'Content-Disposition: form-data',\n  159 |       '',","start":{"line":156,"column":4,"index":4521}},{"frame":"  177 |\n  178 |   it('should notify of missing field name', function (done) {\n> 179 |     var form = new FormData()\n      |    ^ Global Variable\n  180 |     var storage = multer.memoryStorage()\n  181 |     var parser = multer({ storage: storage }).single('small0')\n  182 |","start":{"line":179,"column":4,"index":5018}},{"frame":"  178 |   it('should notify of missing field name', function (done) {\n  179 |     var form = new FormData()\n> 180 |     var storage = multer.memoryStorage()\n      |    ^ Global Variable\n  181 |     var parser = multer({ storage: storage }).single('small0')\n  182 |\n  183 |     form.append('', util.file('small0.dat'))","start":{"line":180,"column":4,"index":5048}},{"frame":"  179 |     var form = new FormData()\n  180 |     var storage = multer.memoryStorage()\n> 181 |     var parser = multer({ storage: storage }).single('small0')\n      |    ^ Global Variable\n  182 |\n  183 |     form.append('', util.file('small0.dat'))\n  184 |","start":{"line":181,"column":4,"index":5089}},{"frame":"  190 |\n  191 |   it('should report errors from storage engines', function (done) {\n> 192 |     var storage = multer.memoryStorage()\n      |    ^ Global Variable\n  193 |\n  194 |     storage._removeFile = function _removeFile (req, file, cb) {\n  195 |       var err = new Error('Test error')","start":{"line":192,"column":4,"index":5406}},{"frame":"  193 |\n  194 |     storage._removeFile = function _removeFile (req, file, cb) {\n> 195 |       var err = new Error('Test error')\n      |      ^ Global Variable\n  196 |       err.code = 'TEST'\n  197 |       cb(err)\n  198 |     }","start":{"line":195,"column":6,"index":5515}},{"frame":"  198 |     }\n  199 |\n> 200 |     var form = new FormData()\n      |    ^ Global Variable\n  201 |     var upload = multer({ storage: storage })\n  202 |     var parser = upload.single('tiny0')\n  203 |","start":{"line":200,"column":4,"index":5598}},{"frame":"  199 |\n  200 |     var form = new FormData()\n> 201 |     var upload = multer({ storage: storage })\n      |    ^ Global Variable\n  202 |     var parser = upload.single('tiny0')\n  203 |\n  204 |     form.append('tiny0', util.file('tiny0.dat'))","start":{"line":201,"column":4,"index":5628}},{"frame":"  200 |     var form = new FormData()\n  201 |     var upload = multer({ storage: storage })\n> 202 |     var parser = upload.single('tiny0')\n      |    ^ Global Variable\n  203 |\n  204 |     form.append('tiny0', util.file('tiny0.dat'))\n  205 |     form.append('small0', util.file('small0.dat'))","start":{"line":202,"column":4,"index":5674}},{"frame":"  219 |\n  220 |   it('should report errors from busboy constructor', function (done) {\n> 221 |     var req = new stream.PassThrough()\n      |    ^ Global Variable\n  222 |     var storage = multer.memoryStorage()\n  223 |     var upload = multer({ storage: storage }).single('tiny0')\n  224 |     var body = 'test'","start":{"line":221,"column":4,"index":6315}},{"frame":"  220 |   it('should report errors from busboy constructor', function (done) {\n  221 |     var req = new stream.PassThrough()\n> 222 |     var storage = multer.memoryStorage()\n      |    ^ Global Variable\n  223 |     var upload = multer({ storage: storage }).single('tiny0')\n  224 |     var body = 'test'\n  225 |","start":{"line":222,"column":4,"index":6354}},{"frame":"  221 |     var req = new stream.PassThrough()\n  222 |     var storage = multer.memoryStorage()\n> 223 |     var upload = multer({ storage: storage }).single('tiny0')\n      |    ^ Global Variable\n  224 |     var body = 'test'\n  225 |\n  226 |     req.headers = {","start":{"line":223,"column":4,"index":6395}},{"frame":"  222 |     var storage = multer.memoryStorage()\n  223 |     var upload = multer({ storage: storage }).single('tiny0')\n> 224 |     var body = 'test'\n      |    ^ Global Variable\n  225 |\n  226 |     req.headers = {\n  227 |       'content-type': 'multipart/form-data',","start":{"line":224,"column":4,"index":6457}},{"frame":"  238 |\n  239 |   it('should report errors from busboy parsing', function (done) {\n> 240 |     var req = new stream.PassThrough()\n      |    ^ Global Variable\n  241 |     var storage = multer.memoryStorage()\n  242 |     var upload = multer({ storage: storage }).single('tiny0')\n  243 |     var boundary = 'AaB03x'","start":{"line":240,"column":4,"index":6810}},{"frame":"  239 |   it('should report errors from busboy parsing', function (done) {\n  240 |     var req = new stream.PassThrough()\n> 241 |     var storage = multer.memoryStorage()\n      |    ^ Global Variable\n  242 |     var upload = multer({ storage: storage }).single('tiny0')\n  243 |     var boundary = 'AaB03x'\n  244 |     var body = [","start":{"line":241,"column":4,"index":6849}},{"frame":"  240 |     var req = new stream.PassThrough()\n  241 |     var storage = multer.memoryStorage()\n> 242 |     var upload = multer({ storage: storage }).single('tiny0')\n      |    ^ Global Variable\n  243 |     var boundary = 'AaB03x'\n  244 |     var body = [\n  245 |       '--' + boundary,","start":{"line":242,"column":4,"index":6890}},{"frame":"  241 |     var storage = multer.memoryStorage()\n  242 |     var upload = multer({ storage: storage }).single('tiny0')\n> 243 |     var boundary = 'AaB03x'\n      |    ^ Global Variable\n  244 |     var body = [\n  245 |       '--' + boundary,\n  246 |       'Content-Disposition: form-data; name=\"tiny0\"; filename=\"test.txt\"',","start":{"line":243,"column":4,"index":6952}},{"frame":"  242 |     var upload = multer({ storage: storage }).single('tiny0')\n  243 |     var boundary = 'AaB03x'\n> 244 |     var body = [\n      |    ^ Global Variable\n  245 |       '--' + boundary,\n  246 |       'Content-Disposition: form-data; name=\"tiny0\"; filename=\"test.txt\"',\n  247 |       'Content-Type: text/plain',","start":{"line":244,"column":4,"index":6980}},{"frame":"  264 |\n  265 |   it('should gracefully handle more than one error at a time', function (done) {\n> 266 |     var form = new FormData()\n      |    ^ Global Variable\n  267 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n  268 |     var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([\n  269 |       { name: 'small0', maxCount: 1 }","start":{"line":266,"column":4,"index":7552}},{"frame":"  265 |   it('should gracefully handle more than one error at a time', function (done) {\n  266 |     var form = new FormData()\n> 267 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n      |    ^ Global Variable\n  268 |     var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([\n  269 |       { name: 'small0', maxCount: 1 }\n  270 |     ])","start":{"line":267,"column":4,"index":7582}},{"frame":"  266 |     var form = new FormData()\n  267 |     var storage = multer.diskStorage({ destination: os.tmpdir() })\n> 268 |     var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([\n      |    ^ Global Variable\n  269 |       { name: 'small0', maxCount: 1 }\n  270 |     ])\n  271 |","start":{"line":268,"column":4,"index":7649}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  209 |       assert.strictEqual(err.field, 'small0')\n  210 |\n> 211 |       assert.strictEqual(err.storageErrors.length, 1)\n      |                                                   ^ Magic Number\n  212 |       assert.strictEqual(err.storageErrors[0].code, 'TEST')\n  213 |       assert.strictEqual(err.storageErrors[0].field, 'tiny0')\n  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)","start":{"line":211,"column":51,"index":6026}}]}],"metrics":{"aggregate":{"cyclomatic":34,"cyclomaticDensity":11.888,"halstead":{"bugs":2.853,"difficulty":35.967,"effort":307804.805,"length":1213,"time":17100.267,"vocabulary":133,"volume":8558.058,"operands":{"distinct":120,"total":664,"identifiers":["assert","require","\"assert\"","os","\"os\"","util","\"./_util\"","multer","\"../\"","stream","\"stream\"","FormData","\"form-data\"","withLimits","limits","fields","storage","memoryStorage","describe","\"Error Handling\"","it","\"should be an instance of both `Error` and `MulterError` classes in case of the Multer's error\"","done","form","diskStorage","destination","tmpdir","upload","name","\"small0\"","maxCount","1","append","file","\"small0.dat\"","submitForm","err","req","strictEqual","Error","true","MulterError","\"should respect parts limit\"","parser","parts","\"field0\"","\"BOOM!\"","code","\"LIMIT_PART_COUNT\"","\"should respect file size limit\"","fileSize","1500","\"tiny0\"","\"tiny0.dat\"","\"LIMIT_FILE_SIZE\"","field","\"should respect file count limit\"","files","\"small1\"","\"small1.dat\"","\"LIMIT_FILE_COUNT\"","\"should respect file key limit\"","fieldNameSize","4","\"LIMIT_FIELD_KEY\"","\"should respect field key limit\"","\"ok\"","\"SMILE\"","\"blowup\"","\"should respect field value limit\"","fieldSize","16","\"This is okay\"","\"field1\"","\"This will make the parser explode\"","\"LIMIT_FIELD_VALUE\"","\"should respect field count limit\"","\"LIMIT_FIELD_COUNT\"","\"should respect fields given\"","undefined","\"wrongname\"","\"LIMIT_UNEXPECTED_FILE\"","\"should notify of missing field name\"","PassThrough","single","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data\"","\"\"","\"test content\"","join","\"\r\n\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","end","null","\"MISSING_FIELD_NAME\"","\"should report errors from storage engines\"","_removeFile","cb","\"Test error\"","\"TEST\"","storageErrors","0","\"should report errors from busboy constructor\"","\"test\"","\"multipart/form-data\"","message","\"Multipart: Boundary not found\"","\"should report errors from busboy parsing\"","\"Content-Disposition: form-data; name=\"tiny0\"; filename=\"test.txt\"\"","\"Content-Type: text/plain\"","\"test without end boundary\"","\"Unexpected end of form\"","\"should gracefully handle more than one error at a time\""]},"operators":{"distinct":13,"total":549,"identifiers":["var","=","()","function",".","return","{}",":","new","[]","instanceof",",","+"]}},"paramCount":47,"sloc":{"logical":286,"physical":281}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":281,"lineStart":1,"maintainability":105.341,"methods":[{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.025,"difficulty":7,"effort":526.989,"length":21,"time":29.277,"vocabulary":12,"volume":75.284,"operands":{"distinct":5,"total":10,"identifiers":["storage","multer","memoryStorage","limits","fields"]},"operators":{"distinct":7,"total":11,"identifiers":["var","=","()",".","return","{}",":"]}},"paramCount":2,"sloc":{"logical":7,"physical":4},"errors":[],"lineEnd":14,"lineStart":11,"name":"withLimits","paramNames":["limits","fields"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":3.333,"halstead":{"bugs":0.104,"difficulty":2.813,"effort":879.594,"length":75,"time":48.866,"vocabulary":18,"volume":312.744,"operands":{"distinct":16,"total":45,"identifiers":["it","\"should be an instance of both `Error` and `MulterError` classes in case of the Multer's error\"","done","\"should respect parts limit\"","\"should respect file size limit\"","\"should respect file count limit\"","\"should respect file key limit\"","\"should respect field key limit\"","\"should respect field value limit\"","\"should respect field count limit\"","\"should respect fields given\"","\"should notify of missing field name\"","\"should report errors from storage engines\"","\"should report errors from busboy constructor\"","\"should report errors from busboy parsing\"","\"should gracefully handle more than one error at a time\""]},"operators":{"distinct":2,"total":30,"identifiers":["()","function"]}},"paramCount":0,"sloc":{"logical":30,"physical":265},"errors":[],"lineEnd":280,"lineStart":16,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.882,"halstead":{"bugs":0.111,"difficulty":7.5,"effort":2502.514,"length":68,"time":139.029,"vocabulary":30,"volume":333.669,"operands":{"distinct":21,"total":35,"identifiers":["form","FormData","storage","multer","diskStorage","destination","os","tmpdir","upload","fields","name","\"small0\"","maxCount","1","append","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":9,"total":33,"identifiers":["var","=","new","()",".","{}",":","[]","function"]}},"paramCount":1,"sloc":{"logical":17,"physical":16},"errors":[],"lineEnd":32,"lineStart":17,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.023,"difficulty":2.25,"effort":155.674,"length":20,"time":8.649,"vocabulary":11,"volume":69.189,"operands":{"distinct":8,"total":12,"identifiers":["assert","strictEqual","err","Error","true","multer","MulterError","done"]},"operators":{"distinct":3,"total":8,"identifiers":["()",".","instanceof"]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":31,"lineStart":27,"name":"<anon method-3>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":9.091,"halstead":{"bugs":0.074,"difficulty":6.5,"effort":1452.618,"length":47,"time":80.701,"vocabulary":27,"volume":223.48,"operands":{"distinct":18,"total":26,"identifiers":["form","FormData","parser","withLimits","parts","1","name","\"small0\"","maxCount","append","\"field0\"","\"BOOM!\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":9,"total":21,"identifiers":["var","=","new","()","{}",":","[]",".","function"]}},"paramCount":1,"sloc":{"logical":11,"physical":14},"errors":[],"lineEnd":47,"lineStart":34,"name":"<anon method-4>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_PART_COUNT\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":46,"lineStart":43,"name":"<anon method-5>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":7.143,"halstead":{"bugs":0.096,"difficulty":8.421,"effort":2413.65,"length":59,"time":134.092,"vocabulary":29,"volume":286.621,"operands":{"distinct":19,"total":32,"identifiers":["form","FormData","parser","withLimits","fileSize","1500","name","\"tiny0\"","maxCount","1","\"small0\"","append","util","file","\"tiny0.dat\"","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":10,"total":27,"identifiers":["var","=","new","()","{}",":","[]",",",".","function"]}},"paramCount":1,"sloc":{"logical":14,"physical":16},"errors":[],"lineEnd":64,"lineStart":49,"name":"<anon method-6>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FILE_SIZE\"","field","\"small0\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":63,"lineStart":59,"name":"<anon method-7>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":7.143,"halstead":{"bugs":0.095,"difficulty":8.889,"effort":2521.191,"length":59,"time":140.066,"vocabulary":28,"volume":283.634,"operands":{"distinct":18,"total":32,"identifiers":["form","FormData","parser","withLimits","files","1","name","\"small0\"","maxCount","\"small1\"","append","util","file","\"small0.dat\"","\"small1.dat\"","submitForm","err","req"]},"operators":{"distinct":10,"total":27,"identifiers":["var","=","new","()","{}",":","[]",",",".","function"]}},"paramCount":1,"sloc":{"logical":14,"physical":15},"errors":[],"lineEnd":80,"lineStart":66,"name":"<anon method-8>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FILE_COUNT\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":79,"lineStart":76,"name":"<anon method-9>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":10,"halstead":{"bugs":0.064,"difficulty":5.824,"effort":1122.299,"length":41,"time":62.35,"vocabulary":26,"volume":192.718,"operands":{"distinct":17,"total":22,"identifiers":["form","FormData","parser","withLimits","fieldNameSize","4","name","\"small0\"","maxCount","1","append","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":9,"total":19,"identifiers":["var","=","new","()","{}",":","[]",".","function"]}},"paramCount":1,"sloc":{"logical":10,"physical":13},"errors":[],"lineEnd":94,"lineStart":82,"name":"<anon method-10>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FIELD_KEY\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":93,"lineStart":90,"name":"<anon method-11>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.055,"difficulty":6,"effort":990.352,"length":36,"time":55.02,"vocabulary":24,"volume":165.059,"operands":{"distinct":15,"total":20,"identifiers":["form","FormData","parser","withLimits","fieldNameSize","4","append","\"ok\"","\"SMILE\"","\"blowup\"","\"BOOM!\"","util","submitForm","err","req"]},"operators":{"distinct":9,"total":16,"identifiers":["var","=","new","()","{}",":","[]",".","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":12},"errors":[],"lineEnd":107,"lineStart":96,"name":"<anon method-12>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FIELD_KEY\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":106,"lineStart":103,"name":"<anon method-13>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.055,"difficulty":6,"effort":990.352,"length":36,"time":55.02,"vocabulary":24,"volume":165.059,"operands":{"distinct":15,"total":20,"identifiers":["form","FormData","parser","withLimits","fieldSize","16","append","\"field0\"","\"This is okay\"","\"field1\"","\"This will make the parser explode\"","util","submitForm","err","req"]},"operators":{"distinct":9,"total":16,"identifiers":["var","=","new","()","{}",":","[]",".","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":13},"errors":[],"lineEnd":121,"lineStart":109,"name":"<anon method-14>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FIELD_VALUE\"","field","\"field1\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":120,"lineStart":116,"name":"<anon method-15>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.054,"difficulty":6.429,"effort":1046.881,"length":36,"time":58.16,"vocabulary":23,"volume":162.848,"operands":{"distinct":14,"total":20,"identifiers":["form","FormData","parser","withLimits","fields","1","append","\"field0\"","\"BOOM!\"","\"field1\"","util","submitForm","err","req"]},"operators":{"distinct":9,"total":16,"identifiers":["var","=","new","()","{}",":","[]",".","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":12},"errors":[],"lineEnd":134,"lineStart":123,"name":"<anon method-16>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FIELD_COUNT\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":133,"lineStart":130,"name":"<anon method-17>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.06,"difficulty":5.559,"effort":992.899,"length":38,"time":55.161,"vocabulary":26,"volume":178.617,"operands":{"distinct":17,"total":21,"identifiers":["form","FormData","parser","withLimits","undefined","name","\"wrongname\"","maxCount","1","append","\"small0\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":9,"total":17,"identifiers":["var","=","new","()","[]","{}",":",".","function"]}},"paramCount":1,"sloc":{"logical":9,"physical":14},"errors":[],"lineEnd":149,"lineStart":136,"name":"<anon method-18>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.02,"difficulty":1.375,"effort":82.218,"length":18,"time":4.568,"vocabulary":10,"volume":59.795,"operands":{"distinct":8,"total":11,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"small0\"","done"]},"operators":{"distinct":2,"total":7,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":148,"lineStart":144,"name":"<anon method-19>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.139,"difficulty":8.462,"effort":3526.399,"length":80,"time":195.911,"vocabulary":37,"volume":416.756,"operands":{"distinct":26,"total":40,"identifiers":["req","stream","PassThrough","storage","multer","memoryStorage","upload","single","\"tiny0\"","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data\"","\"\"","\"test content\"","join","\"\r\n\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","end","null","err"]},"operators":{"distinct":11,"total":40,"identifiers":["var","=","new",".","()","{}",":","[]",",","+","function"]}},"paramCount":1,"sloc":{"logical":16,"physical":26},"errors":[],"lineEnd":176,"lineStart":151,"name":"<anon method-20>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"MISSING_FIELD_NAME\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":175,"lineStart":172,"name":"<anon method-21>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":9.091,"halstead":{"bugs":0.067,"difficulty":5.75,"effort":1159.996,"length":44,"time":64.444,"vocabulary":24,"volume":201.738,"operands":{"distinct":16,"total":23,"identifiers":["form","FormData","storage","multer","memoryStorage","parser","single","\"small0\"","append","\"\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":8,"total":21,"identifiers":["var","=","new","()",".","{}",":","function"]}},"paramCount":1,"sloc":{"logical":11,"physical":12},"errors":[],"lineEnd":189,"lineStart":178,"name":"<anon method-22>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"MISSING_FIELD_NAME\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":188,"lineStart":185,"name":"<anon method-23>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.107,"difficulty":7.4,"effort":2383.487,"length":67,"time":132.416,"vocabulary":28,"volume":322.093,"operands":{"distinct":20,"total":37,"identifiers":["storage","multer","memoryStorage","_removeFile","req","file","cb","form","FormData","upload","parser","single","\"tiny0\"","append","util","\"tiny0.dat\"","\"small0\"","\"small0.dat\"","submitForm","err"]},"operators":{"distinct":8,"total":30,"identifiers":["var","=","()",".","function","new","{}",":"]}},"paramCount":1,"sloc":{"logical":16,"physical":28},"errors":[],"lineEnd":218,"lineStart":191,"name":"<anon method-24>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":33.333,"halstead":{"bugs":0.016,"difficulty":3.333,"effort":161.44,"length":14,"time":8.969,"vocabulary":11,"volume":48.432,"operands":{"distinct":6,"total":8,"identifiers":["err","Error","\"Test error\"","code","\"TEST\"","cb"]},"operators":{"distinct":5,"total":6,"identifiers":["var","=","new",".","()"]}},"paramCount":3,"sloc":{"logical":3,"physical":5},"errors":[],"lineEnd":198,"lineStart":194,"name":"_removeFile","paramNames":["req","file","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":14.286,"halstead":{"bugs":0.093,"difficulty":3.656,"effort":1025.078,"length":66,"time":56.949,"vocabulary":19,"volume":280.363,"operands":{"distinct":16,"total":39,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"small0\"","storageErrors","length","1","0","\"TEST\"","\"tiny0\"","file","req","done"]},"operators":{"distinct":3,"total":27,"identifiers":["()",".","[]"]}},"paramCount":2,"sloc":{"logical":7,"physical":11},"errors":[],"lineEnd":217,"lineStart":207,"name":"<anon method-25>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":7.143,"halstead":{"bugs":0.087,"difficulty":5.895,"effort":1541.585,"length":55,"time":85.644,"vocabulary":27,"volume":261.519,"operands":{"distinct":19,"total":28,"identifiers":["req","stream","PassThrough","storage","multer","memoryStorage","upload","single","\"tiny0\"","body","\"test\"","headers","\"content-type\"","\"multipart/form-data\"","\"content-length\"","length","end","null","err"]},"operators":{"distinct":8,"total":27,"identifiers":["var","=","new",".","()","{}",":","function"]}},"paramCount":1,"sloc":{"logical":14,"physical":18},"errors":[],"lineEnd":237,"lineStart":220,"name":"<anon method-26>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","message","\"Multipart: Boundary not found\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":236,"lineStart":233,"name":"<anon method-27>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.133,"difficulty":7.741,"effort":3087.336,"length":76,"time":171.519,"vocabulary":38,"volume":398.842,"operands":{"distinct":27,"total":38,"identifiers":["req","stream","PassThrough","storage","multer","memoryStorage","upload","single","\"tiny0\"","boundary","\"AaB03x\"","body","\"--\"","\"Content-Disposition: form-data; name=\"tiny0\"; filename=\"test.txt\"\"","\"Content-Type: text/plain\"","\"\"","\"test without end boundary\"","join","\"\r\n\"","headers","\"content-type\"","\"multipart/form-data; boundary=\"","\"content-length\"","length","end","null","err"]},"operators":{"distinct":11,"total":38,"identifiers":["var","=","new",".","()","{}",":","[]",",","+","function"]}},"paramCount":1,"sloc":{"logical":16,"physical":25},"errors":[],"lineEnd":263,"lineStart":239,"name":"<anon method-28>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","message","\"Unexpected end of form\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":1,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":262,"lineStart":259,"name":"<anon method-29>","paramNames":["err"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5,"halstead":{"bugs":0.129,"difficulty":7.5,"effort":2913.138,"length":77,"time":161.841,"vocabulary":33,"volume":388.418,"operands":{"distinct":24,"total":40,"identifiers":["form","FormData","storage","multer","diskStorage","destination","os","tmpdir","upload","limits","fileSize","1","files","fields","name","\"small0\"","maxCount","append","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":9,"total":37,"identifiers":["var","=","new","()",".","{}",":","[]","function"]}},"paramCount":1,"sloc":{"logical":20,"physical":15},"errors":[],"lineEnd":279,"lineStart":265,"name":"<anon method-30>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.01,"difficulty":1,"effort":30,"length":10,"time":1.667,"vocabulary":8,"volume":30,"operands":{"distinct":6,"total":6,"identifiers":["assert","strictEqual","err","code","\"LIMIT_FILE_SIZE\"","done"]},"operators":{"distinct":2,"total":4,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":2,"physical":4},"errors":[],"lineEnd":278,"lineStart":275,"name":"<anon method-31>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1,"cyclomaticDensity":0.35,"halstead":{"bugs":0.084,"difficulty":1.058,"effort":9053.082,"length":35.676,"time":502.949,"vocabulary":3.912,"volume":251.708,"operands":{"distinct":3.529,"total":19.529},"operators":{"distinct":0.382,"total":16.147}},"paramCount":1.382,"sloc":{"logical":8.412,"physical":8.265}},"methodAverage":{"cyclomatic":1,"cyclomaticDensity":25.043,"halstead":{"bugs":0.053,"difficulty":4.153,"effort":967.883,"length":35.424,"time":53.771,"vocabulary":18.333,"volume":158.984,"operands":{"distinct":12.758,"total":19.424},"operators":{"distinct":5.576,"total":16}},"paramCount":1.424,"sloc":{"logical":8.212,"physical":18}}}},{"path":"/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/multer/test/disk-storage.js","testCases":5,"smells":84,"smellInfo":[{"name":"Assertion Roulette","packageName":"assertionRoulette","items":[{"frame":"  39 |       assert.ifError(err)\n  40 |\n> 41 |       assert.strictEqual(req.body.name, 'Multer')\n     |      ^ Assertion Roulette\n  42 |\n  43 |       assert.strictEqual(req.file.fieldname, 'small0')\n  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')","start":{"column":6,"line":41}},{"frame":"  41 |       assert.strictEqual(req.body.name, 'Multer')\n  42 |\n> 43 |       assert.strictEqual(req.file.fieldname, 'small0')\n     |      ^ Assertion Roulette\n  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  45 |       assert.strictEqual(req.file.size, 1778)\n  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)","start":{"column":6,"line":43}},{"frame":"  42 |\n  43 |       assert.strictEqual(req.file.fieldname, 'small0')\n> 44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n     |      ^ Assertion Roulette\n  45 |       assert.strictEqual(req.file.size, 1778)\n  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)\n  47 |","start":{"column":6,"line":44}},{"frame":"  43 |       assert.strictEqual(req.file.fieldname, 'small0')\n  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n> 45 |       assert.strictEqual(req.file.size, 1778)\n     |      ^ Assertion Roulette\n  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)\n  47 |\n  48 |       done()","start":{"column":6,"line":45}},{"frame":"  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  45 |       assert.strictEqual(req.file.size, 1778)\n> 46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)\n     |      ^ Assertion Roulette\n  47 |\n  48 |       done()\n  49 |     })","start":{"column":6,"line":46}},{"frame":"  68 |       assert.ifError(err)\n  69 |\n> 70 |       assert.strictEqual(req.body.name, 'Multer')\n     |      ^ Assertion Roulette\n  71 |       assert.strictEqual(req.body.version, '')\n  72 |       assert.strictEqual(req.body.year, '')\n  73 |","start":{"column":6,"line":70}},{"frame":"  69 |\n  70 |       assert.strictEqual(req.body.name, 'Multer')\n> 71 |       assert.strictEqual(req.body.version, '')\n     |      ^ Assertion Roulette\n  72 |       assert.strictEqual(req.body.year, '')\n  73 |\n  74 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))","start":{"column":6,"line":71}},{"frame":"  70 |       assert.strictEqual(req.body.name, 'Multer')\n  71 |       assert.strictEqual(req.body.version, '')\n> 72 |       assert.strictEqual(req.body.year, '')\n     |      ^ Assertion Roulette\n  73 |\n  74 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n  75 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))","start":{"column":6,"line":72}},{"frame":"  72 |       assert.strictEqual(req.body.year, '')\n  73 |\n> 74 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n     |      ^ Assertion Roulette\n  75 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n  76 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  77 |","start":{"column":6,"line":74}},{"frame":"  73 |\n  74 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n> 75 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n     |      ^ Assertion Roulette\n  76 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  77 |\n  78 |       assert.strictEqual(req.file.fieldname, 'empty')","start":{"column":6,"line":75}},{"frame":"  74 |       assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))\n  75 |       assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))\n> 76 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n     |      ^ Assertion Roulette\n  77 |\n  78 |       assert.strictEqual(req.file.fieldname, 'empty')\n  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')","start":{"column":6,"line":76}},{"frame":"  76 |       assert(deepEqual(req.body.checkboxempty, ['', '']))\n  77 |\n> 78 |       assert.strictEqual(req.file.fieldname, 'empty')\n     |      ^ Assertion Roulette\n  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  80 |       assert.strictEqual(req.file.size, 0)\n  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)","start":{"column":6,"line":78}},{"frame":"  77 |\n  78 |       assert.strictEqual(req.file.fieldname, 'empty')\n> 79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n     |      ^ Assertion Roulette\n  80 |       assert.strictEqual(req.file.size, 0)\n  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)\n  82 |","start":{"column":6,"line":79}},{"frame":"  78 |       assert.strictEqual(req.file.fieldname, 'empty')\n  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n> 80 |       assert.strictEqual(req.file.size, 0)\n     |      ^ Assertion Roulette\n  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)\n  82 |\n  83 |       done()","start":{"column":6,"line":80}},{"frame":"  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  80 |       assert.strictEqual(req.file.size, 0)\n> 81 |       assert.strictEqual(util.fileSize(req.file.path), 0)\n     |      ^ Assertion Roulette\n  82 |\n  83 |       done()\n  84 |     })","start":{"column":6,"line":81}},{"frame":"  108 |       assert.ifError(err)\n  109 |\n> 110 |       assert(deepEqual(req.body, {}))\n      |      ^ Assertion Roulette\n  111 |\n  112 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')","start":{"column":6,"line":110}},{"frame":"  110 |       assert(deepEqual(req.body, {}))\n  111 |\n> 112 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n      |      ^ Assertion Roulette\n  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  114 |       assert.strictEqual(req.files.empty[0].size, 0)\n  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)","start":{"column":6,"line":112}},{"frame":"  111 |\n  112 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n> 113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n      |      ^ Assertion Roulette\n  114 |       assert.strictEqual(req.files.empty[0].size, 0)\n  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n  116 |","start":{"column":6,"line":113}},{"frame":"  112 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n> 114 |       assert.strictEqual(req.files.empty[0].size, 0)\n      |      ^ Assertion Roulette\n  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n  116 |\n  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')","start":{"column":6,"line":114}},{"frame":"  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  114 |       assert.strictEqual(req.files.empty[0].size, 0)\n> 115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n      |      ^ Assertion Roulette\n  116 |\n  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')","start":{"column":6,"line":115}},{"frame":"  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n  116 |\n> 117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n      |      ^ Assertion Roulette\n  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)","start":{"column":6,"line":117}},{"frame":"  116 |\n  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n> 118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n      |      ^ Assertion Roulette\n  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n  121 |","start":{"column":6,"line":118}},{"frame":"  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n> 119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n      |      ^ Assertion Roulette\n  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n  121 |\n  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')","start":{"column":6,"line":119}},{"frame":"  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n> 120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n      |      ^ Assertion Roulette\n  121 |\n  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')","start":{"column":6,"line":120}},{"frame":"  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n  121 |\n> 122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n      |      ^ Assertion Roulette\n  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)","start":{"column":6,"line":122}},{"frame":"  121 |\n  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n> 123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n      |      ^ Assertion Roulette\n  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n  126 |","start":{"column":6,"line":123}},{"frame":"  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n> 124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n      |      ^ Assertion Roulette\n  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n  126 |\n  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')","start":{"column":6,"line":124}},{"frame":"  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n> 125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n      |      ^ Assertion Roulette\n  126 |\n  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')","start":{"column":6,"line":125}},{"frame":"  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n  126 |\n> 127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n      |      ^ Assertion Roulette\n  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)","start":{"column":6,"line":127}},{"frame":"  126 |\n  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n> 128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n      |      ^ Assertion Roulette\n  129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n  131 |","start":{"column":6,"line":128}},{"frame":"  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n> 129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n      |      ^ Assertion Roulette\n  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n  131 |\n  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')","start":{"column":6,"line":129}},{"frame":"  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n> 130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n      |      ^ Assertion Roulette\n  131 |\n  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')","start":{"column":6,"line":130}},{"frame":"  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n  131 |\n> 132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n      |      ^ Assertion Roulette\n  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  134 |       assert.strictEqual(req.files.small1[0].size, 315)\n  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)","start":{"column":6,"line":132}},{"frame":"  131 |\n  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n> 133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n      |      ^ Assertion Roulette\n  134 |       assert.strictEqual(req.files.small1[0].size, 315)\n  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n  136 |","start":{"column":6,"line":133}},{"frame":"  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n> 134 |       assert.strictEqual(req.files.small1[0].size, 315)\n      |      ^ Assertion Roulette\n  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n  136 |\n  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')","start":{"column":6,"line":134}},{"frame":"  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  134 |       assert.strictEqual(req.files.small1[0].size, 315)\n> 135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n      |      ^ Assertion Roulette\n  136 |\n  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')","start":{"column":6,"line":135}},{"frame":"  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n  136 |\n> 137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n      |      ^ Assertion Roulette\n  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)","start":{"column":6,"line":137}},{"frame":"  136 |\n  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n> 138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n      |      ^ Assertion Roulette\n  139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n  141 |","start":{"column":6,"line":138}},{"frame":"  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n> 139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n      |      ^ Assertion Roulette\n  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n  141 |\n  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')","start":{"column":6,"line":139}},{"frame":"  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n> 140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n      |      ^ Assertion Roulette\n  141 |\n  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')","start":{"column":6,"line":140}},{"frame":"  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n  141 |\n> 142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n      |      ^ Assertion Roulette\n  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)","start":{"column":6,"line":142}},{"frame":"  141 |\n  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n> 143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n      |      ^ Assertion Roulette\n  144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)\n  146 |","start":{"column":6,"line":143}},{"frame":"  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n> 144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n      |      ^ Assertion Roulette\n  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)\n  146 |\n  147 |       done()","start":{"column":6,"line":144}},{"frame":"  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n> 145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)\n      |      ^ Assertion Roulette\n  146 |\n  147 |       done()\n  148 |     })","start":{"column":6,"line":145}},{"frame":"  157 |\n  158 |     util.submitForm(parser, form, function (err, req) {\n> 159 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n      |      ^ Assertion Roulette\n  160 |       assert.strictEqual(err.field, 'small0')\n  161 |       assert(deepEqual(err.storageErrors, []))\n  162 |","start":{"column":6,"line":159}},{"frame":"  158 |     util.submitForm(parser, form, function (err, req) {\n  159 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n> 160 |       assert.strictEqual(err.field, 'small0')\n      |      ^ Assertion Roulette\n  161 |       assert(deepEqual(err.storageErrors, []))\n  162 |\n  163 |       var files = fs.readdirSync(uploadDir)","start":{"column":6,"line":160}},{"frame":"  159 |       assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')\n  160 |       assert.strictEqual(err.field, 'small0')\n> 161 |       assert(deepEqual(err.storageErrors, []))\n      |      ^ Assertion Roulette\n  162 |\n  163 |       var files = fs.readdirSync(uploadDir)\n  164 |       assert(deepEqual(files, []))","start":{"column":6,"line":161}},{"frame":"  162 |\n  163 |       var files = fs.readdirSync(uploadDir)\n> 164 |       assert(deepEqual(files, []))\n      |      ^ Assertion Roulette\n  165 |\n  166 |       done()\n  167 |     })","start":{"column":6,"line":164}},{"frame":"  180 |\n  181 |     util.submitForm(parser, form, function (err, req) {\n> 182 |       assert.strictEqual(err.code, 'ENOENT')\n      |      ^ Assertion Roulette\n  183 |       assert.strictEqual(path.dirname(err.path), directory)\n  184 |\n  185 |       done()","start":{"column":6,"line":182}},{"frame":"  181 |     util.submitForm(parser, form, function (err, req) {\n  182 |       assert.strictEqual(err.code, 'ENOENT')\n> 183 |       assert.strictEqual(path.dirname(err.path), directory)\n      |      ^ Assertion Roulette\n  184 |\n  185 |       done()\n  186 |     })","start":{"column":6,"line":183}}]},{"name":"Conditional Test Logic","packageName":"conditionalTestLogic","items":[{"frame":"  17 |   beforeEach(function (done) {\n  18 |     temp.mkdir(function (err, path) {\n> 19 |       if (err) return done(err)\n     |      ^ Conditional Test Logic\n  20 |\n  21 |       uploadDir = path\n  22 |       upload = multer({ dest: path })","start":{"line":19,"column":6,"index":439}}]},{"name":"Global Variable","packageName":"globalVariable","items":[{"frame":"  13 |\n  14 | describe('Disk Storage', function () {\n> 15 |   var uploadDir, upload\n     |  ^ Global Variable\n  16 |\n  17 |   beforeEach(function (done) {\n  18 |     temp.mkdir(function (err, path) {","start":{"line":15,"column":2,"index":341}},{"frame":"  30 |\n  31 |   it('should process parser/form-data POST request', function (done) {\n> 32 |     var form = new FormData()\n     |    ^ Global Variable\n  33 |     var parser = upload.single('small0')\n  34 |\n  35 |     form.append('name', 'Multer')","start":{"line":32,"column":4,"index":692}},{"frame":"  31 |   it('should process parser/form-data POST request', function (done) {\n  32 |     var form = new FormData()\n> 33 |     var parser = upload.single('small0')\n     |    ^ Global Variable\n  34 |\n  35 |     form.append('name', 'Multer')\n  36 |     form.append('small0', util.file('small0.dat'))","start":{"line":33,"column":4,"index":722}},{"frame":"  51 |\n  52 |   it('should process empty fields and an empty file', function (done) {\n> 53 |     var form = new FormData()\n     |    ^ Global Variable\n  54 |     var parser = upload.single('empty')\n  55 |\n  56 |     form.append('empty', util.file('empty.dat'))","start":{"line":53,"column":4,"index":1307}},{"frame":"  52 |   it('should process empty fields and an empty file', function (done) {\n  53 |     var form = new FormData()\n> 54 |     var parser = upload.single('empty')\n     |    ^ Global Variable\n  55 |\n  56 |     form.append('empty', util.file('empty.dat'))\n  57 |     form.append('name', 'Multer')","start":{"line":54,"column":4,"index":1337}},{"frame":"  86 |\n  87 |   it('should process multiple files', function (done) {\n> 88 |     var form = new FormData()\n     |    ^ Global Variable\n  89 |     var parser = upload.fields([\n  90 |       { name: 'empty', maxCount: 1 },\n  91 |       { name: 'tiny0', maxCount: 1 },","start":{"line":88,"column":4,"index":2469}},{"frame":"  87 |   it('should process multiple files', function (done) {\n  88 |     var form = new FormData()\n> 89 |     var parser = upload.fields([\n     |    ^ Global Variable\n  90 |       { name: 'empty', maxCount: 1 },\n  91 |       { name: 'tiny0', maxCount: 1 },\n  92 |       { name: 'tiny1', maxCount: 1 },","start":{"line":89,"column":4,"index":2499}},{"frame":"  150 |\n  151 |   it('should remove uploaded files on error', function (done) {\n> 152 |     var form = new FormData()\n      |    ^ Global Variable\n  153 |     var parser = upload.single('tiny0')\n  154 |\n  155 |     form.append('tiny0', util.file('tiny0.dat'))","start":{"line":152,"column":4,"index":5221}},{"frame":"  151 |   it('should remove uploaded files on error', function (done) {\n  152 |     var form = new FormData()\n> 153 |     var parser = upload.single('tiny0')\n      |    ^ Global Variable\n  154 |\n  155 |     form.append('tiny0', util.file('tiny0.dat'))\n  156 |     form.append('small0', util.file('small0.dat'))","start":{"line":153,"column":4,"index":5251}},{"frame":"  161 |       assert(deepEqual(err.storageErrors, []))\n  162 |\n> 163 |       var files = fs.readdirSync(uploadDir)\n      |      ^ Global Variable\n  164 |       assert(deepEqual(files, []))\n  165 |\n  166 |       done()","start":{"line":163,"column":6,"index":5605}},{"frame":"  169 |\n  170 |   it('should report error when directory doesn\\'t exist', function (done) {\n> 171 |     var directory = path.join(temp.mkdirSync(), 'ghost')\n      |    ^ Global Variable\n  172 |     function dest ($0, $1, cb) { cb(null, directory) }\n  173 |\n  174 |     var storage = multer.diskStorage({ destination: dest })","start":{"line":171,"column":4,"index":5785}},{"frame":"  172 |     function dest ($0, $1, cb) { cb(null, directory) }\n  173 |\n> 174 |     var storage = multer.diskStorage({ destination: dest })\n      |    ^ Global Variable\n  175 |     var upload = multer({ storage: storage })\n  176 |     var parser = upload.single('tiny0')\n  177 |     var form = new FormData()","start":{"line":174,"column":4,"index":5898}},{"frame":"  173 |\n  174 |     var storage = multer.diskStorage({ destination: dest })\n> 175 |     var upload = multer({ storage: storage })\n      |    ^ Global Variable\n  176 |     var parser = upload.single('tiny0')\n  177 |     var form = new FormData()\n  178 |","start":{"line":175,"column":4,"index":5958}},{"frame":"  174 |     var storage = multer.diskStorage({ destination: dest })\n  175 |     var upload = multer({ storage: storage })\n> 176 |     var parser = upload.single('tiny0')\n      |    ^ Global Variable\n  177 |     var form = new FormData()\n  178 |\n  179 |     form.append('tiny0', util.file('tiny0.dat'))","start":{"line":176,"column":4,"index":6004}},{"frame":"  175 |     var upload = multer({ storage: storage })\n  176 |     var parser = upload.single('tiny0')\n> 177 |     var form = new FormData()\n      |    ^ Global Variable\n  178 |\n  179 |     form.append('tiny0', util.file('tiny0.dat'))\n  180 |","start":{"line":177,"column":4,"index":6044}}]},{"name":"Magic Number","packageName":"magicNumberRule","items":[{"frame":"  43 |       assert.strictEqual(req.file.fieldname, 'small0')\n  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n> 45 |       assert.strictEqual(req.file.size, 1778)\n     |                                        ^ Magic Number\n  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)\n  47 |\n  48 |       done()","start":{"line":45,"column":40,"index":1137}},{"frame":"  44 |       assert.strictEqual(req.file.originalname, 'small0.dat')\n  45 |       assert.strictEqual(req.file.size, 1778)\n> 46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)\n     |                                                       ^ Magic Number\n  47 |\n  48 |       done()\n  49 |     })","start":{"line":46,"column":55,"index":1198}},{"frame":"  78 |       assert.strictEqual(req.file.fieldname, 'empty')\n  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n> 80 |       assert.strictEqual(req.file.size, 0)\n     |                                        ^ Magic Number\n  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)\n  82 |\n  83 |       done()","start":{"line":80,"column":40,"index":2321}},{"frame":"  79 |       assert.strictEqual(req.file.originalname, 'empty.dat')\n  80 |       assert.strictEqual(req.file.size, 0)\n> 81 |       assert.strictEqual(util.fileSize(req.file.path), 0)\n     |                                                       ^ Magic Number\n  82 |\n  83 |       done()\n  84 |     })","start":{"line":81,"column":55,"index":2379}},{"frame":"  112 |       assert.strictEqual(req.files.empty[0].fieldname, 'empty')\n  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n> 114 |       assert.strictEqual(req.files.empty[0].size, 0)\n      |                                                  ^ Magic Number\n  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n  116 |\n  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')","start":{"line":114,"column":50,"index":3461}},{"frame":"  113 |       assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')\n  114 |       assert.strictEqual(req.files.empty[0].size, 0)\n> 115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)\n      |                                                                 ^ Magic Number\n  116 |\n  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')","start":{"line":115,"column":65,"index":3529}},{"frame":"  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')\n  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n> 119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n      |                                                  ^ Magic Number\n  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n  121 |\n  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')","start":{"line":119,"column":50,"index":3718}},{"frame":"  118 |       assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')\n  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)\n> 120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)\n      |                                                                 ^ Magic Number\n  121 |\n  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')","start":{"line":120,"column":65,"index":3788}},{"frame":"  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')\n  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n> 124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n      |                                                  ^ Magic Number\n  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n  126 |\n  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')","start":{"line":124,"column":50,"index":3979}},{"frame":"  123 |       assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')\n  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)\n> 125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)\n      |                                                                 ^ Magic Number\n  126 |\n  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')","start":{"line":125,"column":65,"index":4047}},{"frame":"  127 |       assert.strictEqual(req.files.small0[0].fieldname, 'small0')\n  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n> 129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n      |                                                   ^ Magic Number\n  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n  131 |\n  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')","start":{"line":129,"column":51,"index":4241}},{"frame":"  128 |       assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')\n  129 |       assert.strictEqual(req.files.small0[0].size, 1778)\n> 130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)\n      |                                                                  ^ Magic Number\n  131 |\n  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')","start":{"line":130,"column":66,"index":4313}},{"frame":"  132 |       assert.strictEqual(req.files.small1[0].fieldname, 'small1')\n  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n> 134 |       assert.strictEqual(req.files.small1[0].size, 315)\n      |                                                   ^ Magic Number\n  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n  136 |\n  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')","start":{"line":134,"column":51,"index":4510}},{"frame":"  133 |       assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')\n  134 |       assert.strictEqual(req.files.small1[0].size, 315)\n> 135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)\n      |                                                                  ^ Magic Number\n  136 |\n  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')","start":{"line":135,"column":66,"index":4581}},{"frame":"  137 |       assert.strictEqual(req.files.medium[0].fieldname, 'medium')\n  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n> 139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n      |                                                   ^ Magic Number\n  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n  141 |\n  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')","start":{"line":139,"column":51,"index":4777}},{"frame":"  138 |       assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')\n  139 |       assert.strictEqual(req.files.medium[0].size, 13196)\n> 140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)\n      |                                                                  ^ Magic Number\n  141 |\n  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')","start":{"line":140,"column":66,"index":4850}},{"frame":"  142 |       assert.strictEqual(req.files.large[0].fieldname, 'large')\n  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n> 144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n      |                                                  ^ Magic Number\n  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)\n  146 |\n  147 |       done()","start":{"line":144,"column":50,"index":5043}},{"frame":"  143 |       assert.strictEqual(req.files.large[0].originalname, 'large.jpg')\n  144 |       assert.strictEqual(req.files.large[0].size, 2413677)\n> 145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)\n      |                                                                 ^ Magic Number\n  146 |\n  147 |       done()\n  148 |     })","start":{"line":145,"column":65,"index":5117}}]}],"metrics":{"aggregate":{"cyclomatic":17,"cyclomaticDensity":8.213,"halstead":{"bugs":2.768,"difficulty":35.165,"effort":291961.236,"length":1188,"time":16220.069,"vocabulary":127,"volume":8302.557,"operands":{"distinct":115,"total":674,"identifiers":["assert","require","\"assert\"","deepEqual","\"deep-equal\"","fs","\"fs\"","path","\"path\"","util","\"./_util\"","multer","\"../\"","temp","\"fs-temp\"","rimraf","\"rimraf\"","FormData","\"form-data\"","describe","\"Disk Storage\"","uploadDir","upload","beforeEach","done","mkdir","err","dest","afterEach","it","\"should process parser/form-data POST request\"","form","parser","single","\"small0\"","append","\"name\"","\"Multer\"","file","\"small0.dat\"","submitForm","req","ifError","strictEqual","body","name","fieldname","originalname","size","1778","fileSize","\"should process empty fields and an empty file\"","\"empty\"","\"empty.dat\"","\"version\"","\"\"","\"year\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","version","year","checkboxfull","checkboxhalfempty","checkboxempty","0","\"should process multiple files\"","fields","maxCount","1","\"tiny0\"","\"tiny1\"","\"small1\"","\"medium\"","\"large\"","\"tiny0.dat\"","\"tiny1.dat\"","\"small1.dat\"","\"medium.dat\"","\"large.jpg\"","files","empty","tiny0","122","tiny1","7","small0","small1","315","medium","13196","large","2413677","\"should remove uploaded files on error\"","code","\"LIMIT_UNEXPECTED_FILE\"","field","storageErrors","readdirSync","\"should report error when directory doesn't exist\"","directory","join","mkdirSync","\"ghost\"","$0","$1","cb","null","storage","diskStorage","destination","\"ENOENT\"","dirname"]},"operators":{"distinct":12,"total":514,"identifiers":["var","=","()","function",".","if","return","{}",":","new","[]",","]}},"paramCount":22,"sloc":{"logical":207,"physical":189}},"settings":{"commonjs":false,"esmImportExport":{"halstead":false,"lloc":false},"forin":false,"logicalor":true,"switchcase":true,"templateExpression":{"halstead":true,"lloc":true},"trycatch":false,"newmi":false},"classes":[],"dependencies":[],"errors":[],"lineEnd":189,"lineStart":1,"maintainability":95.909,"methods":[{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.046,"difficulty":2.864,"effort":392.504,"length":36,"time":21.806,"vocabulary":14,"volume":137.065,"operands":{"distinct":11,"total":21,"identifiers":["uploadDir","upload","beforeEach","done","afterEach","it","\"should process parser/form-data POST request\"","\"should process empty fields and an empty file\"","\"should process multiple files\"","\"should remove uploaded files on error\"","\"should report error when directory doesn't exist\""]},"operators":{"distinct":3,"total":15,"identifiers":["var","()","function"]}},"paramCount":0,"sloc":{"logical":16,"physical":175},"errors":[],"lineEnd":188,"lineStart":14,"name":"<anon method-1>","paramNames":[],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":50,"halstead":{"bugs":0.007,"difficulty":1.5,"effort":29.477,"length":7,"time":1.638,"vocabulary":7,"volume":19.651,"operands":{"distinct":4,"total":4,"identifiers":["temp","mkdir","err","path"]},"operators":{"distinct":3,"total":3,"identifiers":["()",".","function"]}},"paramCount":1,"sloc":{"logical":2,"physical":9},"errors":[],"lineEnd":25,"lineStart":17,"name":"<anon method-2>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":2,"cyclomaticDensity":25,"halstead":{"bugs":0.023,"difficulty":4.286,"effort":301.322,"length":19,"time":16.74,"vocabulary":13,"volume":70.308,"operands":{"distinct":7,"total":10,"identifiers":["err","done","uploadDir","path","upload","multer","dest"]},"operators":{"distinct":6,"total":9,"identifiers":["if","return","()","=","{}",":"]}},"paramCount":2,"sloc":{"logical":8,"physical":7},"errors":[],"lineEnd":24,"lineStart":18,"name":"<anon method-3>","paramNames":["err","path"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.003,"difficulty":0.5,"effort":4,"length":4,"time":0.222,"vocabulary":4,"volume":8,"operands":{"distinct":3,"total":3,"identifiers":["rimraf","uploadDir","done"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":1,"sloc":{"logical":1,"physical":3},"errors":[],"lineEnd":29,"lineStart":27,"name":"<anon method-4>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.056,"difficulty":4.4,"effort":734.395,"length":38,"time":40.8,"vocabulary":21,"volume":166.908,"operands":{"distinct":15,"total":22,"identifiers":["form","FormData","parser","upload","single","\"small0\"","append","\"name\"","\"Multer\"","util","file","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":16,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":8,"physical":20},"errors":[],"lineEnd":50,"lineStart":31,"name":"<anon method-5>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":12.5,"halstead":{"bugs":0.089,"difficulty":1.895,"effort":507.659,"length":61,"time":28.203,"vocabulary":21,"volume":267.931,"operands":{"distinct":19,"total":36,"identifiers":["assert","ifError","err","strictEqual","req","body","name","\"Multer\"","file","fieldname","\"small0\"","originalname","\"small0.dat\"","size","1778","util","fileSize","path","done"]},"operators":{"distinct":2,"total":25,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":8,"physical":12},"errors":[],"lineEnd":49,"lineStart":38,"name":"<anon method-6>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.139,"difficulty":7.043,"effort":2942.669,"length":86,"time":163.482,"vocabulary":29,"volume":417.786,"operands":{"distinct":23,"total":54,"identifiers":["form","FormData","parser","upload","single","\"empty\"","append","util","file","\"empty.dat\"","\"name\"","\"Multer\"","\"version\"","\"\"","\"year\"","\"checkboxfull\"","\"cb1\"","\"cb2\"","\"checkboxhalfempty\"","\"checkboxempty\"","submitForm","err","req"]},"operators":{"distinct":6,"total":32,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":16,"physical":34},"errors":[],"lineEnd":85,"lineStart":52,"name":"<anon method-7>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":6.25,"halstead":{"bugs":0.2,"difficulty":4.929,"effort":2957.143,"length":120,"time":164.286,"vocabulary":32,"volume":600,"operands":{"distinct":28,"total":69,"identifiers":["assert","ifError","err","strictEqual","req","body","name","\"Multer\"","version","\"\"","year","deepEqual","checkboxfull","\"cb1\"","\"cb2\"","checkboxhalfempty","checkboxempty","file","fieldname","\"empty\"","originalname","\"empty.dat\"","size","0","util","fileSize","path","done"]},"operators":{"distinct":4,"total":51,"identifiers":["()",".","[]",","]}},"paramCount":2,"sloc":{"logical":16,"physical":18},"errors":[],"lineEnd":84,"lineStart":67,"name":"<anon method-8>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":3.03,"halstead":{"bugs":0.257,"difficulty":14.464,"effort":11158.406,"length":147,"time":619.911,"vocabulary":38,"volume":771.445,"operands":{"distinct":28,"total":81,"identifiers":["form","FormData","parser","upload","fields","name","\"empty\"","maxCount","1","\"tiny0\"","\"tiny1\"","\"small0\"","\"small1\"","\"medium\"","\"large\"","append","util","file","\"empty.dat\"","\"tiny0.dat\"","\"tiny1.dat\"","\"small0.dat\"","\"small1.dat\"","\"medium.dat\"","\"large.jpg\"","submitForm","err","req"]},"operators":{"distinct":10,"total":66,"identifiers":["var","=","new","()",".","[]",",","{}",":","function"]}},"paramCount":1,"sloc":{"logical":33,"physical":63},"errors":[],"lineEnd":149,"lineStart":87,"name":"<anon method-9>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":2.564,"halstead":{"bugs":0.805,"difficulty":11.442,"effort":27646.351,"length":435,"time":1535.908,"vocabulary":47,"volume":2416.246,"operands":{"distinct":43,"total":246,"identifiers":["assert","ifError","err","deepEqual","req","body","strictEqual","files","empty","0","fieldname","\"empty\"","originalname","\"empty.dat\"","size","util","fileSize","path","tiny0","\"tiny0\"","\"tiny0.dat\"","122","tiny1","\"tiny1\"","\"tiny1.dat\"","7","small0","\"small0\"","\"small0.dat\"","1778","small1","\"small1\"","\"small1.dat\"","315","medium","\"medium\"","\"medium.dat\"","13196","large","\"large\"","\"large.jpg\"","2413677","done"]},"operators":{"distinct":4,"total":189,"identifiers":["()",".","{}","[]"]}},"paramCount":2,"sloc":{"logical":39,"physical":42},"errors":[],"lineEnd":148,"lineStart":107,"name":"<anon method-10>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.061,"difficulty":4.8,"effort":885.491,"length":42,"time":49.194,"vocabulary":21,"volume":184.477,"operands":{"distinct":15,"total":24,"identifiers":["form","FormData","parser","upload","single","\"tiny0\"","append","util","file","\"tiny0.dat\"","\"small0\"","\"small0.dat\"","submitForm","err","req"]},"operators":{"distinct":6,"total":18,"identifiers":["var","=","new","()",".","function"]}},"paramCount":1,"sloc":{"logical":9,"physical":18},"errors":[],"lineEnd":168,"lineStart":151,"name":"<anon method-11>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":11.111,"halstead":{"bugs":0.057,"difficulty":3.929,"effort":667.531,"length":40,"time":37.085,"vocabulary":19,"volume":169.917,"operands":{"distinct":14,"total":22,"identifiers":["assert","strictEqual","err","code","\"LIMIT_UNEXPECTED_FILE\"","field","\"small0\"","deepEqual","storageErrors","files","fs","readdirSync","uploadDir","done"]},"operators":{"distinct":5,"total":18,"identifiers":["()",".","[]","var","="]}},"paramCount":2,"sloc":{"logical":9,"physical":10},"errors":[],"lineEnd":167,"lineStart":158,"name":"<anon method-12>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":5.882,"halstead":{"bugs":0.118,"difficulty":5.481,"effort":1940.009,"length":69,"time":107.778,"vocabulary":35,"volume":353.921,"operands":{"distinct":27,"total":37,"identifiers":["directory","path","join","temp","mkdirSync","\"ghost\"","dest","$0","$1","cb","storage","multer","diskStorage","destination","upload","parser","single","\"tiny0\"","form","FormData","append","util","file","\"tiny0.dat\"","submitForm","err","req"]},"operators":{"distinct":8,"total":32,"identifiers":["var","=","()",".","function","{}",":","new"]}},"paramCount":1,"sloc":{"logical":17,"physical":18},"errors":[],"lineEnd":187,"lineStart":170,"name":"<anon method-13>","paramNames":["done"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":100,"halstead":{"bugs":0.003,"difficulty":0.5,"effort":4,"length":4,"time":0.222,"vocabulary":4,"volume":8,"operands":{"distinct":3,"total":3,"identifiers":["cb","null","directory"]},"operators":{"distinct":1,"total":1,"identifiers":["()"]}},"paramCount":3,"sloc":{"logical":1,"physical":1},"errors":[],"lineEnd":172,"lineStart":172,"name":"dest","paramNames":["$0","$1","cb"],"maxNestedMethodDepth":0,"nestedMethods":[]},{"cyclomatic":1,"cyclomaticDensity":25,"halstead":{"bugs":0.025,"difficulty":1.444,"effort":109.933,"length":22,"time":6.107,"vocabulary":11,"volume":76.107,"operands":{"distinct":9,"total":13,"identifiers":["assert","strictEqual","err","code","\"ENOENT\"","path","dirname","directory","done"]},"operators":{"distinct":2,"total":9,"identifiers":["()","."]}},"paramCount":2,"sloc":{"logical":4,"physical":6},"errors":[],"lineEnd":186,"lineStart":181,"name":"<anon method-14>","paramNames":["err","req"],"maxNestedMethodDepth":0,"nestedMethods":[]}],"aggregateAverage":{"cyclomatic":1.063,"cyclomaticDensity":0.513,"halstead":{"bugs":0.173,"difficulty":2.198,"effort":18247.577,"length":74.25,"time":1013.754,"vocabulary":7.938,"volume":518.91,"operands":{"distinct":7.188,"total":42.125},"operators":{"distinct":0.75,"total":32.125}},"paramCount":1.375,"sloc":{"logical":12.938,"physical":11.813}},"methodAverage":{"cyclomatic":1.067,"cyclomaticDensity":25.163,"halstead":{"bugs":0.126,"difficulty":4.632,"effort":3352.059,"length":75.333,"time":186.226,"vocabulary":21.067,"volume":377.851,"operands":{"distinct":16.6,"total":43},"operators":{"distinct":4.467,"total":32.333}},"paramCount":1.467,"sloc":{"logical":12.467,"physical":29.067}}}}]}