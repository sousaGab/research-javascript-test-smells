<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
  <style type="text/css">
    .details-row.hidden {
      display: none;
    }
  </style>
</head>

<body>
  <section class="hero is-dark welcome is-small is-bold">
    <div class="hero-body">
      <div class="container">
        <h1 class="title">
          STEEL - teST smElls dEtection tooL
        </h1>
        <h2 class="subtitle">
          Report for "steel" (1.0.0) project.
        </h2>
      </div>
    </div>
  </section>
  <section class="section">
    <div class="container">
      <div>
        <div class="columns">
          <div class="column">
            <div class="box notification is-info">
              <div class="heading">Test Suites</div>
              <div class="title">14</div>
            </div>
          </div>
          <div class="column">
            <div class="box notification is-success">
              <div class="heading">Test Cases</div>
              <div class="title">54</div>
            </div>
          </div>
          <div class="column">
            <div class="box notification is-warning">
              <div class="heading">Smelled Test Suites</div>
              <div class="title">14</div>
            </div>
          </div>
          <div class="column">
            <div class="box notification is-danger">
              <div class="heading">Detected Smells</div>
              <div class="title">420</div>
            </div>
          </div>
        </div>

        <table class="table is-fullwidth" id="table-of-suites">
          <thead>
            <tr>
              <th>File</th>
              <th class="has-text-right">smells</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;unicode.js</a>
              </td>
              <td class="has-text-right">8</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">63</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">52</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">9</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">17.308</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.398</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">12.527</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">14946.824</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">196</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">830.379</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">68</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">1193.143</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">114.797</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  54 |       assert.ifError(err)
  55 |
&gt; 56 |       assert.strictEqual(req.file.originalname, &#39;\ud83d\udca9.dat&#39;)
     |      ^ Assertion Roulette
  57 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  58 |
  59 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  55 |
  56 |       assert.strictEqual(req.file.originalname, &#39;\ud83d\udca9.dat&#39;)
&gt; 57 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
     |      ^ Assertion Roulette
  58 |
  59 |       done()
  60 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  13 |   beforeEach(function (done) {
  14 |     temp.mkdir(function (err, path) {
&gt; 15 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  16 |
  17 |       var storage &#x3D; multer.diskStorage({
  18 |         destination: path,</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   9 |
  10 | describe(&#39;Unicode&#39;, function () {
&gt; 11 |   var uploadDir, upload
     |  ^ Global Variable
  12 |
  13 |   beforeEach(function (done) {
  14 |     temp.mkdir(function (err, path) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  15 |       if (err) return done(err)
  16 |
&gt; 17 |       var storage &#x3D; multer.diskStorage({
     |      ^ Global Variable
  18 |         destination: path,
  19 |         filename: function (req, file, cb) {
  20 |           cb(null, file.originalname)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  33 |
  34 |   it(&#39;should handle unicode filenames&#39;, function (done) {
&gt; 35 |     var req &#x3D; new stream.PassThrough()
     |    ^ Global Variable
  36 |     var boundary &#x3D; &#39;AaB03x&#39;
  37 |     var body &#x3D; [
  38 |       &#39;--&#39; + boundary,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  34 |   it(&#39;should handle unicode filenames&#39;, function (done) {
  35 |     var req &#x3D; new stream.PassThrough()
&gt; 36 |     var boundary &#x3D; &#39;AaB03x&#39;
     |    ^ Global Variable
  37 |     var body &#x3D; [
  38 |       &#39;--&#39; + boundary,
  39 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;small0&quot;; filename&#x3D;&quot;poo.dat&quot;; filename*&#x3D;utf-8\&#39;\&#39;%F0%9F%92%A9.dat&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  35 |     var req &#x3D; new stream.PassThrough()
  36 |     var boundary &#x3D; &#39;AaB03x&#39;
&gt; 37 |     var body &#x3D; [
     |    ^ Global Variable
  38 |       &#39;--&#39; + boundary,
  39 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;small0&quot;; filename&#x3D;&quot;poo.dat&quot;; filename*&#x3D;utf-8\&#39;\&#39;%F0%9F%92%A9.dat&#39;,
  40 |       &#39;Content-Type: text&#x2F;plain&#39;,</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;select-field.js</a>
              </td>
              <td class="has-text-right">12</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">79</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">72</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">10</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">13.889</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.698</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">29.936</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">62672.878</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">353</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">3481.827</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">61</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">2093.55</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">106.946</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  50 |
  51 |       file &#x3D; req.files[&#39;CA$|-|&#39;][0]
&gt; 52 |       assert.strictEqual(file.fieldname, &#39;CA$|-|&#39;)
     |      ^ Assertion Roulette
  53 |       assert.strictEqual(file.originalname, &#39;empty.dat&#39;)
  54 |
  55 |       file &#x3D; req.files[&#39;set-1&#39;][0]</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  51 |       file &#x3D; req.files[&#39;CA$|-|&#39;][0]
  52 |       assert.strictEqual(file.fieldname, &#39;CA$|-|&#39;)
&gt; 53 |       assert.strictEqual(file.originalname, &#39;empty.dat&#39;)
     |      ^ Assertion Roulette
  54 |
  55 |       file &#x3D; req.files[&#39;set-1&#39;][0]
  56 |       assert.strictEqual(file.fieldname, &#39;set-1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  54 |
  55 |       file &#x3D; req.files[&#39;set-1&#39;][0]
&gt; 56 |       assert.strictEqual(file.fieldname, &#39;set-1&#39;)
     |      ^ Assertion Roulette
  57 |       assert.strictEqual(file.originalname, &#39;tiny0.dat&#39;)
  58 |
  59 |       file &#x3D; req.files[&#39;set-2&#39;][0]</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  55 |       file &#x3D; req.files[&#39;set-1&#39;][0]
  56 |       assert.strictEqual(file.fieldname, &#39;set-1&#39;)
&gt; 57 |       assert.strictEqual(file.originalname, &#39;tiny0.dat&#39;)
     |      ^ Assertion Roulette
  58 |
  59 |       file &#x3D; req.files[&#39;set-2&#39;][0]
  60 |       assert.strictEqual(file.fieldname, &#39;set-2&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  58 |
  59 |       file &#x3D; req.files[&#39;set-2&#39;][0]
&gt; 60 |       assert.strictEqual(file.fieldname, &#39;set-2&#39;)
     |      ^ Assertion Roulette
  61 |       assert.strictEqual(file.originalname, &#39;tiny1.dat&#39;)
  62 |
  63 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  59 |       file &#x3D; req.files[&#39;set-2&#39;][0]
  60 |       assert.strictEqual(file.fieldname, &#39;set-2&#39;)
&gt; 61 |       assert.strictEqual(file.originalname, &#39;tiny1.dat&#39;)
     |      ^ Assertion Roulette
  62 |
  63 |       done()
  64 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  26 |   assert.strictEqual(files.length, len)
  27 |
&gt; 28 |   for (var i &#x3D; 0; i &lt; len; i++) {
     |  ^ Conditional Test Logic
  29 |     assert.strictEqual(files[i].fieldname, setName)
  30 |     assert.strictEqual(files[i].originalname, fileNames[i])
  31 |   }</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   8 |
   9 | function generateForm () {
&gt; 10 |   var form &#x3D; new FormData()
     |  ^ Global Variable
  11 |
  12 |   form.append(&#39;CA$|-|&#39;, util.file(&#39;empty.dat&#39;))
  13 |   form.append(&#39;set-1&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  22 |
  23 | function assertSet (files, setName, fileNames) {
&gt; 24 |   var len &#x3D; fileNames.length
     |  ^ Global Variable
  25 |
  26 |   assert.strictEqual(files.length, len)
  27 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  26 |   assert.strictEqual(files.length, len)
  27 |
&gt; 28 |   for (var i &#x3D; 0; i &lt; len; i++) {
     |       ^ Global Variable
  29 |     assert.strictEqual(files[i].fieldname, setName)
  30 |     assert.strictEqual(files[i].originalname, fileNames[i])
  31 |   }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  33 |
  34 | describe(&#39;Select Field&#39;, function () {
&gt; 35 |   var parser
     |  ^ Global Variable
  36 |
  37 |   before(function () {
  38 |     parser &#x3D; multer().fields([</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  47 |       assert.ifError(err)
  48 |
&gt; 49 |       var file
     |      ^ Global Variable
  50 |
  51 |       file &#x3D; req.files[&#39;CA$|-|&#39;][0]
  52 |       assert.strictEqual(file.fieldname, &#39;CA$|-|&#39;)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;reuse-middleware.js</a>
              </td>
              <td class="has-text-right">15</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">58</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">49</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">9</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">18.367</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.433</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">14.806</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">19219.73</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">214</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">1067.763</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">67</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">1298.143</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">112.146</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  31 |         assert.ifError(err)
  32 |
&gt; 33 |         assert.strictEqual(req.body.name, &#39;Multer&#39;)
     |        ^ Assertion Roulette
  34 |         assert.strictEqual(req.body.files, &#39;&#39; + fileCount)
  35 |         assert.strictEqual(req.files.length, fileCount)
  36 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  32 |
  33 |         assert.strictEqual(req.body.name, &#39;Multer&#39;)
&gt; 34 |         assert.strictEqual(req.body.files, &#39;&#39; + fileCount)
     |        ^ Assertion Roulette
  35 |         assert.strictEqual(req.files.length, fileCount)
  36 |
  37 |         req.files.forEach(function (file) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  33 |         assert.strictEqual(req.body.name, &#39;Multer&#39;)
  34 |         assert.strictEqual(req.body.files, &#39;&#39; + fileCount)
&gt; 35 |         assert.strictEqual(req.files.length, fileCount)
     |        ^ Assertion Roulette
  36 |
  37 |         req.files.forEach(function (file) {
  38 |           assert.strictEqual(file.fieldname, &#39;them-files&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |
  37 |         req.files.forEach(function (file) {
&gt; 38 |           assert.strictEqual(file.fieldname, &#39;them-files&#39;)
     |          ^ Assertion Roulette
  39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
  40 |           assert.strictEqual(file.size, 1778)
  41 |           assert.strictEqual(file.buffer.length, 1778)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  37 |         req.files.forEach(function (file) {
  38 |           assert.strictEqual(file.fieldname, &#39;them-files&#39;)
&gt; 39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
     |          ^ Assertion Roulette
  40 |           assert.strictEqual(file.size, 1778)
  41 |           assert.strictEqual(file.buffer.length, 1778)
  42 |         })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  38 |           assert.strictEqual(file.fieldname, &#39;them-files&#39;)
  39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
&gt; 40 |           assert.strictEqual(file.size, 1778)
     |          ^ Assertion Roulette
  41 |           assert.strictEqual(file.buffer.length, 1778)
  42 |         })
  43 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
  40 |           assert.strictEqual(file.size, 1778)
&gt; 41 |           assert.strictEqual(file.buffer.length, 1778)
     |          ^ Assertion Roulette
  42 |         })
  43 |
  44 |         if (--pending &#x3D;&#x3D;&#x3D; 0) done()</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  24 |       form.append(&#39;files&#39;, &#39;&#39; + fileCount)
  25 |
&gt; 26 |       for (var i &#x3D; 0; i &lt; fileCount; i++) {
     |      ^ Conditional Test Logic
  27 |         form.append(&#39;them-files&#39;, util.file(&#39;small0.dat&#39;))
  28 |       }
  29 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  42 |         })
  43 |
&gt; 44 |         if (--pending &#x3D;&#x3D;&#x3D; 0) done()
     |        ^ Conditional Test Logic
  45 |       })
  46 |     }
  47 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   8 |
   9 | describe(&#39;Reuse Middleware&#39;, function () {
&gt; 10 |   var parser
     |  ^ Global Variable
  11 |
  12 |   before(function (done) {
  13 |     parser &#x3D; multer().array(&#39;them-files&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  16 |
  17 |   it(&#39;should accept multiple requests&#39;, function (done) {
&gt; 18 |     var pending &#x3D; 8
     |    ^ Global Variable
  19 |
  20 |     function submitData (fileCount) {
  21 |       var form &#x3D; new FormData()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  19 |
  20 |     function submitData (fileCount) {
&gt; 21 |       var form &#x3D; new FormData()
     |      ^ Global Variable
  22 |
  23 |       form.append(&#39;name&#39;, &#39;Multer&#39;)
  24 |       form.append(&#39;files&#39;, &#39;&#39; + fileCount)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  24 |       form.append(&#39;files&#39;, &#39;&#39; + fileCount)
  25 |
&gt; 26 |       for (var i &#x3D; 0; i &lt; fileCount; i++) {
     |           ^ Global Variable
  27 |         form.append(&#39;them-files&#39;, util.file(&#39;small0.dat&#39;))
  28 |       }
  29 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  38 |           assert.strictEqual(file.fieldname, &#39;them-files&#39;)
  39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
&gt; 40 |           assert.strictEqual(file.size, 1778)
     |                                        ^ Magic Number
  41 |           assert.strictEqual(file.buffer.length, 1778)
  42 |         })
  43 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  39 |           assert.strictEqual(file.originalname, &#39;small0.dat&#39;)
  40 |           assert.strictEqual(file.size, 1778)
&gt; 41 |           assert.strictEqual(file.buffer.length, 1778)
     |                                                 ^ Magic Number
  42 |         })
  43 |
  44 |         if (--pending &#x3D;&#x3D;&#x3D; 0) done()</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;none.js</a>
              </td>
              <td class="has-text-right">11</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">48</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">43</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">7</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">16.279</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.35</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">8.25</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">8658.183</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">190</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">481.01</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">46</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">1049.477</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">117.241</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  22 |
  23 |     util.submitForm(parser, form, function (err, req) {
&gt; 24 |       assert.ok(err)
     |      ^ Assertion Roulette
  25 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
  26 |       assert.strictEqual(req.files, undefined)
  27 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  23 |     util.submitForm(parser, form, function (err, req) {
  24 |       assert.ok(err)
&gt; 25 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
     |      ^ Assertion Roulette
  26 |       assert.strictEqual(req.files, undefined)
  27 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
  28 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  24 |       assert.ok(err)
  25 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 26 |       assert.strictEqual(req.files, undefined)
     |      ^ Assertion Roulette
  27 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
  28 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
  29 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  25 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
  26 |       assert.strictEqual(req.files, undefined)
&gt; 27 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
     |      ^ Assertion Roulette
  28 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
  29 |       done()
  30 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  26 |       assert.strictEqual(req.files, undefined)
  27 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
&gt; 28 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
     |      ^ Assertion Roulette
  29 |       done()
  30 |     })
  31 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  39 |     util.submitForm(parser, form, function (err, req) {
  40 |       assert.ifError(err)
&gt; 41 |       assert.strictEqual(req.files, undefined)
     |      ^ Assertion Roulette
  42 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
  43 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
  44 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  40 |       assert.ifError(err)
  41 |       assert.strictEqual(req.files, undefined)
&gt; 42 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
     |      ^ Assertion Roulette
  43 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
  44 |       done()
  45 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  41 |       assert.strictEqual(req.files, undefined)
  42 |       assert.strictEqual(req.body.key1, &#39;val1&#39;)
&gt; 43 |       assert.strictEqual(req.body.key2, &#39;val2&#39;)
     |      ^ Assertion Roulette
  44 |       done()
  45 |     })
  46 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   8 |
   9 | describe(&#39;None&#39;, function () {
&gt; 10 |   var parser
     |  ^ Global Variable
  11 |
  12 |   before(function () {
  13 |     parser &#x3D; multer().none()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  15 |
  16 |   it(&#39;should not allow file uploads&#39;, function (done) {
&gt; 17 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  18 |
  19 |     form.append(&#39;key1&#39;, &#39;val1&#39;)
  20 |     form.append(&#39;key2&#39;, &#39;val2&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  32 |
  33 |   it(&#39;should handle text fields&#39;, function (done) {
&gt; 34 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  35 |
  36 |     form.append(&#39;key1&#39;, &#39;val1&#39;)
  37 |     form.append(&#39;key2&#39;, &#39;val2&#39;)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;memory-storage.js</a>
              </td>
              <td class="has-text-right">70</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">139</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">137</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">9</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">6.569</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">2.077</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">30.977</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">192996.624</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">944</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">10722.035</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">97</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">6230.318</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">92.783</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  26 |       assert.ifError(err)
  27 |
&gt; 28 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
     |      ^ Assertion Roulette
  29 |
  30 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  28 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
  29 |
&gt; 30 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
     |      ^ Assertion Roulette
  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  32 |       assert.strictEqual(req.file.size, 1778)
  33 |       assert.strictEqual(req.file.buffer.length, 1778)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  29 |
  30 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
&gt; 31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
     |      ^ Assertion Roulette
  32 |       assert.strictEqual(req.file.size, 1778)
  33 |       assert.strictEqual(req.file.buffer.length, 1778)
  34 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  30 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
&gt; 32 |       assert.strictEqual(req.file.size, 1778)
     |      ^ Assertion Roulette
  33 |       assert.strictEqual(req.file.buffer.length, 1778)
  34 |
  35 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  32 |       assert.strictEqual(req.file.size, 1778)
&gt; 33 |       assert.strictEqual(req.file.buffer.length, 1778)
     |      ^ Assertion Roulette
  34 |
  35 |       done()
  36 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  55 |       assert.ifError(err)
  56 |
&gt; 57 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
     |      ^ Assertion Roulette
  58 |       assert.strictEqual(req.body.version, &#39;&#39;)
  59 |       assert.strictEqual(req.body.year, &#39;&#39;)
  60 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  56 |
  57 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
&gt; 58 |       assert.strictEqual(req.body.version, &#39;&#39;)
     |      ^ Assertion Roulette
  59 |       assert.strictEqual(req.body.year, &#39;&#39;)
  60 |
  61 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  57 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
  58 |       assert.strictEqual(req.body.version, &#39;&#39;)
&gt; 59 |       assert.strictEqual(req.body.year, &#39;&#39;)
     |      ^ Assertion Roulette
  60 |
  61 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
  62 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  59 |       assert.strictEqual(req.body.year, &#39;&#39;)
  60 |
&gt; 61 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
     |      ^ Assertion Roulette
  62 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
  63 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  64 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  60 |
  61 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
&gt; 62 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
     |      ^ Assertion Roulette
  63 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  64 |
  65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  61 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
  62 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
&gt; 63 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
     |      ^ Assertion Roulette
  64 |
  65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  63 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  64 |
&gt; 65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
     |      ^ Assertion Roulette
  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  67 |       assert.strictEqual(req.file.size, 0)
  68 |       assert.strictEqual(req.file.buffer.length, 0)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  64 |
  65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
&gt; 66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
     |      ^ Assertion Roulette
  67 |       assert.strictEqual(req.file.size, 0)
  68 |       assert.strictEqual(req.file.buffer.length, 0)
  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
&gt; 67 |       assert.strictEqual(req.file.size, 0)
     |      ^ Assertion Roulette
  68 |       assert.strictEqual(req.file.buffer.length, 0)
  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)
  70 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  67 |       assert.strictEqual(req.file.size, 0)
&gt; 68 |       assert.strictEqual(req.file.buffer.length, 0)
     |      ^ Assertion Roulette
  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)
  70 |
  71 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  67 |       assert.strictEqual(req.file.size, 0)
  68 |       assert.strictEqual(req.file.buffer.length, 0)
&gt; 69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)
     |      ^ Assertion Roulette
  70 |
  71 |       done()
  72 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   96 |       assert.ifError(err)
   97 |
&gt;  98 |       assert(deepEqual(req.body, {}))
      |      ^ Assertion Roulette
   99 |
  100 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   98 |       assert(deepEqual(req.body, {}))
   99 |
&gt; 100 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
      |      ^ Assertion Roulette
  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  102 |       assert.strictEqual(req.files.empty[0].size, 0)
  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   99 |
  100 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
&gt; 101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
      |      ^ Assertion Roulette
  102 |       assert.strictEqual(req.files.empty[0].size, 0)
  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
  104 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
&gt; 102 |       assert.strictEqual(req.files.empty[0].size, 0)
      |      ^ Assertion Roulette
  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
  104 |
  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  102 |       assert.strictEqual(req.files.empty[0].size, 0)
&gt; 103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
      |      ^ Assertion Roulette
  104 |
  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
  104 |
&gt; 105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
      |      ^ Assertion Roulette
  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  104 |
  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
&gt; 106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
      |      ^ Assertion Roulette
  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
  109 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
&gt; 107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
      |      ^ Assertion Roulette
  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
  109 |
  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
&gt; 108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
      |      ^ Assertion Roulette
  109 |
  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
  109 |
&gt; 110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
      |      ^ Assertion Roulette
  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  109 |
  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
&gt; 111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
      |      ^ Assertion Roulette
  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
  114 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
&gt; 112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
      |      ^ Assertion Roulette
  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
  114 |
  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
&gt; 113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
      |      ^ Assertion Roulette
  114 |
  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
  114 |
&gt; 115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
      |      ^ Assertion Roulette
  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  117 |       assert.strictEqual(req.files.small0[0].size, 1778)
  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  114 |
  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
&gt; 116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
      |      ^ Assertion Roulette
  117 |       assert.strictEqual(req.files.small0[0].size, 1778)
  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
  119 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
&gt; 117 |       assert.strictEqual(req.files.small0[0].size, 1778)
      |      ^ Assertion Roulette
  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
  119 |
  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  117 |       assert.strictEqual(req.files.small0[0].size, 1778)
&gt; 118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
      |      ^ Assertion Roulette
  119 |
  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
  119 |
&gt; 120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
      |      ^ Assertion Roulette
  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  122 |       assert.strictEqual(req.files.small1[0].size, 315)
  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  119 |
  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
&gt; 121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
      |      ^ Assertion Roulette
  122 |       assert.strictEqual(req.files.small1[0].size, 315)
  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
  124 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
&gt; 122 |       assert.strictEqual(req.files.small1[0].size, 315)
      |      ^ Assertion Roulette
  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
  124 |
  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  122 |       assert.strictEqual(req.files.small1[0].size, 315)
&gt; 123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
      |      ^ Assertion Roulette
  124 |
  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
  124 |
&gt; 125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
      |      ^ Assertion Roulette
  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  127 |       assert.strictEqual(req.files.medium[0].size, 13196)
  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  124 |
  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
&gt; 126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
      |      ^ Assertion Roulette
  127 |       assert.strictEqual(req.files.medium[0].size, 13196)
  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
  129 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
&gt; 127 |       assert.strictEqual(req.files.medium[0].size, 13196)
      |      ^ Assertion Roulette
  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
  129 |
  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  127 |       assert.strictEqual(req.files.medium[0].size, 13196)
&gt; 128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
      |      ^ Assertion Roulette
  129 |
  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
  129 |
&gt; 130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
      |      ^ Assertion Roulette
  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  132 |       assert.strictEqual(req.files.large[0].size, 2413677)
  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  129 |
  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
&gt; 131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
      |      ^ Assertion Roulette
  132 |       assert.strictEqual(req.files.large[0].size, 2413677)
  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)
  134 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
&gt; 132 |       assert.strictEqual(req.files.large[0].size, 2413677)
      |      ^ Assertion Roulette
  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)
  134 |
  135 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  132 |       assert.strictEqual(req.files.large[0].size, 2413677)
&gt; 133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)
      |      ^ Assertion Roulette
  134 |
  135 |       done()
  136 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   9 |
  10 | describe(&#39;Memory Storage&#39;, function () {
&gt; 11 |   var upload
     |  ^ Global Variable
  12 |
  13 |   before(function (done) {
  14 |     upload &#x3D; multer()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  17 |
  18 |   it(&#39;should process multipart&#x2F;form-data POST request&#39;, function (done) {
&gt; 19 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  20 |     var parser &#x3D; upload.single(&#39;small0&#39;)
  21 |
  22 |     form.append(&#39;name&#39;, &#39;Multer&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  18 |   it(&#39;should process multipart&#x2F;form-data POST request&#39;, function (done) {
  19 |     var form &#x3D; new FormData()
&gt; 20 |     var parser &#x3D; upload.single(&#39;small0&#39;)
     |    ^ Global Variable
  21 |
  22 |     form.append(&#39;name&#39;, &#39;Multer&#39;)
  23 |     form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  38 |
  39 |   it(&#39;should process empty fields and an empty file&#39;, function (done) {
&gt; 40 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  41 |     var parser &#x3D; upload.single(&#39;empty&#39;)
  42 |
  43 |     form.append(&#39;empty&#39;, util.file(&#39;empty.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  39 |   it(&#39;should process empty fields and an empty file&#39;, function (done) {
  40 |     var form &#x3D; new FormData()
&gt; 41 |     var parser &#x3D; upload.single(&#39;empty&#39;)
     |    ^ Global Variable
  42 |
  43 |     form.append(&#39;empty&#39;, util.file(&#39;empty.dat&#39;))
  44 |     form.append(&#39;name&#39;, &#39;Multer&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  74 |
  75 |   it(&#39;should process multiple files&#39;, function (done) {
&gt; 76 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  77 |     var parser &#x3D; upload.fields([
  78 |       { name: &#39;empty&#39;, maxCount: 1 },
  79 |       { name: &#39;tiny0&#39;, maxCount: 1 },</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  75 |   it(&#39;should process multiple files&#39;, function (done) {
  76 |     var form &#x3D; new FormData()
&gt; 77 |     var parser &#x3D; upload.fields([
     |    ^ Global Variable
  78 |       { name: &#39;empty&#39;, maxCount: 1 },
  79 |       { name: &#39;tiny0&#39;, maxCount: 1 },
  80 |       { name: &#39;tiny1&#39;, maxCount: 1 },</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  30 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
&gt; 32 |       assert.strictEqual(req.file.size, 1778)
     |                                        ^ Magic Number
  33 |       assert.strictEqual(req.file.buffer.length, 1778)
  34 |
  35 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  31 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  32 |       assert.strictEqual(req.file.size, 1778)
&gt; 33 |       assert.strictEqual(req.file.buffer.length, 1778)
     |                                                 ^ Magic Number
  34 |
  35 |       done()
  36 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  65 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
&gt; 67 |       assert.strictEqual(req.file.size, 0)
     |                                        ^ Magic Number
  68 |       assert.strictEqual(req.file.buffer.length, 0)
  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)
  70 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  66 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  67 |       assert.strictEqual(req.file.size, 0)
&gt; 68 |       assert.strictEqual(req.file.buffer.length, 0)
     |                                                 ^ Magic Number
  69 |       assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)
  70 |
  71 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
&gt; 102 |       assert.strictEqual(req.files.empty[0].size, 0)
      |                                                  ^ Magic Number
  103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
  104 |
  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  101 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  102 |       assert.strictEqual(req.files.empty[0].size, 0)
&gt; 103 |       assert.strictEqual(req.files.empty[0].buffer.length, 0)
      |                                                           ^ Magic Number
  104 |
  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  105 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
&gt; 107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
      |                                                  ^ Magic Number
  108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
  109 |
  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  106 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  107 |       assert.strictEqual(req.files.tiny0[0].size, 122)
&gt; 108 |       assert.strictEqual(req.files.tiny0[0].buffer.length, 122)
      |                                                           ^ Magic Number
  109 |
  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  110 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
&gt; 112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
      |                                                  ^ Magic Number
  113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
  114 |
  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  111 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  112 |       assert.strictEqual(req.files.tiny1[0].size, 7)
&gt; 113 |       assert.strictEqual(req.files.tiny1[0].buffer.length, 7)
      |                                                           ^ Magic Number
  114 |
  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  115 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
&gt; 117 |       assert.strictEqual(req.files.small0[0].size, 1778)
      |                                                   ^ Magic Number
  118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
  119 |
  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  116 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  117 |       assert.strictEqual(req.files.small0[0].size, 1778)
&gt; 118 |       assert.strictEqual(req.files.small0[0].buffer.length, 1778)
      |                                                            ^ Magic Number
  119 |
  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  120 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
&gt; 122 |       assert.strictEqual(req.files.small1[0].size, 315)
      |                                                   ^ Magic Number
  123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
  124 |
  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  121 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  122 |       assert.strictEqual(req.files.small1[0].size, 315)
&gt; 123 |       assert.strictEqual(req.files.small1[0].buffer.length, 315)
      |                                                            ^ Magic Number
  124 |
  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  125 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
&gt; 127 |       assert.strictEqual(req.files.medium[0].size, 13196)
      |                                                   ^ Magic Number
  128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
  129 |
  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  126 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  127 |       assert.strictEqual(req.files.medium[0].size, 13196)
&gt; 128 |       assert.strictEqual(req.files.medium[0].buffer.length, 13196)
      |                                                            ^ Magic Number
  129 |
  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  130 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
&gt; 132 |       assert.strictEqual(req.files.large[0].size, 2413677)
      |                                                  ^ Magic Number
  133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)
  134 |
  135 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  131 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  132 |       assert.strictEqual(req.files.large[0].size, 2413677)
&gt; 133 |       assert.strictEqual(req.files.large[0].buffer.length, 2413677)
      |                                                           ^ Magic Number
  134 |
  135 |       done()
  136 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;issue-232.js</a>
              </td>
              <td class="has-text-right">6</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">44</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">46</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">8</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">17.391</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.284</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">9.318</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">7936.513</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">148</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">440.917</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">54</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">851.723</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">116.312</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  35 |       assert.ok(err, &#39;an error was given&#39;)
  36 |
&gt; 37 |       assert.strictEqual(err.code, &#39;LIMIT_FILE_SIZE&#39;)
     |      ^ Assertion Roulette
  38 |       assert.strictEqual(err.field, &#39;file&#39;)
  39 |
  40 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |
  37 |       assert.strictEqual(err.code, &#39;LIMIT_FILE_SIZE&#39;)
&gt; 38 |       assert.strictEqual(err.field, &#39;file&#39;)
     |      ^ Assertion Roulette
  39 |
  40 |       done()
  41 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  14 |   before(function (done) {
  15 |     temp.mkdir(function (err, path) {
&gt; 16 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  17 |
  18 |       uploadDir &#x3D; path
  19 |       upload &#x3D; multer({ dest: path, limits: { fileSize: 100 } })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  10 |
  11 | describe(&#39;Issue #232&#39;, function () {
&gt; 12 |   var uploadDir, upload
     |  ^ Global Variable
  13 |
  14 |   before(function (done) {
  15 |     temp.mkdir(function (err, path) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  27 |
  28 |   it(&#39;should report limit errors&#39;, function (done) {
&gt; 29 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  30 |     var parser &#x3D; upload.single(&#39;file&#39;)
  31 |
  32 |     form.append(&#39;file&#39;, util.file(&#39;large.jpg&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  28 |   it(&#39;should report limit errors&#39;, function (done) {
  29 |     var form &#x3D; new FormData()
&gt; 30 |     var parser &#x3D; upload.single(&#39;file&#39;)
     |    ^ Global Variable
  31 |
  32 |     form.append(&#39;file&#39;, util.file(&#39;large.jpg&#39;))
  33 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;functionality.js</a>
              </td>
              <td class="has-text-right">28</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">138</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">147</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">30</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">20.408</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">1.339</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">32.658</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">131219.55</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">613</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">7289.975</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">94</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">4017.963</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">111.104</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  52 |       util.submitForm(parser, env.form, function (err, req) {
  53 |         assert.ifError(err)
&gt; 54 |         assert.ok(startsWith(req.file.path, env.uploadDir))
     |        ^ Assertion Roulette
  55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)
  56 |         done()
  57 |       })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  53 |         assert.ifError(err)
  54 |         assert.ok(startsWith(req.file.path, env.uploadDir))
&gt; 55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)
     |        ^ Assertion Roulette
  56 |         done()
  57 |       })
  58 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   99 |       util.submitForm(parser, env.form, function (err, req) {
  100 |         assert.ifError(err)
&gt; 101 |         assert.strictEqual(req.files.length, 2)
      |        ^ Assertion Roulette
  102 |         assert.strictEqual(req.files[0].filename, &#39;themFilessmall0.dat&#39;)
  103 |         assert.strictEqual(req.files[1].filename, &#39;themFilessmall1.dat&#39;)
  104 |         done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |         assert.ifError(err)
  101 |         assert.strictEqual(req.files.length, 2)
&gt; 102 |         assert.strictEqual(req.files[0].filename, &#39;themFilessmall0.dat&#39;)
      |        ^ Assertion Roulette
  103 |         assert.strictEqual(req.files[1].filename, &#39;themFilessmall1.dat&#39;)
  104 |         done()
  105 |       })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  101 |         assert.strictEqual(req.files.length, 2)
  102 |         assert.strictEqual(req.files[0].filename, &#39;themFilessmall0.dat&#39;)
&gt; 103 |         assert.strictEqual(req.files[1].filename, &#39;themFilessmall1.dat&#39;)
      |        ^ Assertion Roulette
  104 |         done()
  105 |       })
  106 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  129 |     util.submitForm(parser, form, function (err, req) {
  130 |       assert.ifError(err)
&gt; 131 |       assert.strictEqual(req.files.length, 2)
      |      ^ Assertion Roulette
  132 |       assert.ok(req.files[0].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
  133 |       assert.ok(req.files[1].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
  134 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  130 |       assert.ifError(err)
  131 |       assert.strictEqual(req.files.length, 2)
&gt; 132 |       assert.ok(req.files[0].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
      |      ^ Assertion Roulette
  133 |       assert.ok(req.files[1].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
  134 |       done()
  135 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  131 |       assert.strictEqual(req.files.length, 2)
  132 |       assert.ok(req.files[0].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
&gt; 133 |       assert.ok(req.files[1].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
      |      ^ Assertion Roulette
  134 |       done()
  135 |     })
  136 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  22 |   function makeStandardEnv (cb) {
  23 |     temp.mkdir(function (err, uploadDir) {
&gt; 24 |       if (err) return cb(err)
     |      ^ Conditional Test Logic
  25 |
  26 |       cleanup.push(uploadDir)
  27 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  40 |
  41 |   after(function () {
&gt; 42 |     while (cleanup.length) rimraf.sync(cleanup.pop())
     |    ^ Conditional Test Logic
  43 |   })
  44 |
  45 |   it(&#39;should upload the file to the &#x60;dest&#x60; dir&#39;, function (done) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  45 |   it(&#39;should upload the file to the &#x60;dest&#x60; dir&#39;, function (done) {
  46 |     makeStandardEnv(function (err, env) {
&gt; 47 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  48 |
  49 |       var parser &#x3D; env.upload.single(&#39;small0&#39;)
  50 |       env.form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  61 |   it(&#39;should rename the uploaded file&#39;, function (done) {
  62 |     makeStandardEnv(function (err, env) {
&gt; 63 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  64 |
  65 |       var parser &#x3D; env.upload.single(&#39;small0&#39;)
  66 |       env.form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  76 |   it(&#39;should ensure all req.files values (single-file per field) point to an array&#39;, function (done) {
  77 |     makeStandardEnv(function (err, env) {
&gt; 78 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  79 |
  80 |       var parser &#x3D; env.upload.single(&#39;tiny0&#39;)
  81 |       env.form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  91 |   it(&#39;should ensure all req.files values (multi-files per field) point to an array&#39;, function (done) {
  92 |     makeStandardEnv(function (err, env) {
&gt; 93 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  94 |
  95 |       var parser &#x3D; env.upload.array(&#39;themFiles&#39;, 2)
  96 |       env.form.append(&#39;themFiles&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  111 |       destination: function (req, file, cb) {
  112 |         temp.template(&#39;testforme-%s&#39;).mkdir(function (err, uploadDir) {
&gt; 113 |           if (err) return cb(err)
      |          ^ Conditional Test Logic
  114 |
  115 |           cleanup.push(uploadDir)
  116 |           cb(null, uploadDir)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  18 |
  19 | describe(&#39;Functionality&#39;, function () {
&gt; 20 |   var cleanup &#x3D; []
     |  ^ Global Variable
  21 |
  22 |   function makeStandardEnv (cb) {
  23 |     temp.mkdir(function (err, uploadDir) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  26 |       cleanup.push(uploadDir)
  27 |
&gt; 28 |       var storage &#x3D; multer.diskStorage({
     |      ^ Global Variable
  29 |         destination: uploadDir,
  30 |         filename: generateFilename
  31 |       })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  47 |       if (err) return done(err)
  48 |
&gt; 49 |       var parser &#x3D; env.upload.single(&#39;small0&#39;)
     |      ^ Global Variable
  50 |       env.form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))
  51 |
  52 |       util.submitForm(parser, env.form, function (err, req) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  63 |       if (err) return done(err)
  64 |
&gt; 65 |       var parser &#x3D; env.upload.single(&#39;small0&#39;)
     |      ^ Global Variable
  66 |       env.form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))
  67 |
  68 |       util.submitForm(parser, env.form, function (err, req) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  78 |       if (err) return done(err)
  79 |
&gt; 80 |       var parser &#x3D; env.upload.single(&#39;tiny0&#39;)
     |      ^ Global Variable
  81 |       env.form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))
  82 |
  83 |       util.submitForm(parser, env.form, function (err, req) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  93 |       if (err) return done(err)
  94 |
&gt; 95 |       var parser &#x3D; env.upload.array(&#39;themFiles&#39;, 2)
     |      ^ Global Variable
  96 |       env.form.append(&#39;themFiles&#39;, util.file(&#39;small0.dat&#39;))
  97 |       env.form.append(&#39;themFiles&#39;, util.file(&#39;small1.dat&#39;))
  98 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  108 |
  109 |   it(&#39;should rename the destination directory to a different directory&#39;, function (done) {
&gt; 110 |     var storage &#x3D; multer.diskStorage({
      |    ^ Global Variable
  111 |       destination: function (req, file, cb) {
  112 |         temp.template(&#39;testforme-%s&#39;).mkdir(function (err, uploadDir) {
  113 |           if (err) return cb(err)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  120 |     })
  121 |
&gt; 122 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  123 |     var upload &#x3D; multer({ storage: storage })
  124 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
  125 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  121 |
  122 |     var form &#x3D; new FormData()
&gt; 123 |     var upload &#x3D; multer({ storage: storage })
      |    ^ Global Variable
  124 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
  125 |
  126 |     form.append(&#39;themFiles&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  122 |     var form &#x3D; new FormData()
  123 |     var upload &#x3D; multer({ storage: storage })
&gt; 124 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
      |    ^ Global Variable
  125 |
  126 |     form.append(&#39;themFiles&#39;, util.file(&#39;small0.dat&#39;))
  127 |     form.append(&#39;themFiles&#39;, util.file(&#39;small1.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  53 |         assert.ifError(err)
  54 |         assert.ok(startsWith(req.file.path, env.uploadDir))
&gt; 55 |         assert.strictEqual(util.fileSize(req.file.path), 1778)
     |                                                         ^ Magic Number
  56 |         done()
  57 |       })
  58 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   99 |       util.submitForm(parser, env.form, function (err, req) {
  100 |         assert.ifError(err)
&gt; 101 |         assert.strictEqual(req.files.length, 2)
      |                                             ^ Magic Number
  102 |         assert.strictEqual(req.files[0].filename, &#39;themFilessmall0.dat&#39;)
  103 |         assert.strictEqual(req.files[1].filename, &#39;themFilessmall1.dat&#39;)
  104 |         done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  129 |     util.submitForm(parser, form, function (err, req) {
  130 |       assert.ifError(err)
&gt; 131 |       assert.strictEqual(req.files.length, 2)
      |                                           ^ Magic Number
  132 |       assert.ok(req.files[0].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
  133 |       assert.ok(req.files[1].path.indexOf(&#39;&#x2F;testforme-&#39;) &gt;&#x3D; 0)
  134 |       done()</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;file-ordering.js</a>
              </td>
              <td class="has-text-right">15</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">49</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">48</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">8</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">16.667</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.447</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">21.511</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">28832.345</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">226</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">1601.797</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">61</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">1340.347</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">108.032</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  40 |     util.submitForm(parser, form, function (err, req) {
  41 |       assert.ifError(err)
&gt; 42 |       assert.strictEqual(req.files.length, 2)
     |      ^ Assertion Roulette
  43 |       assert.strictEqual(req.files[0].originalname, &#39;small0.dat&#39;)
  44 |       assert.strictEqual(req.files[1].originalname, &#39;small1.dat&#39;)
  45 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  41 |       assert.ifError(err)
  42 |       assert.strictEqual(req.files.length, 2)
&gt; 43 |       assert.strictEqual(req.files[0].originalname, &#39;small0.dat&#39;)
     |      ^ Assertion Roulette
  44 |       assert.strictEqual(req.files[1].originalname, &#39;small1.dat&#39;)
  45 |       done()
  46 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  42 |       assert.strictEqual(req.files.length, 2)
  43 |       assert.strictEqual(req.files[0].originalname, &#39;small0.dat&#39;)
&gt; 44 |       assert.strictEqual(req.files[1].originalname, &#39;small1.dat&#39;)
     |      ^ Assertion Roulette
  45 |       done()
  46 |     })
  47 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  21 |
  22 |       _handleFile.call(this, req, file, function (err, info) {
&gt; 23 |         if (err) return cb(err)
     |        ^ Conditional Test Logic
  24 |
  25 |         calls[id].cb &#x3D; cb
  26 |         calls[id].info &#x3D; info</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  26 |         calls[id].info &#x3D; info
  27 |
&gt; 28 |         if (--pending &#x3D;&#x3D;&#x3D; 0) {
     |        ^ Conditional Test Logic
  29 |           calls[1].cb(null, calls[1].info)
  30 |           calls[0].cb(null, calls[0].info)
  31 |         }</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   9 | describe(&#39;File ordering&#39;, function () {
  10 |   it(&#39;should present files in same order as they came&#39;, function (done) {
&gt; 11 |     var storage &#x3D; multer.memoryStorage()
     |    ^ Global Variable
  12 |     var upload &#x3D; multer({ storage: storage })
  13 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
  14 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  10 |   it(&#39;should present files in same order as they came&#39;, function (done) {
  11 |     var storage &#x3D; multer.memoryStorage()
&gt; 12 |     var upload &#x3D; multer({ storage: storage })
     |    ^ Global Variable
  13 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
  14 |
  15 |     var i &#x3D; 0</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  11 |     var storage &#x3D; multer.memoryStorage()
  12 |     var upload &#x3D; multer({ storage: storage })
&gt; 13 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
     |    ^ Global Variable
  14 |
  15 |     var i &#x3D; 0
  16 |     var calls &#x3D; [{}, {}]</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  13 |     var parser &#x3D; upload.array(&#39;themFiles&#39;, 2)
  14 |
&gt; 15 |     var i &#x3D; 0
     |    ^ Global Variable
  16 |     var calls &#x3D; [{}, {}]
  17 |     var pending &#x3D; 2
  18 |     var _handleFile &#x3D; storage._handleFile</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  14 |
  15 |     var i &#x3D; 0
&gt; 16 |     var calls &#x3D; [{}, {}]
     |    ^ Global Variable
  17 |     var pending &#x3D; 2
  18 |     var _handleFile &#x3D; storage._handleFile
  19 |     storage._handleFile &#x3D; function (req, file, cb) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  15 |     var i &#x3D; 0
  16 |     var calls &#x3D; [{}, {}]
&gt; 17 |     var pending &#x3D; 2
     |    ^ Global Variable
  18 |     var _handleFile &#x3D; storage._handleFile
  19 |     storage._handleFile &#x3D; function (req, file, cb) {
  20 |       var id &#x3D; (i++)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  16 |     var calls &#x3D; [{}, {}]
  17 |     var pending &#x3D; 2
&gt; 18 |     var _handleFile &#x3D; storage._handleFile
     |    ^ Global Variable
  19 |     storage._handleFile &#x3D; function (req, file, cb) {
  20 |       var id &#x3D; (i++)
  21 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  18 |     var _handleFile &#x3D; storage._handleFile
  19 |     storage._handleFile &#x3D; function (req, file, cb) {
&gt; 20 |       var id &#x3D; (i++)
     |      ^ Global Variable
  21 |
  22 |       _handleFile.call(this, req, file, function (err, info) {
  23 |         if (err) return cb(err)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  33 |     }
  34 |
&gt; 35 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  36 |
  37 |     form.append(&#39;themFiles&#39;, util.file(&#39;small0.dat&#39;))
  38 |     form.append(&#39;themFiles&#39;, util.file(&#39;small1.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  40 |     util.submitForm(parser, form, function (err, req) {
  41 |       assert.ifError(err)
&gt; 42 |       assert.strictEqual(req.files.length, 2)
     |                                           ^ Magic Number
  43 |       assert.strictEqual(req.files[0].originalname, &#39;small0.dat&#39;)
  44 |       assert.strictEqual(req.files[1].originalname, &#39;small1.dat&#39;)
  45 |       done()</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;file-filter.js</a>
              </td>
              <td class="has-text-right">13</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">57</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">55</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">9</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">16.364</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">0.52</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">15.818</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">24660.307</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">257</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">1370.017</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">67</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">1558.985</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">114.604</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  33 |     util.submitForm(parser, form, function (err, req) {
  34 |       assert.ifError(err)
&gt; 35 |       assert.strictEqual(req.files.notme, undefined)
     |      ^ Assertion Roulette
  36 |       assert.strictEqual(req.files.butme[0].fieldname, &#39;butme&#39;)
  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
  38 |       assert.strictEqual(req.files.butme[0].size, 7)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  34 |       assert.ifError(err)
  35 |       assert.strictEqual(req.files.notme, undefined)
&gt; 36 |       assert.strictEqual(req.files.butme[0].fieldname, &#39;butme&#39;)
     |      ^ Assertion Roulette
  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
  38 |       assert.strictEqual(req.files.butme[0].size, 7)
  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  35 |       assert.strictEqual(req.files.notme, undefined)
  36 |       assert.strictEqual(req.files.butme[0].fieldname, &#39;butme&#39;)
&gt; 37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
     |      ^ Assertion Roulette
  38 |       assert.strictEqual(req.files.butme[0].size, 7)
  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)
  40 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |       assert.strictEqual(req.files.butme[0].fieldname, &#39;butme&#39;)
  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
&gt; 38 |       assert.strictEqual(req.files.butme[0].size, 7)
     |      ^ Assertion Roulette
  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)
  40 |       done()
  41 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
  38 |       assert.strictEqual(req.files.butme[0].size, 7)
&gt; 39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)
     |      ^ Assertion Roulette
  40 |       done()
  41 |     })
  42 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  21 | describe(&#39;File Filter&#39;, function () {
  22 |   it(&#39;should skip some files&#39;, function (done) {
&gt; 23 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  24 |     var upload &#x3D; withFilter(skipSpecificFile)
  25 |     var parser &#x3D; upload.fields([
  26 |       { name: &#39;notme&#39;, maxCount: 1 },</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  22 |   it(&#39;should skip some files&#39;, function (done) {
  23 |     var form &#x3D; new FormData()
&gt; 24 |     var upload &#x3D; withFilter(skipSpecificFile)
     |    ^ Global Variable
  25 |     var parser &#x3D; upload.fields([
  26 |       { name: &#39;notme&#39;, maxCount: 1 },
  27 |       { name: &#39;butme&#39;, maxCount: 1 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  23 |     var form &#x3D; new FormData()
  24 |     var upload &#x3D; withFilter(skipSpecificFile)
&gt; 25 |     var parser &#x3D; upload.fields([
     |    ^ Global Variable
  26 |       { name: &#39;notme&#39;, maxCount: 1 },
  27 |       { name: &#39;butme&#39;, maxCount: 1 }
  28 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  43 |
  44 |   it(&#39;should report errors from fileFilter&#39;, function (done) {
&gt; 45 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  46 |     var upload &#x3D; withFilter(reportFakeError)
  47 |     var parser &#x3D; upload.single(&#39;test&#39;)
  48 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  44 |   it(&#39;should report errors from fileFilter&#39;, function (done) {
  45 |     var form &#x3D; new FormData()
&gt; 46 |     var upload &#x3D; withFilter(reportFakeError)
     |    ^ Global Variable
  47 |     var parser &#x3D; upload.single(&#39;test&#39;)
  48 |
  49 |     form.append(&#39;test&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  45 |     var form &#x3D; new FormData()
  46 |     var upload &#x3D; withFilter(reportFakeError)
&gt; 47 |     var parser &#x3D; upload.single(&#39;test&#39;)
     |    ^ Global Variable
  48 |
  49 |     form.append(&#39;test&#39;, util.file(&#39;tiny0.dat&#39;))
  50 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  36 |       assert.strictEqual(req.files.butme[0].fieldname, &#39;butme&#39;)
  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
&gt; 38 |       assert.strictEqual(req.files.butme[0].size, 7)
     |                                                  ^ Magic Number
  39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)
  40 |       done()
  41 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  37 |       assert.strictEqual(req.files.butme[0].originalname, &#39;tiny1.dat&#39;)
  38 |       assert.strictEqual(req.files.butme[0].size, 7)
&gt; 39 |       assert.strictEqual(req.files.butme[0].buffer.length, 7)
     |                                                           ^ Magic Number
  40 |       done()
  41 |     })
  42 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;fields.js</a>
              </td>
              <td class="has-text-right">11</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">136</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">123</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">17</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">13.821</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">1.138</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">18.563</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">63374.578</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">515</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">3520.81</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">99</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">3414.119</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">110.816</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  74 |     parser(req, null, function (err) {
  75 |       assert.ifError(err)
&gt; 76 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;body&#39;), false)
     |      ^ Assertion Roulette
  77 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;files&#39;), false)
  78 |       done()
  79 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  75 |       assert.ifError(err)
  76 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;body&#39;), false)
&gt; 77 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;files&#39;), false)
     |      ^ Assertion Roulette
  78 |       done()
  79 |     })
  80 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  92 |     parser(req, null, function (err) {
  93 |       assert.ifError(err)
&gt; 94 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;body&#39;), false)
     |      ^ Assertion Roulette
  95 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;files&#39;), false)
  96 |       done()
  97 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  93 |       assert.ifError(err)
  94 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;body&#39;), false)
&gt; 95 |       assert.strictEqual(Object.prototype.hasOwnProperty.call(req, &#39;files&#39;), false)
     |      ^ Assertion Roulette
  96 |       done()
  97 |     })
  98 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  11 |
  12 | describe(&#39;Fields&#39;, function () {
&gt; 13 |   var parser
     |  ^ Global Variable
  14 |
  15 |   before(function () {
  16 |     parser &#x3D; multer().fields([])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  18 |
  19 |   it(&#39;should process multiple fields&#39;, function (done) {
&gt; 20 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  21 |
  22 |     form.append(&#39;name&#39;, &#39;Multer&#39;)
  23 |     form.append(&#39;key&#39;, &#39;value&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |
  37 |   it(&#39;should process empty fields&#39;, function (done) {
&gt; 38 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  39 |
  40 |     form.append(&#39;name&#39;, &#39;Multer&#39;)
  41 |     form.append(&#39;key&#39;, &#39;&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  63 |
  64 |   it(&#39;should not process non-multipart POST request&#39;, function (done) {
&gt; 65 |     var req &#x3D; new stream.PassThrough()
     |    ^ Global Variable
  66 |
  67 |     req.end(&#39;name&#x3D;Multer&#39;)
  68 |     req.method &#x3D; &#39;POST&#39;</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  81 |
  82 |   it(&#39;should not process non-multipart GET request&#39;, function (done) {
&gt; 83 |     var req &#x3D; new stream.PassThrough()
     |    ^ Global Variable
  84 |
  85 |     req.end(&#39;name&#x3D;Multer&#39;)
  86 |     req.method &#x3D; &#39;GET&#39;</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |   testData.forEach(function (test) {
  101 |     it(&#39;should handle &#39; + test.name, function (done) {
&gt; 102 |       var form &#x3D; new FormData()
      |      ^ Global Variable
  103 |
  104 |       test.fields.forEach(function (field) {
  105 |         form.append(field.key, field.value)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  115 |
  116 |   it(&#39;should convert arrays into objects&#39;, function (done) {
&gt; 117 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  118 |
  119 |     form.append(&#39;obj[0]&#39;, &#39;a&#39;)
  120 |     form.append(&#39;obj[2]&#39;, &#39;c&#39;)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;express-integration.js</a>
              </td>
              <td class="has-text-right">57</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">242</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">208</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">29</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">13.942</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">2.06</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">26.159</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">161666.756</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">872</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">8981.486</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">136</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">6180.268</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">109.581</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  50 |
  51 |     router.use(function (err, req, res, next) {
&gt; 52 |       assert.strictEqual(err.code, &#39;LIMIT_FILE_SIZE&#39;)
     |      ^ Assertion Roulette
  53 |
  54 |       errorCalled++
  55 |       res.status(500).end(&#39;ERROR&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  60 |       assert.ifError(err)
  61 |
&gt; 62 |       assert.strictEqual(routeCalled, 0)
     |      ^ Assertion Roulette
  63 |       assert.strictEqual(errorCalled, 1)
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  65 |       assert.strictEqual(res.statusCode, 500)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  61 |
  62 |       assert.strictEqual(routeCalled, 0)
&gt; 63 |       assert.strictEqual(errorCalled, 1)
     |      ^ Assertion Roulette
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  65 |       assert.strictEqual(res.statusCode, 500)
  66 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  62 |       assert.strictEqual(routeCalled, 0)
  63 |       assert.strictEqual(errorCalled, 1)
&gt; 64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
     |      ^ Assertion Roulette
  65 |       assert.strictEqual(res.statusCode, 500)
  66 |
  67 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  63 |       assert.strictEqual(errorCalled, 1)
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
&gt; 65 |       assert.strictEqual(res.statusCode, 500)
     |      ^ Assertion Roulette
  66 |
  67 |       done()
  68 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  89 |
  90 |     router.use(function (err, req, res, next) {
&gt; 91 |       assert.strictEqual(err.message, &#39;TEST&#39;)
     |      ^ Assertion Roulette
  92 |
  93 |       errorCalled++
  94 |       res.status(500).end(&#39;ERROR&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   99 |       assert.ifError(err)
  100 |
&gt; 101 |       assert.strictEqual(routeCalled, 0)
      |      ^ Assertion Roulette
  102 |       assert.strictEqual(errorCalled, 1)
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  104 |       assert.strictEqual(res.statusCode, 500)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |
  101 |       assert.strictEqual(routeCalled, 0)
&gt; 102 |       assert.strictEqual(errorCalled, 1)
      |      ^ Assertion Roulette
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  104 |       assert.strictEqual(res.statusCode, 500)
  105 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  101 |       assert.strictEqual(routeCalled, 0)
  102 |       assert.strictEqual(errorCalled, 1)
&gt; 103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
      |      ^ Assertion Roulette
  104 |       assert.strictEqual(res.statusCode, 500)
  105 |
  106 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  102 |       assert.strictEqual(errorCalled, 1)
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
&gt; 104 |       assert.strictEqual(res.statusCode, 500)
      |      ^ Assertion Roulette
  105 |
  106 |       done()
  107 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  116 |
  117 |     app.use(function (err, req, res, next) {
&gt; 118 |       assert.strictEqual(err.message, &#39;Unexpected end of form&#39;)
      |      ^ Assertion Roulette
  119 |       res.status(200).end(&#39;Correct error&#39;)
  120 |     })
  121 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  140 |
  141 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 142 |       assert.strictEqual(res.statusCode, 200)
      |      ^ Assertion Roulette
  143 |       done()
  144 |     })
  145 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  160 |
  161 |     app.use(function (err, req, res, next) {
&gt; 162 |       assert.strictEqual(err.message, &#39;Malformed part header&#39;)
      |      ^ Assertion Roulette
  163 |       res.status(200).end(&#39;Correct error&#39;)
  164 |     })
  165 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  186 |
  187 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 188 |       assert.strictEqual(res.statusCode, 200)
      |      ^ Assertion Roulette
  189 |       done()
  190 |     })
  191 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  206 |
  207 |     app.use(function (err, req, res, next) {
&gt; 208 |       assert.strictEqual(err.message, &#39;Unexpected end of form&#39;)
      |      ^ Assertion Roulette
  209 |       res.status(200).end(&#39;Correct error&#39;)
  210 |     })
  211 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  232 |
  233 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 234 |       assert.strictEqual(res.statusCode, 200)
      |      ^ Assertion Roulette
  235 |       done()
  236 |     })
  237 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  11 | var concat &#x3D; require(&#39;concat-stream&#39;)
  12 |
&gt; 13 | var port &#x3D; 34279
  14 |
  15 | describe(&#39;Express Integration&#39;, function () {
  16 |   var app</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  14 |
  15 | describe(&#39;Express Integration&#39;, function () {
&gt; 16 |   var app
     |  ^ Global Variable
  17 |
  18 |   before(function (done) {
  19 |     app &#x3D; express()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  22 |
  23 |   function submitForm (form, path, cb) {
&gt; 24 |     var req &#x3D; form.submit(&#39;http:&#x2F;&#x2F;localhost:&#39; + port + path)
     |    ^ Global Variable
  25 |
  26 |     req.on(&#39;error&#39;, cb)
  27 |     req.on(&#39;response&#39;, function (res) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  34 |
  35 |   it(&#39;should work with express error handling&#39;, function (done) {
&gt; 36 |     var limits &#x3D; { fileSize: 200 }
     |    ^ Global Variable
  37 |     var upload &#x3D; multer({ limits: limits })
  38 |     var router &#x3D; new express.Router()
  39 |     var form &#x3D; new FormData()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  35 |   it(&#39;should work with express error handling&#39;, function (done) {
  36 |     var limits &#x3D; { fileSize: 200 }
&gt; 37 |     var upload &#x3D; multer({ limits: limits })
     |    ^ Global Variable
  38 |     var router &#x3D; new express.Router()
  39 |     var form &#x3D; new FormData()
  40 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |     var limits &#x3D; { fileSize: 200 }
  37 |     var upload &#x3D; multer({ limits: limits })
&gt; 38 |     var router &#x3D; new express.Router()
     |    ^ Global Variable
  39 |     var form &#x3D; new FormData()
  40 |
  41 |     var routeCalled &#x3D; 0</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  37 |     var upload &#x3D; multer({ limits: limits })
  38 |     var router &#x3D; new express.Router()
&gt; 39 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  40 |
  41 |     var routeCalled &#x3D; 0
  42 |     var errorCalled &#x3D; 0</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  39 |     var form &#x3D; new FormData()
  40 |
&gt; 41 |     var routeCalled &#x3D; 0
     |    ^ Global Variable
  42 |     var errorCalled &#x3D; 0
  43 |
  44 |     form.append(&#39;avatar&#39;, util.file(&#39;large.jpg&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  40 |
  41 |     var routeCalled &#x3D; 0
&gt; 42 |     var errorCalled &#x3D; 0
     |    ^ Global Variable
  43 |
  44 |     form.append(&#39;avatar&#39;, util.file(&#39;large.jpg&#39;))
  45 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  74 |     }
  75 |
&gt; 76 |     var upload &#x3D; multer({ fileFilter: fileFilter })
     |    ^ Global Variable
  77 |     var router &#x3D; new express.Router()
  78 |     var form &#x3D; new FormData()
  79 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  75 |
  76 |     var upload &#x3D; multer({ fileFilter: fileFilter })
&gt; 77 |     var router &#x3D; new express.Router()
     |    ^ Global Variable
  78 |     var form &#x3D; new FormData()
  79 |
  80 |     var routeCalled &#x3D; 0</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  76 |     var upload &#x3D; multer({ fileFilter: fileFilter })
  77 |     var router &#x3D; new express.Router()
&gt; 78 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  79 |
  80 |     var routeCalled &#x3D; 0
  81 |     var errorCalled &#x3D; 0</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  78 |     var form &#x3D; new FormData()
  79 |
&gt; 80 |     var routeCalled &#x3D; 0
     |    ^ Global Variable
  81 |     var errorCalled &#x3D; 0
  82 |
  83 |     form.append(&#39;avatar&#39;, util.file(&#39;large.jpg&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  79 |
  80 |     var routeCalled &#x3D; 0
&gt; 81 |     var errorCalled &#x3D; 0
     |    ^ Global Variable
  82 |
  83 |     form.append(&#39;avatar&#39;, util.file(&#39;large.jpg&#39;))
  84 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  109 |
  110 |   it(&#39;should not crash on malformed request&#39;, function (done) {
&gt; 111 |     var upload &#x3D; multer()
      |    ^ Global Variable
  112 |
  113 |     app.post(&#39;&#x2F;upload&#39;, upload.single(&#39;file&#39;), function (req, res) {
  114 |       res.status(500).end(&#39;Request should not be processed&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  120 |     })
  121 |
&gt; 122 |     var boundary &#x3D; &#39;AaB03x&#39;
      |    ^ Global Variable
  123 |     var body &#x3D; [
  124 |       &#39;--&#39; + boundary,
  125 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;file&quot;; filename&#x3D;&quot;test.txt&quot;&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  121 |
  122 |     var boundary &#x3D; &#39;AaB03x&#39;
&gt; 123 |     var body &#x3D; [
      |    ^ Global Variable
  124 |       &#39;--&#39; + boundary,
  125 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;file&quot;; filename&#x3D;&quot;test.txt&quot;&#39;,
  126 |       &#39;Content-Type: text&#x2F;plain&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  128 |       &#39;test without end boundary&#39;
  129 |     ].join(&#39;\r\n&#39;)
&gt; 130 |     var options &#x3D; {
      |    ^ Global Variable
  131 |       hostname: &#39;localhost&#39;,
  132 |       port,
  133 |       path: &#39;&#x2F;upload&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  139 |     }
  140 |
&gt; 141 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |    ^ Global Variable
  142 |       assert.strictEqual(res.statusCode, 200)
  143 |       done()
  144 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  153 |
  154 |   it(&#39;should not crash on malformed request that causes two errors to be emitted by busboy&#39;, function (done) {
&gt; 155 |     var upload &#x3D; multer()
      |    ^ Global Variable
  156 |
  157 |     app.post(&#39;&#x2F;upload2&#39;, upload.single(&#39;file&#39;), function (req, res) {
  158 |       res.status(500).end(&#39;Request should not be processed&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  164 |     })
  165 |
&gt; 166 |     var boundary &#x3D; &#39;AaB03x&#39;
      |    ^ Global Variable
  167 |     &#x2F;&#x2F; this payload causes two errors to be emitted by busboy: &#x60;Malformed part header&#x60; and &#x60;Unexpected end of form&#x60;
  168 |     var body &#x3D; [
  169 |       &#39;--&#39; + boundary,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  166 |     var boundary &#x3D; &#39;AaB03x&#39;
  167 |     &#x2F;&#x2F; this payload causes two errors to be emitted by busboy: &#x60;Malformed part header&#x60; and &#x60;Unexpected end of form&#x60;
&gt; 168 |     var body &#x3D; [
      |    ^ Global Variable
  169 |       &#39;--&#39; + boundary,
  170 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;file&quot;; filename&#x3D;&quot;test.txt&quot;&#39;,
  171 |       &#39;Content-Type: text&#x2F;plain&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  174 |       &#39;&#39;
  175 |     ].join(&#39;\r\n&#39;)
&gt; 176 |     var options &#x3D; {
      |    ^ Global Variable
  177 |       hostname: &#39;localhost&#39;,
  178 |       port,
  179 |       path: &#39;&#x2F;upload2&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  185 |     }
  186 |
&gt; 187 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |    ^ Global Variable
  188 |       assert.strictEqual(res.statusCode, 200)
  189 |       done()
  190 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  199 |
  200 |   it(&#39;should not crash on malformed multipart body with bad boundary&#39;, function (done) {
&gt; 201 |     var upload &#x3D; multer()
      |    ^ Global Variable
  202 |
  203 |     app.post(&#39;&#x2F;upload3&#39;, upload.single(&#39;image&#39;), function (req, res) {
  204 |       res.status(500).end(&#39;Request should not be processed&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  210 |     })
  211 |
&gt; 212 |     var boundary &#x3D; &#39;----FormBoundary&#39;
      |    ^ Global Variable
  213 |     var body &#x3D; [
  214 |       &#39;------FormBoundary&#39;,
  215 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;image&quot;; filename&#x3D;&quot;&quot;&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  211 |
  212 |     var boundary &#x3D; &#39;----FormBoundary&#39;
&gt; 213 |     var body &#x3D; [
      |    ^ Global Variable
  214 |       &#39;------FormBoundary&#39;,
  215 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;image&quot;; filename&#x3D;&quot;&quot;&#39;,
  216 |       &#39;Content-Type: application&#x2F;octet-stream&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  220 |     ].join(&#39;\r\n&#39;)
  221 |
&gt; 222 |     var options &#x3D; {
      |    ^ Global Variable
  223 |       hostname: &#39;localhost&#39;,
  224 |       port,
  225 |       path: &#39;&#x2F;upload3&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  231 |     }
  232 |
&gt; 233 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |    ^ Global Variable
  234 |       assert.strictEqual(res.statusCode, 200)
  235 |       done()
  236 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  60 |       assert.ifError(err)
  61 |
&gt; 62 |       assert.strictEqual(routeCalled, 0)
     |                                      ^ Magic Number
  63 |       assert.strictEqual(errorCalled, 1)
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  65 |       assert.strictEqual(res.statusCode, 500)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  61 |
  62 |       assert.strictEqual(routeCalled, 0)
&gt; 63 |       assert.strictEqual(errorCalled, 1)
     |                                      ^ Magic Number
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  65 |       assert.strictEqual(res.statusCode, 500)
  66 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  63 |       assert.strictEqual(errorCalled, 1)
  64 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
&gt; 65 |       assert.strictEqual(res.statusCode, 500)
     |                                         ^ Magic Number
  66 |
  67 |       done()
  68 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   99 |       assert.ifError(err)
  100 |
&gt; 101 |       assert.strictEqual(routeCalled, 0)
      |                                      ^ Magic Number
  102 |       assert.strictEqual(errorCalled, 1)
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  104 |       assert.strictEqual(res.statusCode, 500)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  100 |
  101 |       assert.strictEqual(routeCalled, 0)
&gt; 102 |       assert.strictEqual(errorCalled, 1)
      |                                      ^ Magic Number
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
  104 |       assert.strictEqual(res.statusCode, 500)
  105 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  102 |       assert.strictEqual(errorCalled, 1)
  103 |       assert.strictEqual(body.toString(), &#39;ERROR&#39;)
&gt; 104 |       assert.strictEqual(res.statusCode, 500)
      |                                         ^ Magic Number
  105 |
  106 |       done()
  107 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  140 |
  141 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 142 |       assert.strictEqual(res.statusCode, 200)
      |                                         ^ Magic Number
  143 |       done()
  144 |     })
  145 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  186 |
  187 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 188 |       assert.strictEqual(res.statusCode, 200)
      |                                         ^ Magic Number
  189 |       done()
  190 |     })
  191 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  232 |
  233 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
&gt; 234 |       assert.strictEqual(res.statusCode, 200)
      |                                         ^ Magic Number
  235 |       done()
  236 |     })
  237 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Mystery Guest</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  139 |     }
  140 |
&gt; 141 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |              ^ Mystery Guest
  142 |       assert.strictEqual(res.statusCode, 200)
  143 |       done()
  144 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  185 |     }
  186 |
&gt; 187 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |              ^ Mystery Guest
  188 |       assert.strictEqual(res.statusCode, 200)
  189 |       done()
  190 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  231 |     }
  232 |
&gt; 233 |     var req &#x3D; http.request(options, (res) &#x3D;&gt; {
      |              ^ Mystery Guest
  234 |       assert.strictEqual(res.statusCode, 200)
  235 |       done()
  236 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;expected-files.js</a>
              </td>
              <td class="has-text-right">30</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">116</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">118</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">15</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">12.712</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">1.082</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">28</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">90889.575</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">539</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">5049.421</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">65</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">3246.056</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">107.799</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  22 |
  23 |     util.submitForm(parser, form, function (err, req) {
&gt; 24 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
     |      ^ Assertion Roulette
  25 |       assert.strictEqual(err.field, &#39;notme&#39;)
  26 |       done()
  27 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  23 |     util.submitForm(parser, form, function (err, req) {
  24 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 25 |       assert.strictEqual(err.field, &#39;notme&#39;)
     |      ^ Assertion Roulette
  26 |       done()
  27 |     })
  28 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  36 |
  37 |     util.submitForm(parser, form, function (err, req) {
&gt; 38 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
     |      ^ Assertion Roulette
  39 |       assert.strictEqual(err.field, &#39;notme&#39;)
  40 |       done()
  41 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  37 |     util.submitForm(parser, form, function (err, req) {
  38 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 39 |       assert.strictEqual(err.field, &#39;notme&#39;)
     |      ^ Assertion Roulette
  40 |       done()
  41 |     })
  42 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  50 |
  51 |     util.submitForm(parser, form, function (err, req) {
&gt; 52 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
     |      ^ Assertion Roulette
  53 |       assert.strictEqual(err.field, &#39;butme&#39;)
  54 |       done()
  55 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  51 |     util.submitForm(parser, form, function (err, req) {
  52 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 53 |       assert.strictEqual(err.field, &#39;butme&#39;)
     |      ^ Assertion Roulette
  54 |       done()
  55 |     })
  56 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  70 |       assert.ifError(err)
  71 |
&gt; 72 |       assert.strictEqual(req.files.butme.length, 2)
     |      ^ Assertion Roulette
  73 |       assert.strictEqual(req.files.andme.length, 1)
  74 |
  75 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  71 |
  72 |       assert.strictEqual(req.files.butme.length, 2)
&gt; 73 |       assert.strictEqual(req.files.andme.length, 1)
     |      ^ Assertion Roulette
  74 |
  75 |       done()
  76 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  90 |
  91 |     util.submitForm(parser, form, function (err, req) {
&gt; 92 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
     |      ^ Assertion Roulette
  93 |       assert.strictEqual(err.field, &#39;notme&#39;)
  94 |       done()
  95 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  91 |     util.submitForm(parser, form, function (err, req) {
  92 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 93 |       assert.strictEqual(err.field, &#39;notme&#39;)
     |      ^ Assertion Roulette
  94 |       done()
  95 |     })
  96 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  106 |     util.submitForm(parser, form, function (err, req) {
  107 |       assert.ifError(err)
&gt; 108 |       assert.strictEqual(req.files.length, 3)
      |      ^ Assertion Roulette
  109 |       assert.strictEqual(req.files[0].fieldname, &#39;butme&#39;)
  110 |       assert.strictEqual(req.files[1].fieldname, &#39;butme&#39;)
  111 |       assert.strictEqual(req.files[2].fieldname, &#39;andme&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  107 |       assert.ifError(err)
  108 |       assert.strictEqual(req.files.length, 3)
&gt; 109 |       assert.strictEqual(req.files[0].fieldname, &#39;butme&#39;)
      |      ^ Assertion Roulette
  110 |       assert.strictEqual(req.files[1].fieldname, &#39;butme&#39;)
  111 |       assert.strictEqual(req.files[2].fieldname, &#39;andme&#39;)
  112 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  108 |       assert.strictEqual(req.files.length, 3)
  109 |       assert.strictEqual(req.files[0].fieldname, &#39;butme&#39;)
&gt; 110 |       assert.strictEqual(req.files[1].fieldname, &#39;butme&#39;)
      |      ^ Assertion Roulette
  111 |       assert.strictEqual(req.files[2].fieldname, &#39;andme&#39;)
  112 |       done()
  113 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  109 |       assert.strictEqual(req.files[0].fieldname, &#39;butme&#39;)
  110 |       assert.strictEqual(req.files[1].fieldname, &#39;butme&#39;)
&gt; 111 |       assert.strictEqual(req.files[2].fieldname, &#39;andme&#39;)
      |      ^ Assertion Roulette
  112 |       done()
  113 |     })
  114 |   })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>   8 |
   9 | describe(&#39;Expected files&#39;, function () {
&gt; 10 |   var upload
     |  ^ Global Variable
  11 |
  12 |   before(function (done) {
  13 |     upload &#x3D; multer()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  16 |
  17 |   it(&#39;should reject single unexpected file&#39;, function (done) {
&gt; 18 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  19 |     var parser &#x3D; upload.single(&#39;butme&#39;)
  20 |
  21 |     form.append(&#39;notme&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  17 |   it(&#39;should reject single unexpected file&#39;, function (done) {
  18 |     var form &#x3D; new FormData()
&gt; 19 |     var parser &#x3D; upload.single(&#39;butme&#39;)
     |    ^ Global Variable
  20 |
  21 |     form.append(&#39;notme&#39;, util.file(&#39;small0.dat&#39;))
  22 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  29 |
  30 |   it(&#39;should reject array of multiple files&#39;, function (done) {
&gt; 31 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  32 |     var parser &#x3D; upload.array(&#39;butme&#39;, 4)
  33 |
  34 |     form.append(&#39;notme&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  30 |   it(&#39;should reject array of multiple files&#39;, function (done) {
  31 |     var form &#x3D; new FormData()
&gt; 32 |     var parser &#x3D; upload.array(&#39;butme&#39;, 4)
     |    ^ Global Variable
  33 |
  34 |     form.append(&#39;notme&#39;, util.file(&#39;small0.dat&#39;))
  35 |     form.append(&#39;notme&#39;, util.file(&#39;small1.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  43 |
  44 |   it(&#39;should reject overflowing arrays&#39;, function (done) {
&gt; 45 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  46 |     var parser &#x3D; upload.array(&#39;butme&#39;, 1)
  47 |
  48 |     form.append(&#39;butme&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  44 |   it(&#39;should reject overflowing arrays&#39;, function (done) {
  45 |     var form &#x3D; new FormData()
&gt; 46 |     var parser &#x3D; upload.array(&#39;butme&#39;, 1)
     |    ^ Global Variable
  47 |
  48 |     form.append(&#39;butme&#39;, util.file(&#39;small0.dat&#39;))
  49 |     form.append(&#39;butme&#39;, util.file(&#39;small1.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  57 |
  58 |   it(&#39;should accept files with expected fieldname&#39;, function (done) {
&gt; 59 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  60 |     var parser &#x3D; upload.fields([
  61 |       { name: &#39;butme&#39;, maxCount: 2 },
  62 |       { name: &#39;andme&#39;, maxCount: 2 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  58 |   it(&#39;should accept files with expected fieldname&#39;, function (done) {
  59 |     var form &#x3D; new FormData()
&gt; 60 |     var parser &#x3D; upload.fields([
     |    ^ Global Variable
  61 |       { name: &#39;butme&#39;, maxCount: 2 },
  62 |       { name: &#39;andme&#39;, maxCount: 2 }
  63 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  78 |
  79 |   it(&#39;should reject files with unexpected fieldname&#39;, function (done) {
&gt; 80 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  81 |     var parser &#x3D; upload.fields([
  82 |       { name: &#39;butme&#39;, maxCount: 2 },
  83 |       { name: &#39;andme&#39;, maxCount: 2 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  79 |   it(&#39;should reject files with unexpected fieldname&#39;, function (done) {
  80 |     var form &#x3D; new FormData()
&gt; 81 |     var parser &#x3D; upload.fields([
     |    ^ Global Variable
  82 |       { name: &#39;butme&#39;, maxCount: 2 },
  83 |       { name: &#39;andme&#39;, maxCount: 2 }
  84 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   97 |
   98 |   it(&#39;should allow any file to come thru&#39;, function (done) {
&gt;  99 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  100 |     var parser &#x3D; upload.any()
  101 |
  102 |     form.append(&#39;butme&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   98 |   it(&#39;should allow any file to come thru&#39;, function (done) {
   99 |     var form &#x3D; new FormData()
&gt; 100 |     var parser &#x3D; upload.any()
      |    ^ Global Variable
  101 |
  102 |     form.append(&#39;butme&#39;, util.file(&#39;small0.dat&#39;))
  103 |     form.append(&#39;butme&#39;, util.file(&#39;small1.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  70 |       assert.ifError(err)
  71 |
&gt; 72 |       assert.strictEqual(req.files.butme.length, 2)
     |                                                 ^ Magic Number
  73 |       assert.strictEqual(req.files.andme.length, 1)
  74 |
  75 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  71 |
  72 |       assert.strictEqual(req.files.butme.length, 2)
&gt; 73 |       assert.strictEqual(req.files.andme.length, 1)
     |                                                 ^ Magic Number
  74 |
  75 |       done()
  76 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  106 |     util.submitForm(parser, form, function (err, req) {
  107 |       assert.ifError(err)
&gt; 108 |       assert.strictEqual(req.files.length, 3)
      |                                           ^ Magic Number
  109 |       assert.strictEqual(req.files[0].fieldname, &#39;butme&#39;)
  110 |       assert.strictEqual(req.files[1].fieldname, &#39;butme&#39;)
  111 |       assert.strictEqual(req.files[2].fieldname, &#39;andme&#39;)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;error-handling.js</a>
              </td>
              <td class="has-text-right">60</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">281</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">286</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">34</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">11.888</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">2.853</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">35.967</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">307804.805</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">1213</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">17100.267</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">133</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">8558.058</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">105.341</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  26 |
  27 |     util.submitForm(upload, form, function (err, req) {
&gt; 28 |       assert.strictEqual(err instanceof Error, true)
     |      ^ Assertion Roulette
  29 |       assert.strictEqual(err instanceof multer.MulterError, true)
  30 |       done()
  31 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  27 |     util.submitForm(upload, form, function (err, req) {
  28 |       assert.strictEqual(err instanceof Error, true)
&gt; 29 |       assert.strictEqual(err instanceof multer.MulterError, true)
     |      ^ Assertion Roulette
  30 |       done()
  31 |     })
  32 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  58 |
  59 |     util.submitForm(parser, form, function (err, req) {
&gt; 60 |       assert.strictEqual(err.code, &#39;LIMIT_FILE_SIZE&#39;)
     |      ^ Assertion Roulette
  61 |       assert.strictEqual(err.field, &#39;small0&#39;)
  62 |       done()
  63 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  59 |     util.submitForm(parser, form, function (err, req) {
  60 |       assert.strictEqual(err.code, &#39;LIMIT_FILE_SIZE&#39;)
&gt; 61 |       assert.strictEqual(err.field, &#39;small0&#39;)
     |      ^ Assertion Roulette
  62 |       done()
  63 |     })
  64 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  115 |
  116 |     util.submitForm(parser, form, function (err, req) {
&gt; 117 |       assert.strictEqual(err.code, &#39;LIMIT_FIELD_VALUE&#39;)
      |      ^ Assertion Roulette
  118 |       assert.strictEqual(err.field, &#39;field1&#39;)
  119 |       done()
  120 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  116 |     util.submitForm(parser, form, function (err, req) {
  117 |       assert.strictEqual(err.code, &#39;LIMIT_FIELD_VALUE&#39;)
&gt; 118 |       assert.strictEqual(err.field, &#39;field1&#39;)
      |      ^ Assertion Roulette
  119 |       done()
  120 |     })
  121 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  143 |
  144 |     util.submitForm(parser, form, function (err, req) {
&gt; 145 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
      |      ^ Assertion Roulette
  146 |       assert.strictEqual(err.field, &#39;small0&#39;)
  147 |       done()
  148 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  144 |     util.submitForm(parser, form, function (err, req) {
  145 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 146 |       assert.strictEqual(err.field, &#39;small0&#39;)
      |      ^ Assertion Roulette
  147 |       done()
  148 |     })
  149 |   })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  206 |
  207 |     util.submitForm(parser, form, function (err, req) {
&gt; 208 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
      |      ^ Assertion Roulette
  209 |       assert.strictEqual(err.field, &#39;small0&#39;)
  210 |
  211 |       assert.strictEqual(err.storageErrors.length, 1)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  207 |     util.submitForm(parser, form, function (err, req) {
  208 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 209 |       assert.strictEqual(err.field, &#39;small0&#39;)
      |      ^ Assertion Roulette
  210 |
  211 |       assert.strictEqual(err.storageErrors.length, 1)
  212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  209 |       assert.strictEqual(err.field, &#39;small0&#39;)
  210 |
&gt; 211 |       assert.strictEqual(err.storageErrors.length, 1)
      |      ^ Assertion Roulette
  212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)
  213 |       assert.strictEqual(err.storageErrors[0].field, &#39;tiny0&#39;)
  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  210 |
  211 |       assert.strictEqual(err.storageErrors.length, 1)
&gt; 212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)
      |      ^ Assertion Roulette
  213 |       assert.strictEqual(err.storageErrors[0].field, &#39;tiny0&#39;)
  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)
  215 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  211 |       assert.strictEqual(err.storageErrors.length, 1)
  212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)
&gt; 213 |       assert.strictEqual(err.storageErrors[0].field, &#39;tiny0&#39;)
      |      ^ Assertion Roulette
  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)
  215 |
  216 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)
  213 |       assert.strictEqual(err.storageErrors[0].field, &#39;tiny0&#39;)
&gt; 214 |       assert.strictEqual(err.storageErrors[0].file, req.file)
      |      ^ Assertion Roulette
  215 |
  216 |       done()
  217 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  10 |
  11 | function withLimits (limits, fields) {
&gt; 12 |   var storage &#x3D; multer.memoryStorage()
     |  ^ Global Variable
  13 |   return multer({ storage: storage, limits: limits }).fields(fields)
  14 | }
  15 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  16 | describe(&#39;Error Handling&#39;, function () {
  17 |   it(&#39;should be an instance of both &#x60;Error&#x60; and &#x60;MulterError&#x60; classes in case of the Multer\&#39;s error&#39;, function (done) {
&gt; 18 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  19 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
  20 |     var upload &#x3D; multer({ storage: storage }).fields([
  21 |       { name: &#39;small0&#39;, maxCount: 1 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  17 |   it(&#39;should be an instance of both &#x60;Error&#x60; and &#x60;MulterError&#x60; classes in case of the Multer\&#39;s error&#39;, function (done) {
  18 |     var form &#x3D; new FormData()
&gt; 19 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
     |    ^ Global Variable
  20 |     var upload &#x3D; multer({ storage: storage }).fields([
  21 |       { name: &#39;small0&#39;, maxCount: 1 }
  22 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  18 |     var form &#x3D; new FormData()
  19 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
&gt; 20 |     var upload &#x3D; multer({ storage: storage }).fields([
     |    ^ Global Variable
  21 |       { name: &#39;small0&#39;, maxCount: 1 }
  22 |     ])
  23 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  33 |
  34 |   it(&#39;should respect parts limit&#39;, function (done) {
&gt; 35 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  36 |     var parser &#x3D; withLimits({ parts: 1 }, [
  37 |       { name: &#39;small0&#39;, maxCount: 1 }
  38 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  34 |   it(&#39;should respect parts limit&#39;, function (done) {
  35 |     var form &#x3D; new FormData()
&gt; 36 |     var parser &#x3D; withLimits({ parts: 1 }, [
     |    ^ Global Variable
  37 |       { name: &#39;small0&#39;, maxCount: 1 }
  38 |     ])
  39 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  48 |
  49 |   it(&#39;should respect file size limit&#39;, function (done) {
&gt; 50 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  51 |     var parser &#x3D; withLimits({ fileSize: 1500 }, [
  52 |       { name: &#39;tiny0&#39;, maxCount: 1 },
  53 |       { name: &#39;small0&#39;, maxCount: 1 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  49 |   it(&#39;should respect file size limit&#39;, function (done) {
  50 |     var form &#x3D; new FormData()
&gt; 51 |     var parser &#x3D; withLimits({ fileSize: 1500 }, [
     |    ^ Global Variable
  52 |       { name: &#39;tiny0&#39;, maxCount: 1 },
  53 |       { name: &#39;small0&#39;, maxCount: 1 }
  54 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  65 |
  66 |   it(&#39;should respect file count limit&#39;, function (done) {
&gt; 67 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  68 |     var parser &#x3D; withLimits({ files: 1 }, [
  69 |       { name: &#39;small0&#39;, maxCount: 1 },
  70 |       { name: &#39;small1&#39;, maxCount: 1 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  66 |   it(&#39;should respect file count limit&#39;, function (done) {
  67 |     var form &#x3D; new FormData()
&gt; 68 |     var parser &#x3D; withLimits({ files: 1 }, [
     |    ^ Global Variable
  69 |       { name: &#39;small0&#39;, maxCount: 1 },
  70 |       { name: &#39;small1&#39;, maxCount: 1 }
  71 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  81 |
  82 |   it(&#39;should respect file key limit&#39;, function (done) {
&gt; 83 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  84 |     var parser &#x3D; withLimits({ fieldNameSize: 4 }, [
  85 |       { name: &#39;small0&#39;, maxCount: 1 }
  86 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  82 |   it(&#39;should respect file key limit&#39;, function (done) {
  83 |     var form &#x3D; new FormData()
&gt; 84 |     var parser &#x3D; withLimits({ fieldNameSize: 4 }, [
     |    ^ Global Variable
  85 |       { name: &#39;small0&#39;, maxCount: 1 }
  86 |     ])
  87 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   95 |
   96 |   it(&#39;should respect field key limit&#39;, function (done) {
&gt;  97 |     var form &#x3D; new FormData()
      |    ^ Global Variable
   98 |     var parser &#x3D; withLimits({ fieldNameSize: 4 }, [])
   99 |
  100 |     form.append(&#39;ok&#39;, &#39;SMILE&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>   96 |   it(&#39;should respect field key limit&#39;, function (done) {
   97 |     var form &#x3D; new FormData()
&gt;  98 |     var parser &#x3D; withLimits({ fieldNameSize: 4 }, [])
      |    ^ Global Variable
   99 |
  100 |     form.append(&#39;ok&#39;, &#39;SMILE&#39;)
  101 |     form.append(&#39;blowup&#39;, &#39;BOOM!&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  108 |
  109 |   it(&#39;should respect field value limit&#39;, function (done) {
&gt; 110 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  111 |     var parser &#x3D; withLimits({ fieldSize: 16 }, [])
  112 |
  113 |     form.append(&#39;field0&#39;, &#39;This is okay&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  109 |   it(&#39;should respect field value limit&#39;, function (done) {
  110 |     var form &#x3D; new FormData()
&gt; 111 |     var parser &#x3D; withLimits({ fieldSize: 16 }, [])
      |    ^ Global Variable
  112 |
  113 |     form.append(&#39;field0&#39;, &#39;This is okay&#39;)
  114 |     form.append(&#39;field1&#39;, &#39;This will make the parser explode&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  122 |
  123 |   it(&#39;should respect field count limit&#39;, function (done) {
&gt; 124 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  125 |     var parser &#x3D; withLimits({ fields: 1 }, [])
  126 |
  127 |     form.append(&#39;field0&#39;, &#39;BOOM!&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  123 |   it(&#39;should respect field count limit&#39;, function (done) {
  124 |     var form &#x3D; new FormData()
&gt; 125 |     var parser &#x3D; withLimits({ fields: 1 }, [])
      |    ^ Global Variable
  126 |
  127 |     form.append(&#39;field0&#39;, &#39;BOOM!&#39;)
  128 |     form.append(&#39;field1&#39;, &#39;BOOM!&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  135 |
  136 |   it(&#39;should respect fields given&#39;, function (done) {
&gt; 137 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  138 |     var parser &#x3D; withLimits(undefined, [
  139 |       { name: &#39;wrongname&#39;, maxCount: 1 }
  140 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  136 |   it(&#39;should respect fields given&#39;, function (done) {
  137 |     var form &#x3D; new FormData()
&gt; 138 |     var parser &#x3D; withLimits(undefined, [
      |    ^ Global Variable
  139 |       { name: &#39;wrongname&#39;, maxCount: 1 }
  140 |     ])
  141 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  150 |
  151 |   it(&#39;should notify of missing field name&#39;, function (done) {
&gt; 152 |     var req &#x3D; new stream.PassThrough()
      |    ^ Global Variable
  153 |     var storage &#x3D; multer.memoryStorage()
  154 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  155 |     var boundary &#x3D; &#39;AaB03x&#39;</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  151 |   it(&#39;should notify of missing field name&#39;, function (done) {
  152 |     var req &#x3D; new stream.PassThrough()
&gt; 153 |     var storage &#x3D; multer.memoryStorage()
      |    ^ Global Variable
  154 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  155 |     var boundary &#x3D; &#39;AaB03x&#39;
  156 |     var body &#x3D; [</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  152 |     var req &#x3D; new stream.PassThrough()
  153 |     var storage &#x3D; multer.memoryStorage()
&gt; 154 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
      |    ^ Global Variable
  155 |     var boundary &#x3D; &#39;AaB03x&#39;
  156 |     var body &#x3D; [
  157 |       &#39;--&#39; + boundary,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  153 |     var storage &#x3D; multer.memoryStorage()
  154 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
&gt; 155 |     var boundary &#x3D; &#39;AaB03x&#39;
      |    ^ Global Variable
  156 |     var body &#x3D; [
  157 |       &#39;--&#39; + boundary,
  158 |       &#39;Content-Disposition: form-data&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  154 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  155 |     var boundary &#x3D; &#39;AaB03x&#39;
&gt; 156 |     var body &#x3D; [
      |    ^ Global Variable
  157 |       &#39;--&#39; + boundary,
  158 |       &#39;Content-Disposition: form-data&#39;,
  159 |       &#39;&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  177 |
  178 |   it(&#39;should notify of missing field name&#39;, function (done) {
&gt; 179 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  180 |     var storage &#x3D; multer.memoryStorage()
  181 |     var parser &#x3D; multer({ storage: storage }).single(&#39;small0&#39;)
  182 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  178 |   it(&#39;should notify of missing field name&#39;, function (done) {
  179 |     var form &#x3D; new FormData()
&gt; 180 |     var storage &#x3D; multer.memoryStorage()
      |    ^ Global Variable
  181 |     var parser &#x3D; multer({ storage: storage }).single(&#39;small0&#39;)
  182 |
  183 |     form.append(&#39;&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  179 |     var form &#x3D; new FormData()
  180 |     var storage &#x3D; multer.memoryStorage()
&gt; 181 |     var parser &#x3D; multer({ storage: storage }).single(&#39;small0&#39;)
      |    ^ Global Variable
  182 |
  183 |     form.append(&#39;&#39;, util.file(&#39;small0.dat&#39;))
  184 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  190 |
  191 |   it(&#39;should report errors from storage engines&#39;, function (done) {
&gt; 192 |     var storage &#x3D; multer.memoryStorage()
      |    ^ Global Variable
  193 |
  194 |     storage._removeFile &#x3D; function _removeFile (req, file, cb) {
  195 |       var err &#x3D; new Error(&#39;Test error&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  193 |
  194 |     storage._removeFile &#x3D; function _removeFile (req, file, cb) {
&gt; 195 |       var err &#x3D; new Error(&#39;Test error&#39;)
      |      ^ Global Variable
  196 |       err.code &#x3D; &#39;TEST&#39;
  197 |       cb(err)
  198 |     }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  198 |     }
  199 |
&gt; 200 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  201 |     var upload &#x3D; multer({ storage: storage })
  202 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
  203 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  199 |
  200 |     var form &#x3D; new FormData()
&gt; 201 |     var upload &#x3D; multer({ storage: storage })
      |    ^ Global Variable
  202 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
  203 |
  204 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  200 |     var form &#x3D; new FormData()
  201 |     var upload &#x3D; multer({ storage: storage })
&gt; 202 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
      |    ^ Global Variable
  203 |
  204 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))
  205 |     form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  219 |
  220 |   it(&#39;should report errors from busboy constructor&#39;, function (done) {
&gt; 221 |     var req &#x3D; new stream.PassThrough()
      |    ^ Global Variable
  222 |     var storage &#x3D; multer.memoryStorage()
  223 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  224 |     var body &#x3D; &#39;test&#39;</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  220 |   it(&#39;should report errors from busboy constructor&#39;, function (done) {
  221 |     var req &#x3D; new stream.PassThrough()
&gt; 222 |     var storage &#x3D; multer.memoryStorage()
      |    ^ Global Variable
  223 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  224 |     var body &#x3D; &#39;test&#39;
  225 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  221 |     var req &#x3D; new stream.PassThrough()
  222 |     var storage &#x3D; multer.memoryStorage()
&gt; 223 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
      |    ^ Global Variable
  224 |     var body &#x3D; &#39;test&#39;
  225 |
  226 |     req.headers &#x3D; {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  222 |     var storage &#x3D; multer.memoryStorage()
  223 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
&gt; 224 |     var body &#x3D; &#39;test&#39;
      |    ^ Global Variable
  225 |
  226 |     req.headers &#x3D; {
  227 |       &#39;content-type&#39;: &#39;multipart&#x2F;form-data&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  238 |
  239 |   it(&#39;should report errors from busboy parsing&#39;, function (done) {
&gt; 240 |     var req &#x3D; new stream.PassThrough()
      |    ^ Global Variable
  241 |     var storage &#x3D; multer.memoryStorage()
  242 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  243 |     var boundary &#x3D; &#39;AaB03x&#39;</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  239 |   it(&#39;should report errors from busboy parsing&#39;, function (done) {
  240 |     var req &#x3D; new stream.PassThrough()
&gt; 241 |     var storage &#x3D; multer.memoryStorage()
      |    ^ Global Variable
  242 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  243 |     var boundary &#x3D; &#39;AaB03x&#39;
  244 |     var body &#x3D; [</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  240 |     var req &#x3D; new stream.PassThrough()
  241 |     var storage &#x3D; multer.memoryStorage()
&gt; 242 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
      |    ^ Global Variable
  243 |     var boundary &#x3D; &#39;AaB03x&#39;
  244 |     var body &#x3D; [
  245 |       &#39;--&#39; + boundary,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  241 |     var storage &#x3D; multer.memoryStorage()
  242 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
&gt; 243 |     var boundary &#x3D; &#39;AaB03x&#39;
      |    ^ Global Variable
  244 |     var body &#x3D; [
  245 |       &#39;--&#39; + boundary,
  246 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;tiny0&quot;; filename&#x3D;&quot;test.txt&quot;&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  242 |     var upload &#x3D; multer({ storage: storage }).single(&#39;tiny0&#39;)
  243 |     var boundary &#x3D; &#39;AaB03x&#39;
&gt; 244 |     var body &#x3D; [
      |    ^ Global Variable
  245 |       &#39;--&#39; + boundary,
  246 |       &#39;Content-Disposition: form-data; name&#x3D;&quot;tiny0&quot;; filename&#x3D;&quot;test.txt&quot;&#39;,
  247 |       &#39;Content-Type: text&#x2F;plain&#39;,</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  264 |
  265 |   it(&#39;should gracefully handle more than one error at a time&#39;, function (done) {
&gt; 266 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  267 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
  268 |     var upload &#x3D; multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
  269 |       { name: &#39;small0&#39;, maxCount: 1 }</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  265 |   it(&#39;should gracefully handle more than one error at a time&#39;, function (done) {
  266 |     var form &#x3D; new FormData()
&gt; 267 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
      |    ^ Global Variable
  268 |     var upload &#x3D; multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
  269 |       { name: &#39;small0&#39;, maxCount: 1 }
  270 |     ])</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  266 |     var form &#x3D; new FormData()
  267 |     var storage &#x3D; multer.diskStorage({ destination: os.tmpdir() })
&gt; 268 |     var upload &#x3D; multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
      |    ^ Global Variable
  269 |       { name: &#39;small0&#39;, maxCount: 1 }
  270 |     ])
  271 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  209 |       assert.strictEqual(err.field, &#39;small0&#39;)
  210 |
&gt; 211 |       assert.strictEqual(err.storageErrors.length, 1)
      |                                                   ^ Magic Number
  212 |       assert.strictEqual(err.storageErrors[0].code, &#39;TEST&#39;)
  213 |       assert.strictEqual(err.storageErrors[0].field, &#39;tiny0&#39;)
  214 |       assert.strictEqual(err.storageErrors[0].file, req.file)</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <a class="toggle-link" href="javascript:;" onclick="toggleDetails(this)">+ &#x2F;Users&#x2F;gabriel.amaralmercos.com&#x2F;Desktop&#x2F;research-javascript-test-smells&#x2F;repositories&#x2F;multer&#x2F;test&#x2F;disk-storage.js</a>
              </td>
              <td class="has-text-right">84</td>
            </tr>
            <tr class="details-row hidden">
              <td colspan="2">
                <div class="columns is-multiline is-centered">
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Physical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">189</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Logical SLOC</div>
                      <div class="title has-text-weight-light is-size-4">207</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic</div>
                      <div class="title has-text-weight-light is-size-4">17</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Cyclomatic Density</div>
                      <div class="title has-text-weight-light is-size-4">8.213</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Bugs</div>
                      <div class="title has-text-weight-light is-size-4">2.768</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Difficulty</div>
                      <div class="title has-text-weight-light is-size-4">35.165</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead effort</div>
                      <div class="title has-text-weight-light is-size-4">291961.236</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Length</div>
                      <div class="title has-text-weight-light is-size-4">1188</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Time</div>
                      <div class="title has-text-weight-light is-size-4">16220.069</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Vocabulary</div>
                      <div class="title has-text-weight-light is-size-4">127</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Halstead Volume</div>
                      <div class="title has-text-weight-light is-size-4">8302.557</div>
                    </div>
                  </div>
                  <div class="column is-one-quarter">
                    <div class="box px-4 py-4">
                      <div class="heading">Maintainability</div>
                      <div class="title has-text-weight-light is-size-4">95.909</div>
                    </div>
                  </div>
                </div>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Assertion Roulette</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  39 |       assert.ifError(err)
  40 |
&gt; 41 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
     |      ^ Assertion Roulette
  42 |
  43 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  41 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
  42 |
&gt; 43 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
     |      ^ Assertion Roulette
  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  45 |       assert.strictEqual(req.file.size, 1778)
  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  42 |
  43 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
&gt; 44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
     |      ^ Assertion Roulette
  45 |       assert.strictEqual(req.file.size, 1778)
  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)
  47 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  43 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
&gt; 45 |       assert.strictEqual(req.file.size, 1778)
     |      ^ Assertion Roulette
  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)
  47 |
  48 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  45 |       assert.strictEqual(req.file.size, 1778)
&gt; 46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)
     |      ^ Assertion Roulette
  47 |
  48 |       done()
  49 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  68 |       assert.ifError(err)
  69 |
&gt; 70 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
     |      ^ Assertion Roulette
  71 |       assert.strictEqual(req.body.version, &#39;&#39;)
  72 |       assert.strictEqual(req.body.year, &#39;&#39;)
  73 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  69 |
  70 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
&gt; 71 |       assert.strictEqual(req.body.version, &#39;&#39;)
     |      ^ Assertion Roulette
  72 |       assert.strictEqual(req.body.year, &#39;&#39;)
  73 |
  74 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  70 |       assert.strictEqual(req.body.name, &#39;Multer&#39;)
  71 |       assert.strictEqual(req.body.version, &#39;&#39;)
&gt; 72 |       assert.strictEqual(req.body.year, &#39;&#39;)
     |      ^ Assertion Roulette
  73 |
  74 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
  75 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  72 |       assert.strictEqual(req.body.year, &#39;&#39;)
  73 |
&gt; 74 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
     |      ^ Assertion Roulette
  75 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
  76 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  77 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  73 |
  74 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
&gt; 75 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
     |      ^ Assertion Roulette
  76 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  77 |
  78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  74 |       assert(deepEqual(req.body.checkboxfull, [&#39;cb1&#39;, &#39;cb2&#39;]))
  75 |       assert(deepEqual(req.body.checkboxhalfempty, [&#39;cb1&#39;, &#39;&#39;]))
&gt; 76 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
     |      ^ Assertion Roulette
  77 |
  78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  76 |       assert(deepEqual(req.body.checkboxempty, [&#39;&#39;, &#39;&#39;]))
  77 |
&gt; 78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
     |      ^ Assertion Roulette
  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  80 |       assert.strictEqual(req.file.size, 0)
  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  77 |
  78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
&gt; 79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
     |      ^ Assertion Roulette
  80 |       assert.strictEqual(req.file.size, 0)
  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)
  82 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
&gt; 80 |       assert.strictEqual(req.file.size, 0)
     |      ^ Assertion Roulette
  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)
  82 |
  83 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  80 |       assert.strictEqual(req.file.size, 0)
&gt; 81 |       assert.strictEqual(util.fileSize(req.file.path), 0)
     |      ^ Assertion Roulette
  82 |
  83 |       done()
  84 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  108 |       assert.ifError(err)
  109 |
&gt; 110 |       assert(deepEqual(req.body, {}))
      |      ^ Assertion Roulette
  111 |
  112 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  110 |       assert(deepEqual(req.body, {}))
  111 |
&gt; 112 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
      |      ^ Assertion Roulette
  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  114 |       assert.strictEqual(req.files.empty[0].size, 0)
  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  111 |
  112 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
&gt; 113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
      |      ^ Assertion Roulette
  114 |       assert.strictEqual(req.files.empty[0].size, 0)
  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
  116 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  112 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
&gt; 114 |       assert.strictEqual(req.files.empty[0].size, 0)
      |      ^ Assertion Roulette
  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
  116 |
  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  114 |       assert.strictEqual(req.files.empty[0].size, 0)
&gt; 115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
      |      ^ Assertion Roulette
  116 |
  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
  116 |
&gt; 117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
      |      ^ Assertion Roulette
  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  116 |
  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
&gt; 118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
      |      ^ Assertion Roulette
  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
  121 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
&gt; 119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
      |      ^ Assertion Roulette
  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
  121 |
  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
&gt; 120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
      |      ^ Assertion Roulette
  121 |
  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
  121 |
&gt; 122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
      |      ^ Assertion Roulette
  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  121 |
  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
&gt; 123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
      |      ^ Assertion Roulette
  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
  126 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
&gt; 124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
      |      ^ Assertion Roulette
  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
  126 |
  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
&gt; 125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
      |      ^ Assertion Roulette
  126 |
  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
  126 |
&gt; 127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
      |      ^ Assertion Roulette
  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  129 |       assert.strictEqual(req.files.small0[0].size, 1778)
  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  126 |
  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
&gt; 128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
      |      ^ Assertion Roulette
  129 |       assert.strictEqual(req.files.small0[0].size, 1778)
  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
  131 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
&gt; 129 |       assert.strictEqual(req.files.small0[0].size, 1778)
      |      ^ Assertion Roulette
  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
  131 |
  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  129 |       assert.strictEqual(req.files.small0[0].size, 1778)
&gt; 130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
      |      ^ Assertion Roulette
  131 |
  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
  131 |
&gt; 132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
      |      ^ Assertion Roulette
  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  134 |       assert.strictEqual(req.files.small1[0].size, 315)
  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  131 |
  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
&gt; 133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
      |      ^ Assertion Roulette
  134 |       assert.strictEqual(req.files.small1[0].size, 315)
  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
  136 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
&gt; 134 |       assert.strictEqual(req.files.small1[0].size, 315)
      |      ^ Assertion Roulette
  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
  136 |
  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  134 |       assert.strictEqual(req.files.small1[0].size, 315)
&gt; 135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
      |      ^ Assertion Roulette
  136 |
  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
  136 |
&gt; 137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
      |      ^ Assertion Roulette
  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  139 |       assert.strictEqual(req.files.medium[0].size, 13196)
  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  136 |
  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
&gt; 138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
      |      ^ Assertion Roulette
  139 |       assert.strictEqual(req.files.medium[0].size, 13196)
  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
  141 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
&gt; 139 |       assert.strictEqual(req.files.medium[0].size, 13196)
      |      ^ Assertion Roulette
  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
  141 |
  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  139 |       assert.strictEqual(req.files.medium[0].size, 13196)
&gt; 140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
      |      ^ Assertion Roulette
  141 |
  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
  141 |
&gt; 142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
      |      ^ Assertion Roulette
  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  144 |       assert.strictEqual(req.files.large[0].size, 2413677)
  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  141 |
  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
&gt; 143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
      |      ^ Assertion Roulette
  144 |       assert.strictEqual(req.files.large[0].size, 2413677)
  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)
  146 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
&gt; 144 |       assert.strictEqual(req.files.large[0].size, 2413677)
      |      ^ Assertion Roulette
  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)
  146 |
  147 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  144 |       assert.strictEqual(req.files.large[0].size, 2413677)
&gt; 145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)
      |      ^ Assertion Roulette
  146 |
  147 |       done()
  148 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  157 |
  158 |     util.submitForm(parser, form, function (err, req) {
&gt; 159 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
      |      ^ Assertion Roulette
  160 |       assert.strictEqual(err.field, &#39;small0&#39;)
  161 |       assert(deepEqual(err.storageErrors, []))
  162 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  158 |     util.submitForm(parser, form, function (err, req) {
  159 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
&gt; 160 |       assert.strictEqual(err.field, &#39;small0&#39;)
      |      ^ Assertion Roulette
  161 |       assert(deepEqual(err.storageErrors, []))
  162 |
  163 |       var files &#x3D; fs.readdirSync(uploadDir)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  159 |       assert.strictEqual(err.code, &#39;LIMIT_UNEXPECTED_FILE&#39;)
  160 |       assert.strictEqual(err.field, &#39;small0&#39;)
&gt; 161 |       assert(deepEqual(err.storageErrors, []))
      |      ^ Assertion Roulette
  162 |
  163 |       var files &#x3D; fs.readdirSync(uploadDir)
  164 |       assert(deepEqual(files, []))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  162 |
  163 |       var files &#x3D; fs.readdirSync(uploadDir)
&gt; 164 |       assert(deepEqual(files, []))
      |      ^ Assertion Roulette
  165 |
  166 |       done()
  167 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  180 |
  181 |     util.submitForm(parser, form, function (err, req) {
&gt; 182 |       assert.strictEqual(err.code, &#39;ENOENT&#39;)
      |      ^ Assertion Roulette
  183 |       assert.strictEqual(path.dirname(err.path), directory)
  184 |
  185 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  181 |     util.submitForm(parser, form, function (err, req) {
  182 |       assert.strictEqual(err.code, &#39;ENOENT&#39;)
&gt; 183 |       assert.strictEqual(path.dirname(err.path), directory)
      |      ^ Assertion Roulette
  184 |
  185 |       done()
  186 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Conditional Test Logic</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  17 |   beforeEach(function (done) {
  18 |     temp.mkdir(function (err, path) {
&gt; 19 |       if (err) return done(err)
     |      ^ Conditional Test Logic
  20 |
  21 |       uploadDir &#x3D; path
  22 |       upload &#x3D; multer({ dest: path })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Global Variable</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  13 |
  14 | describe(&#39;Disk Storage&#39;, function () {
&gt; 15 |   var uploadDir, upload
     |  ^ Global Variable
  16 |
  17 |   beforeEach(function (done) {
  18 |     temp.mkdir(function (err, path) {</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  30 |
  31 |   it(&#39;should process parser&#x2F;form-data POST request&#39;, function (done) {
&gt; 32 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  33 |     var parser &#x3D; upload.single(&#39;small0&#39;)
  34 |
  35 |     form.append(&#39;name&#39;, &#39;Multer&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  31 |   it(&#39;should process parser&#x2F;form-data POST request&#39;, function (done) {
  32 |     var form &#x3D; new FormData()
&gt; 33 |     var parser &#x3D; upload.single(&#39;small0&#39;)
     |    ^ Global Variable
  34 |
  35 |     form.append(&#39;name&#39;, &#39;Multer&#39;)
  36 |     form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  51 |
  52 |   it(&#39;should process empty fields and an empty file&#39;, function (done) {
&gt; 53 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  54 |     var parser &#x3D; upload.single(&#39;empty&#39;)
  55 |
  56 |     form.append(&#39;empty&#39;, util.file(&#39;empty.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  52 |   it(&#39;should process empty fields and an empty file&#39;, function (done) {
  53 |     var form &#x3D; new FormData()
&gt; 54 |     var parser &#x3D; upload.single(&#39;empty&#39;)
     |    ^ Global Variable
  55 |
  56 |     form.append(&#39;empty&#39;, util.file(&#39;empty.dat&#39;))
  57 |     form.append(&#39;name&#39;, &#39;Multer&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  86 |
  87 |   it(&#39;should process multiple files&#39;, function (done) {
&gt; 88 |     var form &#x3D; new FormData()
     |    ^ Global Variable
  89 |     var parser &#x3D; upload.fields([
  90 |       { name: &#39;empty&#39;, maxCount: 1 },
  91 |       { name: &#39;tiny0&#39;, maxCount: 1 },</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  87 |   it(&#39;should process multiple files&#39;, function (done) {
  88 |     var form &#x3D; new FormData()
&gt; 89 |     var parser &#x3D; upload.fields([
     |    ^ Global Variable
  90 |       { name: &#39;empty&#39;, maxCount: 1 },
  91 |       { name: &#39;tiny0&#39;, maxCount: 1 },
  92 |       { name: &#39;tiny1&#39;, maxCount: 1 },</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  150 |
  151 |   it(&#39;should remove uploaded files on error&#39;, function (done) {
&gt; 152 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  153 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
  154 |
  155 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  151 |   it(&#39;should remove uploaded files on error&#39;, function (done) {
  152 |     var form &#x3D; new FormData()
&gt; 153 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
      |    ^ Global Variable
  154 |
  155 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))
  156 |     form.append(&#39;small0&#39;, util.file(&#39;small0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  161 |       assert(deepEqual(err.storageErrors, []))
  162 |
&gt; 163 |       var files &#x3D; fs.readdirSync(uploadDir)
      |      ^ Global Variable
  164 |       assert(deepEqual(files, []))
  165 |
  166 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  169 |
  170 |   it(&#39;should report error when directory doesn\&#39;t exist&#39;, function (done) {
&gt; 171 |     var directory &#x3D; path.join(temp.mkdirSync(), &#39;ghost&#39;)
      |    ^ Global Variable
  172 |     function dest ($0, $1, cb) { cb(null, directory) }
  173 |
  174 |     var storage &#x3D; multer.diskStorage({ destination: dest })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  172 |     function dest ($0, $1, cb) { cb(null, directory) }
  173 |
&gt; 174 |     var storage &#x3D; multer.diskStorage({ destination: dest })
      |    ^ Global Variable
  175 |     var upload &#x3D; multer({ storage: storage })
  176 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
  177 |     var form &#x3D; new FormData()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  173 |
  174 |     var storage &#x3D; multer.diskStorage({ destination: dest })
&gt; 175 |     var upload &#x3D; multer({ storage: storage })
      |    ^ Global Variable
  176 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
  177 |     var form &#x3D; new FormData()
  178 |</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  174 |     var storage &#x3D; multer.diskStorage({ destination: dest })
  175 |     var upload &#x3D; multer({ storage: storage })
&gt; 176 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
      |    ^ Global Variable
  177 |     var form &#x3D; new FormData()
  178 |
  179 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  175 |     var upload &#x3D; multer({ storage: storage })
  176 |     var parser &#x3D; upload.single(&#39;tiny0&#39;)
&gt; 177 |     var form &#x3D; new FormData()
      |    ^ Global Variable
  178 |
  179 |     form.append(&#39;tiny0&#39;, util.file(&#39;tiny0.dat&#39;))
  180 |</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <hr>
                <table class="table is-fullwidth" id="table-of-smell">
                  <thead>
                    <tr>
                      <td>Magic Number</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <pre><code>  43 |       assert.strictEqual(req.file.fieldname, &#39;small0&#39;)
  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
&gt; 45 |       assert.strictEqual(req.file.size, 1778)
     |                                        ^ Magic Number
  46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)
  47 |
  48 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  44 |       assert.strictEqual(req.file.originalname, &#39;small0.dat&#39;)
  45 |       assert.strictEqual(req.file.size, 1778)
&gt; 46 |       assert.strictEqual(util.fileSize(req.file.path), 1778)
     |                                                       ^ Magic Number
  47 |
  48 |       done()
  49 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  78 |       assert.strictEqual(req.file.fieldname, &#39;empty&#39;)
  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
&gt; 80 |       assert.strictEqual(req.file.size, 0)
     |                                        ^ Magic Number
  81 |       assert.strictEqual(util.fileSize(req.file.path), 0)
  82 |
  83 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  79 |       assert.strictEqual(req.file.originalname, &#39;empty.dat&#39;)
  80 |       assert.strictEqual(req.file.size, 0)
&gt; 81 |       assert.strictEqual(util.fileSize(req.file.path), 0)
     |                                                       ^ Magic Number
  82 |
  83 |       done()
  84 |     })</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  112 |       assert.strictEqual(req.files.empty[0].fieldname, &#39;empty&#39;)
  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
&gt; 114 |       assert.strictEqual(req.files.empty[0].size, 0)
      |                                                  ^ Magic Number
  115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
  116 |
  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  113 |       assert.strictEqual(req.files.empty[0].originalname, &#39;empty.dat&#39;)
  114 |       assert.strictEqual(req.files.empty[0].size, 0)
&gt; 115 |       assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)
      |                                                                 ^ Magic Number
  116 |
  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  117 |       assert.strictEqual(req.files.tiny0[0].fieldname, &#39;tiny0&#39;)
  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
&gt; 119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
      |                                                  ^ Magic Number
  120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
  121 |
  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  118 |       assert.strictEqual(req.files.tiny0[0].originalname, &#39;tiny0.dat&#39;)
  119 |       assert.strictEqual(req.files.tiny0[0].size, 122)
&gt; 120 |       assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)
      |                                                                 ^ Magic Number
  121 |
  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  122 |       assert.strictEqual(req.files.tiny1[0].fieldname, &#39;tiny1&#39;)
  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
&gt; 124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
      |                                                  ^ Magic Number
  125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
  126 |
  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  123 |       assert.strictEqual(req.files.tiny1[0].originalname, &#39;tiny1.dat&#39;)
  124 |       assert.strictEqual(req.files.tiny1[0].size, 7)
&gt; 125 |       assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)
      |                                                                 ^ Magic Number
  126 |
  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  127 |       assert.strictEqual(req.files.small0[0].fieldname, &#39;small0&#39;)
  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
&gt; 129 |       assert.strictEqual(req.files.small0[0].size, 1778)
      |                                                   ^ Magic Number
  130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
  131 |
  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  128 |       assert.strictEqual(req.files.small0[0].originalname, &#39;small0.dat&#39;)
  129 |       assert.strictEqual(req.files.small0[0].size, 1778)
&gt; 130 |       assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)
      |                                                                  ^ Magic Number
  131 |
  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  132 |       assert.strictEqual(req.files.small1[0].fieldname, &#39;small1&#39;)
  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
&gt; 134 |       assert.strictEqual(req.files.small1[0].size, 315)
      |                                                   ^ Magic Number
  135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
  136 |
  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  133 |       assert.strictEqual(req.files.small1[0].originalname, &#39;small1.dat&#39;)
  134 |       assert.strictEqual(req.files.small1[0].size, 315)
&gt; 135 |       assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)
      |                                                                  ^ Magic Number
  136 |
  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  137 |       assert.strictEqual(req.files.medium[0].fieldname, &#39;medium&#39;)
  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
&gt; 139 |       assert.strictEqual(req.files.medium[0].size, 13196)
      |                                                   ^ Magic Number
  140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
  141 |
  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  138 |       assert.strictEqual(req.files.medium[0].originalname, &#39;medium.dat&#39;)
  139 |       assert.strictEqual(req.files.medium[0].size, 13196)
&gt; 140 |       assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)
      |                                                                  ^ Magic Number
  141 |
  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  142 |       assert.strictEqual(req.files.large[0].fieldname, &#39;large&#39;)
  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
&gt; 144 |       assert.strictEqual(req.files.large[0].size, 2413677)
      |                                                  ^ Magic Number
  145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)
  146 |
  147 |       done()</code></pre><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <pre><code>  143 |       assert.strictEqual(req.files.large[0].originalname, &#39;large.jpg&#39;)
  144 |       assert.strictEqual(req.files.large[0].size, 2413677)
&gt; 145 |       assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)
      |                                                                 ^ Magic Number
  146 |
  147 |       done()
  148 |     })</code></pre><br>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
  <footer class="footer">
    <div class="content has-text-centered">
      <p>Copyright  2020 STEEL. All rights reserved.</p>
      <p>
        <strong>STEEL</strong> by Dalton N. Jorge, under the guidance of Prof. Dr. Patricia D. L. Machado & Prof. Dr.
        Wilkerson L. Andrade.
      </p>
      <p>SPLab - PPGCC - UFCG</p>
    </div>
  </footer>
  <script>
    function toggleDetails(node) {
      let parentRow = node.parentNode.parentNode;
      let path = parentRow.children[0].children[0].innerText;
      let detailsRow = parentRow.nextElementSibling;
      if (detailsRow.className === "details-row hidden") {
        parentRow.children[0].children[0].innerText = path.replace(/^\+/g, '-')
        detailsRow.className = "details-row";
      } else {
        parentRow.children[0].children[0].innerText = path.replace(/^-/g, '+')
        detailsRow.className = "details-row hidden";
      }
    }
  </script>
</body>

</html>
