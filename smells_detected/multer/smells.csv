file,type,line,method,source
/test/reuse-middleware.js,ConditionalTestLogic,"{'startLine':44,'endLine':44}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",snuts
/test/functionality.js,ConditionalTestLogic,"{'startLine':47,'endLine':47}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",snuts
/test/functionality.js,ConditionalTestLogic,"{'startLine':63,'endLine':63}","it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })",snuts
/test/functionality.js,ConditionalTestLogic,"{'startLine':78,'endLine':78}","it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })",snuts
/test/functionality.js,ConditionalTestLogic,"{'startLine':93,'endLine':93}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",snuts
/test/functionality.js,ConditionalTestLogic,"{'startLine':113,'endLine':113}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",snuts
/test/file-ordering.js,ConditionalTestLogic,"{'startLine':23,'endLine':23}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",snuts
/test/file-ordering.js,ConditionalTestLogic,"{'startLine':28,'endLine':31}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",snuts
/test/error-handling.js,IdenticalTestDescription,"{'startLine':178,'endLine':189}","it('should notify of missing field name', function (done) {
    var form = new FormData()
    var storage = multer.memoryStorage()
    var parser = multer({ storage: storage }).single('small0')

    form.append('', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",snuts
/test/unicode.js,Assertion Roulette,"{'column': 6, 'line': 56}","it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })",steel
/test/unicode.js,Assertion Roulette,"{'column': 6, 'line': 57}","it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })",steel
/test/unicode.js,Conditional Test Logic,"{'line': 15, 'column': 6, 'index': 311}","beforeEach(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      var storage = multer.diskStorage({
        destination: path,
        filename: function (req, file, cb) {
          cb(null, file.originalname)
        }
      })

      uploadDir = path
      upload = multer({ storage: storage })
      done()
    })
  })",steel
/test/unicode.js,Global Variable,"{'line': 11, 'column': 2, 'index': 213}","describe('Unicode', function () {
  var uploadDir, upload

  beforeEach(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      var storage = multer.diskStorage({
        destination: path,
        filename: function (req, file, cb) {
          cb(null, file.originalname)
        }
      })

      uploadDir = path
      upload = multer({ storage: storage })
      done()
    })
  })

  afterEach(function (done) {
    rimraf(uploadDir, done)
  })

  it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })
})",steel
/test/unicode.js,Global Variable,"{'line': 17, 'column': 6, 'index': 344}","beforeEach(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      var storage = multer.diskStorage({
        destination: path,
        filename: function (req, file, cb) {
          cb(null, file.originalname)
        }
      })

      uploadDir = path
      upload = multer({ storage: storage })
      done()
    })
  })",steel
/test/unicode.js,Global Variable,"{'line': 35, 'column': 4, 'index': 728}","it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })",steel
/test/unicode.js,Global Variable,"{'line': 36, 'column': 4, 'index': 767}","it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })",steel
/test/unicode.js,Global Variable,"{'line': 37, 'column': 4, 'index': 795}","it('should handle unicode filenames', function (done) {
    var req = new stream.PassThrough()
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""small0""; filename=""poo.dat""; filename*=utf-8\'\'%F0%9F%92%A9.dat',
      'Content-Type: text/plain',
      '',
      'test with unicode filename',
      '--' + boundary + '--'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload.single('small0')(req, null, function (err) {
      assert.ifError(err)

      assert.strictEqual(req.file.originalname, '\ud83d\udca9.dat')
      assert.strictEqual(req.file.fieldname, 'small0')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 52}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 53}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 56}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 57}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 60}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Assertion Roulette,"{'column': 6, 'line': 61}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/select-field.js,Conditional Test Logic,"{'line': 28, 'column': 2, 'index': 677}",Unknown,steel
/test/select-field.js,Global Variable,"{'line': 10, 'column': 2, 'index': 180}",Unknown,steel
/test/select-field.js,Global Variable,"{'line': 24, 'column': 2, 'index': 606}",Unknown,steel
/test/select-field.js,Global Variable,"{'line': 28, 'column': 7, 'index': 682}",Unknown,steel
/test/select-field.js,Global Variable,"{'line': 35, 'column': 2, 'index': 869}","describe('Select Field', function () {
  var parser

  before(function () {
    parser = multer().fields([
      { name: 'CA$|-|', maxCount: 1 },
      { name: 'set-1', maxCount: 3 },
      { name: 'set-2', maxCount: 3 }
    ])
  })

  it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })

  it('should select all files with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      assertSet(req.files['CA$|-|'], 'CA$|-|', ['empty.dat'])
      assertSet(req.files['set-1'], 'set-1', ['tiny0.dat', 'empty.dat', 'tiny1.dat'])
      assertSet(req.files['set-2'], 'set-2', ['tiny1.dat', 'tiny0.dat', 'empty.dat'])

      done()
    })
  })
})",steel
/test/select-field.js,Global Variable,"{'line': 49, 'column': 6, 'index': 1231}","it('should select the first file with fieldname', function (done) {
    util.submitForm(parser, generateForm(), function (err, req) {
      assert.ifError(err)

      var file

      file = req.files['CA$|-|'][0]
      assert.strictEqual(file.fieldname, 'CA$|-|')
      assert.strictEqual(file.originalname, 'empty.dat')

      file = req.files['set-1'][0]
      assert.strictEqual(file.fieldname, 'set-1')
      assert.strictEqual(file.originalname, 'tiny0.dat')

      file = req.files['set-2'][0]
      assert.strictEqual(file.fieldname, 'set-2')
      assert.strictEqual(file.originalname, 'tiny1.dat')

      done()
    })
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 8, 'line': 33}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 8, 'line': 34}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 8, 'line': 35}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 10, 'line': 38}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 10, 'line': 39}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 10, 'line': 40}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Assertion Roulette,"{'column': 10, 'line': 41}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Conditional Test Logic,"{'line': 26, 'column': 6, 'index': 530}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Conditional Test Logic,"{'line': 44, 'column': 8, 'index': 1177}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Global Variable,"{'line': 10, 'column': 2, 'index': 196}","describe('Reuse Middleware', function () {
  var parser

  before(function (done) {
    parser = multer().array('them-files')
    done()
  })

  it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })
})",steel
/test/reuse-middleware.js,Global Variable,"{'line': 18, 'column': 4, 'index': 356}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Global Variable,"{'line': 21, 'column': 6, 'index': 417}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Global Variable,"{'line': 26, 'column': 11, 'index': 535}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Magic Number,"{'line': 40, 'column': 40, 'index': 1096}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/reuse-middleware.js,Magic Number,"{'line': 41, 'column': 49, 'index': 1151}","it('should accept multiple requests', function (done) {
    var pending = 8

    function submitData (fileCount) {
      var form = new FormData()

      form.append('name', 'Multer')
      form.append('files', '' + fileCount)

      for (var i = 0; i < fileCount; i++) {
        form.append('them-files', util.file('small0.dat'))
      }

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)

        assert.strictEqual(req.body.name, 'Multer')
        assert.strictEqual(req.body.files, '' + fileCount)
        assert.strictEqual(req.files.length, fileCount)

        req.files.forEach(function (file) {
          assert.strictEqual(file.fieldname, 'them-files')
          assert.strictEqual(file.originalname, 'small0.dat')
          assert.strictEqual(file.size, 1778)
          assert.strictEqual(file.buffer.length, 1778)
        })

        if (--pending === 0) done()
      })
    }

    submitData(9)
    submitData(1)
    submitData(5)
    submitData(7)
    submitData(2)
    submitData(8)
    submitData(3)
    submitData(4)
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 24}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 25}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 26}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 27}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 28}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 41}","it('should handle text fields', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 42}","it('should handle text fields', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Assertion Roulette,"{'column': 6, 'line': 43}","it('should handle text fields', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Global Variable,"{'line': 10, 'column': 2, 'index': 184}","describe('None', function () {
  var parser

  before(function () {
    parser = multer().none()
  })

  it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })

  it('should handle text fields', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })
})",steel
/test/none.js,Global Variable,"{'line': 17, 'column': 4, 'index': 314}","it('should not allow file uploads', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')
    form.append('file', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err)
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/none.js,Global Variable,"{'line': 34, 'column': 4, 'index': 817}","it('should handle text fields', function (done) {
    var form = new FormData()

    form.append('key1', 'val1')
    form.append('key2', 'val2')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files, undefined)
      assert.strictEqual(req.body.key1, 'val1')
      assert.strictEqual(req.body.key2, 'val2')
      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 28}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 30}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 31}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 32}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 33}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 57}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 58}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 59}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 61}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 62}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 63}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 65}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 66}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 67}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 68}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 69}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 98}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 100}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 101}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 102}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 103}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 105}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 106}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 107}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 108}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 110}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 111}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 112}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 113}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 115}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 116}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 117}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 118}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 120}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 121}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 122}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 123}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 125}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 126}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 127}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 128}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 130}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 131}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 132}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Assertion Roulette,"{'column': 6, 'line': 133}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 11, 'column': 2, 'index': 232}","describe('Memory Storage', function () {
  var upload

  before(function (done) {
    upload = multer()
    done()
  })

  it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })

  it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })

  it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })
})",steel
/test/memory-storage.js,Global Variable,"{'line': 19, 'column': 4, 'index': 388}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 20, 'column': 4, 'index': 418}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 40, 'column': 4, 'index': 997}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 41, 'column': 4, 'index': 1027}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 76, 'column': 4, 'index': 2218}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Global Variable,"{'line': 77, 'column': 4, 'index': 2248}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 32, 'column': 40, 'index': 833}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 33, 'column': 49, 'index': 888}","it('should process multipart/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(req.file.buffer.length, 1778)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 67, 'column': 40, 'index': 2011}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 68, 'column': 49, 'index': 2063}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(req.file.buffer.length, 0)
      assert.strictEqual(Buffer.isBuffer(req.file.buffer), true)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 102, 'column': 50, 'index': 3210}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 103, 'column': 59, 'index': 3272}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 107, 'column': 50, 'index': 3461}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 108, 'column': 59, 'index': 3525}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 112, 'column': 50, 'index': 3716}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 113, 'column': 59, 'index': 3778}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 117, 'column': 51, 'index': 3972}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 118, 'column': 60, 'index': 4038}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 122, 'column': 51, 'index': 4235}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 123, 'column': 60, 'index': 4300}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 127, 'column': 51, 'index': 4496}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 128, 'column': 60, 'index': 4563}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 132, 'column': 50, 'index': 4756}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/memory-storage.js,Magic Number,"{'line': 133, 'column': 59, 'index': 4824}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(req.files.empty[0].buffer.length, 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(req.files.tiny0[0].buffer.length, 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(req.files.tiny1[0].buffer.length, 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(req.files.small0[0].buffer.length, 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(req.files.small1[0].buffer.length, 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(req.files.medium[0].buffer.length, 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(req.files.large[0].buffer.length, 2413677)

      done()
    })
  })",steel
/test/issue-232.js,Assertion Roulette,"{'column': 6, 'line': 37}","it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })",steel
/test/issue-232.js,Assertion Roulette,"{'column': 6, 'line': 38}","it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })",steel
/test/issue-232.js,Conditional Test Logic,"{'line': 16, 'column': 6, 'index': 345}","describe('Issue #232', function () {
  var uploadDir, upload

  before(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      uploadDir = path
      upload = multer({ dest: path, limits: { fileSize: 100 } })
      done()
    })
  })

  after(function (done) {
    rimraf(uploadDir, done)
  })

  it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })
})",steel
/test/issue-232.js,Global Variable,"{'line': 12, 'column': 2, 'index': 251}","describe('Issue #232', function () {
  var uploadDir, upload

  before(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      uploadDir = path
      upload = multer({ dest: path, limits: { fileSize: 100 } })
      done()
    })
  })

  after(function (done) {
    rimraf(uploadDir, done)
  })

  it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })
})",steel
/test/issue-232.js,Global Variable,"{'line': 29, 'column': 4, 'index': 603}","it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })",steel
/test/issue-232.js,Global Variable,"{'line': 30, 'column': 4, 'index': 633}","it('should report limit errors', function (done) {
    var form = new FormData()
    var parser = upload.single('file')

    form.append('file', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ok(err, 'an error was given')

      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'file')

      done()
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 8, 'line': 54}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 8, 'line': 55}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 8, 'line': 101}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 8, 'line': 102}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 8, 'line': 103}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 6, 'line': 131}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 6, 'line': 132}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Assertion Roulette,"{'column': 6, 'line': 133}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Conditional Test Logic,"{'line': 24, 'column': 6, 'index': 539}","describe('Functionality', function () {
  var cleanup = []

  function makeStandardEnv (cb) {
    temp.mkdir(function (err, uploadDir) {
      if (err) return cb(err)

      cleanup.push(uploadDir)

      var storage = multer.diskStorage({
        destination: uploadDir,
        filename: generateFilename
      })

      cb(null, {
        upload: multer({ storage: storage }),
        uploadDir: uploadDir,
        form: new FormData()
      })
    })
  }

  after(function () {
    while (cleanup.length) rimraf.sync(cleanup.pop())
  })

  it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })

  it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })

  it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })
})",steel
/test/functionality.js,Conditional Test Logic,"{'line': 42, 'column': 4, 'index': 882}","describe('Functionality', function () {
  var cleanup = []

  function makeStandardEnv (cb) {
    temp.mkdir(function (err, uploadDir) {
      if (err) return cb(err)

      cleanup.push(uploadDir)

      var storage = multer.diskStorage({
        destination: uploadDir,
        filename: generateFilename
      })

      cb(null, {
        upload: multer({ storage: storage }),
        uploadDir: uploadDir,
        form: new FormData()
      })
    })
  }

  after(function () {
    while (cleanup.length) rimraf.sync(cleanup.pop())
  })

  it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })

  it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })

  it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })
})",steel
/test/functionality.js,Conditional Test Logic,"{'line': 47, 'column': 6, 'index': 1053}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",steel
/test/functionality.js,Conditional Test Logic,"{'line': 63, 'column': 6, 'index': 1541}","it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Conditional Test Logic,"{'line': 78, 'column': 6, 'index': 2017}","it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Conditional Test Logic,"{'line': 93, 'column': 6, 'index': 2488}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Conditional Test Logic,"{'line': 113, 'column': 10, 'index': 3267}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 20, 'column': 2, 'index': 438}","describe('Functionality', function () {
  var cleanup = []

  function makeStandardEnv (cb) {
    temp.mkdir(function (err, uploadDir) {
      if (err) return cb(err)

      cleanup.push(uploadDir)

      var storage = multer.diskStorage({
        destination: uploadDir,
        filename: generateFilename
      })

      cb(null, {
        upload: multer({ storage: storage }),
        uploadDir: uploadDir,
        form: new FormData()
      })
    })
  }

  after(function () {
    while (cleanup.length) rimraf.sync(cleanup.pop())
  })

  it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })

  it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })

  it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })
})",steel
/test/functionality.js,Global Variable,"{'line': 28, 'column': 6, 'index': 601}","describe('Functionality', function () {
  var cleanup = []

  function makeStandardEnv (cb) {
    temp.mkdir(function (err, uploadDir) {
      if (err) return cb(err)

      cleanup.push(uploadDir)

      var storage = multer.diskStorage({
        destination: uploadDir,
        filename: generateFilename
      })

      cb(null, {
        upload: multer({ storage: storage }),
        uploadDir: uploadDir,
        form: new FormData()
      })
    })
  }

  after(function () {
    while (cleanup.length) rimraf.sync(cleanup.pop())
  })

  it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })

  it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })

  it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })

  it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })
})",steel
/test/functionality.js,Global Variable,"{'line': 49, 'column': 6, 'index': 1086}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 65, 'column': 6, 'index': 1574}","it('should rename the uploaded file', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'small0small0.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 80, 'column': 6, 'index': 2050}","it('should ensure all req.files values (single-file per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('tiny0')
      env.form.append('tiny0', util.file('tiny0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.file.filename, 'tiny0tiny0.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 95, 'column': 6, 'index': 2521}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 110, 'column': 4, 'index': 3104}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 122, 'column': 4, 'index': 3421}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 123, 'column': 4, 'index': 3451}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Global Variable,"{'line': 124, 'column': 4, 'index': 3497}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/functionality.js,Magic Number,"{'line': 55, 'column': 57, 'index': 1392}","it('should upload the file to the `dest` dir', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.single('small0')
      env.form.append('small0', util.file('small0.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.ok(startsWith(req.file.path, env.uploadDir))
        assert.strictEqual(util.fileSize(req.file.path), 1778)
        done()
      })
    })
  })",steel
/test/functionality.js,Magic Number,"{'line': 101, 'column': 45, 'index': 2823}","it('should ensure all req.files values (multi-files per field) point to an array', function (done) {
    makeStandardEnv(function (err, env) {
      if (err) return done(err)

      var parser = env.upload.array('themFiles', 2)
      env.form.append('themFiles', util.file('small0.dat'))
      env.form.append('themFiles', util.file('small1.dat'))

      util.submitForm(parser, env.form, function (err, req) {
        assert.ifError(err)
        assert.strictEqual(req.files.length, 2)
        assert.strictEqual(req.files[0].filename, 'themFilessmall0.dat')
        assert.strictEqual(req.files[1].filename, 'themFilessmall1.dat')
        done()
      })
    })
  })",steel
/test/functionality.js,Magic Number,"{'line': 131, 'column': 43, 'index': 3774}","it('should rename the destination directory to a different directory', function (done) {
    var storage = multer.diskStorage({
      destination: function (req, file, cb) {
        temp.template('testforme-%s').mkdir(function (err, uploadDir) {
          if (err) return cb(err)

          cleanup.push(uploadDir)
          cb(null, uploadDir)
        })
      },
      filename: generateFilename
    })

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.ok(req.files[0].path.indexOf('/testforme-') >= 0)
      assert.ok(req.files[1].path.indexOf('/testforme-') >= 0)
      done()
    })
  })",steel
/test/file-ordering.js,Assertion Roulette,"{'column': 6, 'line': 42}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Assertion Roulette,"{'column': 6, 'line': 43}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Assertion Roulette,"{'column': 6, 'line': 44}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Conditional Test Logic,"{'line': 23, 'column': 8, 'index': 646}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Conditional Test Logic,"{'line': 28, 'column': 8, 'index': 736}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 11, 'column': 4, 'index': 269}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 12, 'column': 4, 'index': 310}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 13, 'column': 4, 'index': 356}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 15, 'column': 4, 'index': 403}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 16, 'column': 4, 'index': 417}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 17, 'column': 4, 'index': 442}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 18, 'column': 4, 'index': 462}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 20, 'column': 6, 'index': 559}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Global Variable,"{'line': 35, 'column': 4, 'index': 875}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-ordering.js,Magic Number,"{'line': 42, 'column': 43, 'index': 1136}","it('should present files in same order as they came', function (done) {
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage })
    var parser = upload.array('themFiles', 2)

    var i = 0
    var calls = [{}, {}]
    var pending = 2
    var _handleFile = storage._handleFile
    storage._handleFile = function (req, file, cb) {
      var id = (i++)

      _handleFile.call(this, req, file, function (err, info) {
        if (err) return cb(err)

        calls[id].cb = cb
        calls[id].info = info

        if (--pending === 0) {
          calls[1].cb(null, calls[1].info)
          calls[0].cb(null, calls[0].info)
        }
      })
    }

    var form = new FormData()

    form.append('themFiles', util.file('small0.dat'))
    form.append('themFiles', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 2)
      assert.strictEqual(req.files[0].originalname, 'small0.dat')
      assert.strictEqual(req.files[1].originalname, 'small1.dat')
      done()
    })
  })",steel
/test/file-filter.js,Assertion Roulette,"{'column': 6, 'line': 35}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Assertion Roulette,"{'column': 6, 'line': 36}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Assertion Roulette,"{'column': 6, 'line': 37}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Assertion Roulette,"{'column': 6, 'line': 38}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Assertion Roulette,"{'column': 6, 'line': 39}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 23, 'column': 4, 'index': 486}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 24, 'column': 4, 'index': 516}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 25, 'column': 4, 'index': 562}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 45, 'column': 4, 'index': 1251}","it('should report errors from fileFilter', function (done) {
    var form = new FormData()
    var upload = withFilter(reportFakeError)
    var parser = upload.single('test')

    form.append('test', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.message, 'Fake error')
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 46, 'column': 4, 'index': 1281}","it('should report errors from fileFilter', function (done) {
    var form = new FormData()
    var upload = withFilter(reportFakeError)
    var parser = upload.single('test')

    form.append('test', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.message, 'Fake error')
      done()
    })
  })",steel
/test/file-filter.js,Global Variable,"{'line': 47, 'column': 4, 'index': 1326}","it('should report errors from fileFilter', function (done) {
    var form = new FormData()
    var upload = withFilter(reportFakeError)
    var parser = upload.single('test')

    form.append('test', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.message, 'Fake error')
      done()
    })
  })",steel
/test/file-filter.js,Magic Number,"{'line': 38, 'column': 50, 'index': 1093}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/file-filter.js,Magic Number,"{'line': 39, 'column': 59, 'index': 1155}","it('should skip some files', function (done) {
    var form = new FormData()
    var upload = withFilter(skipSpecificFile)
    var parser = upload.fields([
      { name: 'notme', maxCount: 1 },
      { name: 'butme', maxCount: 1 }
    ])

    form.append('notme', util.file('tiny0.dat'))
    form.append('butme', util.file('tiny1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.notme, undefined)
      assert.strictEqual(req.files.butme[0].fieldname, 'butme')
      assert.strictEqual(req.files.butme[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.butme[0].size, 7)
      assert.strictEqual(req.files.butme[0].buffer.length, 7)
      done()
    })
  })",steel
/test/fields.js,Assertion Roulette,"{'column': 6, 'line': 76}","it('should not process non-multipart POST request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'POST'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Assertion Roulette,"{'column': 6, 'line': 77}","it('should not process non-multipart POST request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'POST'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Assertion Roulette,"{'column': 6, 'line': 94}","it('should not process non-multipart GET request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'GET'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Assertion Roulette,"{'column': 6, 'line': 95}","it('should not process non-multipart GET request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'GET'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Global Variable,"{'line': 13, 'column': 2, 'index': 304}","describe('Fields', function () {
  var parser

  before(function () {
    parser = multer().fields([])
  })

  it('should process multiple fields', function (done) {
    var form = new FormData()

    form.append('name', 'Multer')
    form.append('key', 'value')
    form.append('abc', 'xyz')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        name: 'Multer',
        key: 'value',
        abc: 'xyz'
      }))
      done()
    })
  })

  it('should process empty fields', function (done) {
    var form = new FormData()

    form.append('name', 'Multer')
    form.append('key', '')
    form.append('abc', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        name: 'Multer',
        key: '',
        abc: '',
        checkboxfull: ['cb1', 'cb2'],
        checkboxhalfempty: ['cb1', ''],
        checkboxempty: ['', '']
      }))
      done()
    })
  })

  it('should not process non-multipart POST request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'POST'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })

  it('should not process non-multipart GET request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'GET'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })

  testData.forEach(function (test) {
    it('should handle ' + test.name, function (done) {
      var form = new FormData()

      test.fields.forEach(function (field) {
        form.append(field.key, field.value)
      })

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)
        assert(deepEqual(req.body, test.expected))
        done()
      })
    })
  })

  it('should convert arrays into objects', function (done) {
    var form = new FormData()

    form.append('obj[0]', 'a')
    form.append('obj[2]', 'c')
    form.append('obj[x]', 'yz')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        obj: {
          0: 'a',
          2: 'c',
          x: 'yz'
        }
      }))
      done()
    })
  })
})",steel
/test/fields.js,Global Variable,"{'line': 20, 'column': 4, 'index': 439}","it('should process multiple fields', function (done) {
    var form = new FormData()

    form.append('name', 'Multer')
    form.append('key', 'value')
    form.append('abc', 'xyz')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        name: 'Multer',
        key: 'value',
        abc: 'xyz'
      }))
      done()
    })
  })",steel
/test/fields.js,Global Variable,"{'line': 38, 'column': 4, 'index': 839}","it('should process empty fields', function (done) {
    var form = new FormData()

    form.append('name', 'Multer')
    form.append('key', '')
    form.append('abc', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        name: 'Multer',
        key: '',
        abc: '',
        checkboxfull: ['cb1', 'cb2'],
        checkboxhalfempty: ['cb1', ''],
        checkboxempty: ['', '']
      }))
      done()
    })
  })",steel
/test/fields.js,Global Variable,"{'line': 65, 'column': 4, 'index': 1589}","it('should not process non-multipart POST request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'POST'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Global Variable,"{'line': 83, 'column': 4, 'index': 2122}","it('should not process non-multipart GET request', function (done) {
    var req = new stream.PassThrough()

    req.end('name=Multer')
    req.method = 'GET'
    req.headers = {
      'content-type': 'application/x-www-form-urlencoded',
      'content-length': 11
    }

    parser(req, null, function (err) {
      assert.ifError(err)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'body'), false)
      assert.strictEqual(Object.prototype.hasOwnProperty.call(req, 'files'), false)
      done()
    })
  })",steel
/test/fields.js,Global Variable,"{'line': 102, 'column': 6, 'index': 2677}","it('should handle ' + test.name, function (done) {
      var form = new FormData()

      test.fields.forEach(function (field) {
        form.append(field.key, field.value)
      })

      util.submitForm(parser, form, function (err, req) {
        assert.ifError(err)
        assert(deepEqual(req.body, test.expected))
        done()
      })
    })",steel
/test/fields.js,Global Variable,"{'line': 117, 'column': 4, 'index': 3042}","it('should convert arrays into objects', function (done) {
    var form = new FormData()

    form.append('obj[0]', 'a')
    form.append('obj[2]', 'c')
    form.append('obj[x]', 'yz')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert(deepEqual(req.body, {
        obj: {
          0: 'a',
          2: 'c',
          x: 'yz'
        }
      }))
      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 52}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 62}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 63}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 64}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 65}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 91}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 101}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 102}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 103}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 104}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 118}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 142}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 162}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 188}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 208}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Assertion Roulette,"{'column': 6, 'line': 234}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 13, 'column': 0, 'index': 250}",Unknown,steel
/test/express-integration.js,Global Variable,"{'line': 16, 'column': 2, 'index': 316}","describe('Express Integration', function () {
  var app

  before(function (done) {
    app = express()
    app.listen(port, done)
  })

  function submitForm (form, path, cb) {
    var req = form.submit('http://localhost:' + port + path)

    req.on('error', cb)
    req.on('response', function (res) {
      res.on('error', cb)
      res.pipe(concat({ encoding: 'buffer' }, function (body) {
        cb(null, res, body)
      }))
    })
  }

  it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })

  it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })

  it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })

  it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })

  it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })
})",steel
/test/express-integration.js,Global Variable,"{'line': 24, 'column': 4, 'index': 450}","describe('Express Integration', function () {
  var app

  before(function (done) {
    app = express()
    app.listen(port, done)
  })

  function submitForm (form, path, cb) {
    var req = form.submit('http://localhost:' + port + path)

    req.on('error', cb)
    req.on('response', function (res) {
      res.on('error', cb)
      res.pipe(concat({ encoding: 'buffer' }, function (body) {
        cb(null, res, body)
      }))
    })
  }

  it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })

  it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })

  it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })

  it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })

  it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })
})",steel
/test/express-integration.js,Global Variable,"{'line': 36, 'column': 4, 'index': 782}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 37, 'column': 4, 'index': 817}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 38, 'column': 4, 'index': 861}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 39, 'column': 4, 'index': 899}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 41, 'column': 4, 'index': 930}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 42, 'column': 4, 'index': 954}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 76, 'column': 4, 'index': 1818}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 77, 'column': 4, 'index': 1870}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 78, 'column': 4, 'index': 1908}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 80, 'column': 4, 'index': 1939}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 81, 'column': 4, 'index': 1963}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Global Variable,"{'line': 111, 'column': 4, 'index': 2731}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 122, 'column': 4, 'index': 3056}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 123, 'column': 4, 'index': 3084}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 130, 'column': 4, 'index': 3295}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 141, 'column': 4, 'index': 3540}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 155, 'column': 4, 'index': 3860}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 166, 'column': 4, 'index': 4185}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 168, 'column': 4, 'index': 4329}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 176, 'column': 4, 'index': 4545}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 187, 'column': 4, 'index': 4791}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 201, 'column': 4, 'index': 5089}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 212, 'column': 4, 'index': 5416}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 213, 'column': 4, 'index': 5454}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 222, 'column': 4, 'index': 5753}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Global Variable,"{'line': 233, 'column': 4, 'index': 6011}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Magic Number,"{'line': 62, 'column': 38, 'index': 1494}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 63, 'column': 38, 'index': 1535}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 65, 'column': 41, 'index': 1630}","it('should work with express error handling', function (done) {
    var limits = { fileSize: 200 }
    var upload = multer({ limits: limits })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t1', router)
    submitForm(form, '/t1/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 101, 'column': 38, 'index': 2495}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 102, 'column': 38, 'index': 2536}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 104, 'column': 41, 'index': 2631}","it('should work when receiving error from fileFilter', function (done) {
    function fileFilter (req, file, cb) {
      cb(new Error('TEST'))
    }

    var upload = multer({ fileFilter: fileFilter })
    var router = new express.Router()
    var form = new FormData()

    var routeCalled = 0
    var errorCalled = 0

    form.append('avatar', util.file('large.jpg'))

    router.post('/profile', upload.single('avatar'), function (req, res, next) {
      routeCalled++
      res.status(200).end('SUCCESS')
    })

    router.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'TEST')

      errorCalled++
      res.status(500).end('ERROR')
    })

    app.use('/t2', router)
    submitForm(form, '/t2/profile', function (err, res, body) {
      assert.ifError(err)

      assert.strictEqual(routeCalled, 0)
      assert.strictEqual(errorCalled, 1)
      assert.strictEqual(body.toString(), 'ERROR')
      assert.strictEqual(res.statusCode, 500)

      done()
    })
  })",steel
/test/express-integration.js,Magic Number,"{'line': 142, 'column': 41, 'index': 3624}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Magic Number,"{'line': 188, 'column': 41, 'index': 4875}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Magic Number,"{'line': 234, 'column': 41, 'index': 6095}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Mystery Guest,"{'column': 14, 'line': 141}","it('should not crash on malformed request', function (done) {
    var upload = multer()

    app.post('/upload', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Mystery Guest,"{'column': 14, 'line': 187}","it('should not crash on malformed request that causes two errors to be emitted by busboy', function (done) {
    var upload = multer()

    app.post('/upload2', upload.single('file'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Malformed part header')
      res.status(200).end('Correct error')
    })

    var boundary = 'AaB03x'
    // this payload causes two errors to be emitted by busboy: `Malformed part header` and `Unexpected end of form`
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""file""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      '--' + boundary + '--',
      ''
    ].join('\r\n')
    var options = {
      hostname: 'localhost',
      port,
      path: '/upload2',
      method: 'POST',
      headers: {
        'content-type': 'multipart/form-data; boundary=' + boundary,
        'content-length': body.length
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.on('error', (err) => {
      done(err)
    })

    req.write(body)
    req.end()
  })",steel
/test/express-integration.js,Mystery Guest,"{'column': 14, 'line': 233}","it('should not crash on malformed multipart body with bad boundary', function (done) {
    var upload = multer()

    app.post('/upload3', upload.single('image'), function (req, res) {
      res.status(500).end('Request should not be processed')
    })

    app.use(function (err, req, res, next) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      res.status(200).end('Correct error')
    })

    var boundary = '----FormBoundary'
    var body = [
      '------FormBoundary',
      'Content-Disposition: form-data; name=""image""; filename=""""',
      'Content-Type: application/octet-stream',
      '',
      '', // empty content
      '------FormBoundar' // intentionally malformed final boundary (missing 'y')
    ].join('\r\n')

    var options = {
      hostname: 'localhost',
      port,
      path: '/upload3',
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data; boundary=' + boundary,
        'Content-Length': Buffer.byteLength(body)
      }
    }

    var req = http.request(options, (res) => {
      assert.strictEqual(res.statusCode, 200)
      done()
    })

    req.write(body)
    req.end()
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 24}","it('should reject single unexpected file', function (done) {
    var form = new FormData()
    var parser = upload.single('butme')

    form.append('notme', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 25}","it('should reject single unexpected file', function (done) {
    var form = new FormData()
    var parser = upload.single('butme')

    form.append('notme', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 38}","it('should reject array of multiple files', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 4)

    form.append('notme', util.file('small0.dat'))
    form.append('notme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 39}","it('should reject array of multiple files', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 4)

    form.append('notme', util.file('small0.dat'))
    form.append('notme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 52}","it('should reject overflowing arrays', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 1)

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'butme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 53}","it('should reject overflowing arrays', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 1)

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'butme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 72}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 73}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 92}","it('should reject files with unexpected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))
    form.append('notme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 93}","it('should reject files with unexpected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))
    form.append('notme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 108}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 109}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 110}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Assertion Roulette,"{'column': 6, 'line': 111}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 10, 'column': 2, 'index': 194}","describe('Expected files', function () {
  var upload

  before(function (done) {
    upload = multer()
    done()
  })

  it('should reject single unexpected file', function (done) {
    var form = new FormData()
    var parser = upload.single('butme')

    form.append('notme', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })

  it('should reject array of multiple files', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 4)

    form.append('notme', util.file('small0.dat'))
    form.append('notme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })

  it('should reject overflowing arrays', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 1)

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'butme')
      done()
    })
  })

  it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })

  it('should reject files with unexpected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))
    form.append('notme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })

  it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })
})",steel
/test/expected-files.js,Global Variable,"{'line': 18, 'column': 4, 'index': 339}","it('should reject single unexpected file', function (done) {
    var form = new FormData()
    var parser = upload.single('butme')

    form.append('notme', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 19, 'column': 4, 'index': 369}","it('should reject single unexpected file', function (done) {
    var form = new FormData()
    var parser = upload.single('butme')

    form.append('notme', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 31, 'column': 4, 'index': 712}","it('should reject array of multiple files', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 4)

    form.append('notme', util.file('small0.dat'))
    form.append('notme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 32, 'column': 4, 'index': 742}","it('should reject array of multiple files', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 4)

    form.append('notme', util.file('small0.dat'))
    form.append('notme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 45, 'column': 4, 'index': 1132}","it('should reject overflowing arrays', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 1)

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'butme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 46, 'column': 4, 'index': 1162}","it('should reject overflowing arrays', function (done) {
    var form = new FormData()
    var parser = upload.array('butme', 1)

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'butme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 59, 'column': 4, 'index': 1563}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 60, 'column': 4, 'index': 1593}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 80, 'column': 4, 'index': 2145}","it('should reject files with unexpected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))
    form.append('notme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 81, 'column': 4, 'index': 2175}","it('should reject files with unexpected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))
    form.append('notme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'notme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 99, 'column': 4, 'index': 2738}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Global Variable,"{'line': 100, 'column': 4, 'index': 2768}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/expected-files.js,Magic Number,"{'line': 72, 'column': 49, 'index': 1987}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Magic Number,"{'line': 73, 'column': 49, 'index': 2039}","it('should accept files with expected fieldname', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'butme', maxCount: 2 },
      { name: 'andme', maxCount: 2 }
    ])

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.files.butme.length, 2)
      assert.strictEqual(req.files.andme.length, 1)

      done()
    })
  })",steel
/test/expected-files.js,Magic Number,"{'line': 108, 'column': 43, 'index': 3070}","it('should allow any file to come thru', function (done) {
    var form = new FormData()
    var parser = upload.any()

    form.append('butme', util.file('small0.dat'))
    form.append('butme', util.file('small1.dat'))
    form.append('andme', util.file('empty.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)
      assert.strictEqual(req.files.length, 3)
      assert.strictEqual(req.files[0].fieldname, 'butme')
      assert.strictEqual(req.files[1].fieldname, 'butme')
      assert.strictEqual(req.files[2].fieldname, 'andme')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 28}","it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\'s error', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err instanceof Error, true)
      assert.strictEqual(err instanceof multer.MulterError, true)
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 29}","it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\'s error', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err instanceof Error, true)
      assert.strictEqual(err instanceof multer.MulterError, true)
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 60}","it('should respect file size limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fileSize: 1500 }, [
      { name: 'tiny0', maxCount: 1 },
      { name: 'small0', maxCount: 1 }
    ])

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 61}","it('should respect file size limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fileSize: 1500 }, [
      { name: 'tiny0', maxCount: 1 },
      { name: 'small0', maxCount: 1 }
    ])

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 117}","it('should respect field value limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldSize: 16 }, [])

    form.append('field0', 'This is okay')
    form.append('field1', 'This will make the parser explode')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')
      assert.strictEqual(err.field, 'field1')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 118}","it('should respect field value limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldSize: 16 }, [])

    form.append('field0', 'This is okay')
    form.append('field1', 'This will make the parser explode')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')
      assert.strictEqual(err.field, 'field1')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 145}","it('should respect fields given', function (done) {
    var form = new FormData()
    var parser = withLimits(undefined, [
      { name: 'wrongname', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 146}","it('should respect fields given', function (done) {
    var form = new FormData()
    var parser = withLimits(undefined, [
      { name: 'wrongname', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 208}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 209}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 211}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 212}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 213}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Assertion Roulette,"{'column': 6, 'line': 214}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 12, 'column': 2, 'index': 246}",Unknown,steel
/test/error-handling.js,Global Variable,"{'line': 18, 'column': 4, 'index': 521}","it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\'s error', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err instanceof Error, true)
      assert.strictEqual(err instanceof multer.MulterError, true)
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 19, 'column': 4, 'index': 551}","it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\'s error', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err instanceof Error, true)
      assert.strictEqual(err instanceof multer.MulterError, true)
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 20, 'column': 4, 'index': 618}","it('should be an instance of both `Error` and `MulterError` classes in case of the Multer\'s error', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err instanceof Error, true)
      assert.strictEqual(err instanceof multer.MulterError, true)
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 35, 'column': 4, 'index': 1076}","it('should respect parts limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ parts: 1 }, [
      { name: 'small0', maxCount: 1 }
    ])

    form.append('field0', 'BOOM!')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_PART_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 36, 'column': 4, 'index': 1106}","it('should respect parts limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ parts: 1 }, [
      { name: 'small0', maxCount: 1 }
    ])

    form.append('field0', 'BOOM!')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_PART_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 50, 'column': 4, 'index': 1477}","it('should respect file size limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fileSize: 1500 }, [
      { name: 'tiny0', maxCount: 1 },
      { name: 'small0', maxCount: 1 }
    ])

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 51, 'column': 4, 'index': 1507}","it('should respect file size limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fileSize: 1500 }, [
      { name: 'tiny0', maxCount: 1 },
      { name: 'small0', maxCount: 1 }
    ])

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 67, 'column': 4, 'index': 1982}","it('should respect file count limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ files: 1 }, [
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 68, 'column': 4, 'index': 2012}","it('should respect file count limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ files: 1 }, [
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 83, 'column': 4, 'index': 2437}","it('should respect file key limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldNameSize: 4 }, [
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_KEY')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 84, 'column': 4, 'index': 2467}","it('should respect file key limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldNameSize: 4 }, [
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_KEY')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 97, 'column': 4, 'index': 2810}","it('should respect field key limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldNameSize: 4 }, [])

    form.append('ok', 'SMILE')
    form.append('blowup', 'BOOM!')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_KEY')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 98, 'column': 4, 'index': 2840}","it('should respect field key limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldNameSize: 4 }, [])

    form.append('ok', 'SMILE')
    form.append('blowup', 'BOOM!')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_KEY')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 110, 'column': 4, 'index': 3157}","it('should respect field value limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldSize: 16 }, [])

    form.append('field0', 'This is okay')
    form.append('field1', 'This will make the parser explode')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')
      assert.strictEqual(err.field, 'field1')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 111, 'column': 4, 'index': 3187}","it('should respect field value limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fieldSize: 16 }, [])

    form.append('field0', 'This is okay')
    form.append('field1', 'This will make the parser explode')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_VALUE')
      assert.strictEqual(err.field, 'field1')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 124, 'column': 4, 'index': 3588}","it('should respect field count limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fields: 1 }, [])

    form.append('field0', 'BOOM!')
    form.append('field1', 'BOOM!')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 125, 'column': 4, 'index': 3618}","it('should respect field count limit', function (done) {
    var form = new FormData()
    var parser = withLimits({ fields: 1 }, [])

    form.append('field0', 'BOOM!')
    form.append('field1', 'BOOM!')

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FIELD_COUNT')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 137, 'column': 4, 'index': 3929}","it('should respect fields given', function (done) {
    var form = new FormData()
    var parser = withLimits(undefined, [
      { name: 'wrongname', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 138, 'column': 4, 'index': 3959}","it('should respect fields given', function (done) {
    var form = new FormData()
    var parser = withLimits(undefined, [
      { name: 'wrongname', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 152, 'column': 4, 'index': 4351}","it('should notify of missing field name', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data',
      '',
      'test content',
      '--' + boundary,
      ''
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 153, 'column': 4, 'index': 4390}","it('should notify of missing field name', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data',
      '',
      'test content',
      '--' + boundary,
      ''
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 154, 'column': 4, 'index': 4431}","it('should notify of missing field name', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data',
      '',
      'test content',
      '--' + boundary,
      ''
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 155, 'column': 4, 'index': 4493}","it('should notify of missing field name', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data',
      '',
      'test content',
      '--' + boundary,
      ''
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 156, 'column': 4, 'index': 4521}","it('should notify of missing field name', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data',
      '',
      'test content',
      '--' + boundary,
      ''
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 179, 'column': 4, 'index': 5018}","it('should notify of missing field name', function (done) {
    var form = new FormData()
    var storage = multer.memoryStorage()
    var parser = multer({ storage: storage }).single('small0')

    form.append('', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 180, 'column': 4, 'index': 5048}","it('should notify of missing field name', function (done) {
    var form = new FormData()
    var storage = multer.memoryStorage()
    var parser = multer({ storage: storage }).single('small0')

    form.append('', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 181, 'column': 4, 'index': 5089}","it('should notify of missing field name', function (done) {
    var form = new FormData()
    var storage = multer.memoryStorage()
    var parser = multer({ storage: storage }).single('small0')

    form.append('', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'MISSING_FIELD_NAME')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 192, 'column': 4, 'index': 5406}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 195, 'column': 6, 'index': 5515}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 200, 'column': 4, 'index': 5598}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 201, 'column': 4, 'index': 5628}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 202, 'column': 4, 'index': 5674}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 221, 'column': 4, 'index': 6315}","it('should report errors from busboy constructor', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var body = 'test'

    req.headers = {
      'content-type': 'multipart/form-data',
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Multipart: Boundary not found')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 222, 'column': 4, 'index': 6354}","it('should report errors from busboy constructor', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var body = 'test'

    req.headers = {
      'content-type': 'multipart/form-data',
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Multipart: Boundary not found')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 223, 'column': 4, 'index': 6395}","it('should report errors from busboy constructor', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var body = 'test'

    req.headers = {
      'content-type': 'multipart/form-data',
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Multipart: Boundary not found')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 224, 'column': 4, 'index': 6457}","it('should report errors from busboy constructor', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var body = 'test'

    req.headers = {
      'content-type': 'multipart/form-data',
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Multipart: Boundary not found')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 240, 'column': 4, 'index': 6810}","it('should report errors from busboy parsing', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""tiny0""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 241, 'column': 4, 'index': 6849}","it('should report errors from busboy parsing', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""tiny0""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 242, 'column': 4, 'index': 6890}","it('should report errors from busboy parsing', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""tiny0""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 243, 'column': 4, 'index': 6952}","it('should report errors from busboy parsing', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""tiny0""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 244, 'column': 4, 'index': 6980}","it('should report errors from busboy parsing', function (done) {
    var req = new stream.PassThrough()
    var storage = multer.memoryStorage()
    var upload = multer({ storage: storage }).single('tiny0')
    var boundary = 'AaB03x'
    var body = [
      '--' + boundary,
      'Content-Disposition: form-data; name=""tiny0""; filename=""test.txt""',
      'Content-Type: text/plain',
      '',
      'test without end boundary'
    ].join('\r\n')

    req.headers = {
      'content-type': 'multipart/form-data; boundary=' + boundary,
      'content-length': body.length
    }

    req.end(body)

    upload(req, null, function (err) {
      assert.strictEqual(err.message, 'Unexpected end of form')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 266, 'column': 4, 'index': 7552}","it('should gracefully handle more than one error at a time', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 267, 'column': 4, 'index': 7582}","it('should gracefully handle more than one error at a time', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      done()
    })
  })",steel
/test/error-handling.js,Global Variable,"{'line': 268, 'column': 4, 'index': 7649}","it('should gracefully handle more than one error at a time', function (done) {
    var form = new FormData()
    var storage = multer.diskStorage({ destination: os.tmpdir() })
    var upload = multer({ storage: storage, limits: { fileSize: 1, files: 1 } }).fields([
      { name: 'small0', maxCount: 1 }
    ])

    form.append('small0', util.file('small0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(upload, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_FILE_SIZE')
      done()
    })
  })",steel
/test/error-handling.js,Magic Number,"{'line': 211, 'column': 51, 'index': 6026}","it('should report errors from storage engines', function (done) {
    var storage = multer.memoryStorage()

    storage._removeFile = function _removeFile (req, file, cb) {
      var err = new Error('Test error')
      err.code = 'TEST'
      cb(err)
    }

    var form = new FormData()
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')

      assert.strictEqual(err.storageErrors.length, 1)
      assert.strictEqual(err.storageErrors[0].code, 'TEST')
      assert.strictEqual(err.storageErrors[0].field, 'tiny0')
      assert.strictEqual(err.storageErrors[0].file, req.file)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 41}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 43}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 44}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 45}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 46}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 70}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 71}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 72}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 74}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 75}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 76}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 78}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 79}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 80}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 81}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 110}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 112}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 113}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 114}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 115}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 117}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 118}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 119}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 120}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 122}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 123}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 124}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 125}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 127}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 128}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 129}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 130}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 132}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 133}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 134}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 135}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 137}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 138}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 139}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 140}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 142}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 143}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 144}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 145}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 159}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 160}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 161}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 164}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 182}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Assertion Roulette,"{'column': 6, 'line': 183}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Conditional Test Logic,"{'line': 19, 'column': 6, 'index': 439}","beforeEach(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      uploadDir = path
      upload = multer({ dest: path })
      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 15, 'column': 2, 'index': 341}","describe('Disk Storage', function () {
  var uploadDir, upload

  beforeEach(function (done) {
    temp.mkdir(function (err, path) {
      if (err) return done(err)

      uploadDir = path
      upload = multer({ dest: path })
      done()
    })
  })

  afterEach(function (done) {
    rimraf(uploadDir, done)
  })

  it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })

  it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })

  it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })

  it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })

  it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })
})",steel
/test/disk-storage.js,Global Variable,"{'line': 32, 'column': 4, 'index': 692}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 33, 'column': 4, 'index': 722}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 53, 'column': 4, 'index': 1307}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 54, 'column': 4, 'index': 1337}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 88, 'column': 4, 'index': 2469}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 89, 'column': 4, 'index': 2499}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 152, 'column': 4, 'index': 5221}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 153, 'column': 4, 'index': 5251}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 163, 'column': 6, 'index': 5605}","it('should remove uploaded files on error', function (done) {
    var form = new FormData()
    var parser = upload.single('tiny0')

    form.append('tiny0', util.file('tiny0.dat'))
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'LIMIT_UNEXPECTED_FILE')
      assert.strictEqual(err.field, 'small0')
      assert(deepEqual(err.storageErrors, []))

      var files = fs.readdirSync(uploadDir)
      assert(deepEqual(files, []))

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 171, 'column': 4, 'index': 5785}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 174, 'column': 4, 'index': 5898}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 175, 'column': 4, 'index': 5958}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 176, 'column': 4, 'index': 6004}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Global Variable,"{'line': 177, 'column': 4, 'index': 6044}","it('should report error when directory doesn\'t exist', function (done) {
    var directory = path.join(temp.mkdirSync(), 'ghost')
    function dest ($0, $1, cb) { cb(null, directory) }

    var storage = multer.diskStorage({ destination: dest })
    var upload = multer({ storage: storage })
    var parser = upload.single('tiny0')
    var form = new FormData()

    form.append('tiny0', util.file('tiny0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.strictEqual(err.code, 'ENOENT')
      assert.strictEqual(path.dirname(err.path), directory)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 45, 'column': 40, 'index': 1137}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 46, 'column': 55, 'index': 1198}","it('should process parser/form-data POST request', function (done) {
    var form = new FormData()
    var parser = upload.single('small0')

    form.append('name', 'Multer')
    form.append('small0', util.file('small0.dat'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')

      assert.strictEqual(req.file.fieldname, 'small0')
      assert.strictEqual(req.file.originalname, 'small0.dat')
      assert.strictEqual(req.file.size, 1778)
      assert.strictEqual(util.fileSize(req.file.path), 1778)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 80, 'column': 40, 'index': 2321}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 81, 'column': 55, 'index': 2379}","it('should process empty fields and an empty file', function (done) {
    var form = new FormData()
    var parser = upload.single('empty')

    form.append('empty', util.file('empty.dat'))
    form.append('name', 'Multer')
    form.append('version', '')
    form.append('year', '')
    form.append('checkboxfull', 'cb1')
    form.append('checkboxfull', 'cb2')
    form.append('checkboxhalfempty', 'cb1')
    form.append('checkboxhalfempty', '')
    form.append('checkboxempty', '')
    form.append('checkboxempty', '')

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert.strictEqual(req.body.name, 'Multer')
      assert.strictEqual(req.body.version, '')
      assert.strictEqual(req.body.year, '')

      assert(deepEqual(req.body.checkboxfull, ['cb1', 'cb2']))
      assert(deepEqual(req.body.checkboxhalfempty, ['cb1', '']))
      assert(deepEqual(req.body.checkboxempty, ['', '']))

      assert.strictEqual(req.file.fieldname, 'empty')
      assert.strictEqual(req.file.originalname, 'empty.dat')
      assert.strictEqual(req.file.size, 0)
      assert.strictEqual(util.fileSize(req.file.path), 0)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 114, 'column': 50, 'index': 3461}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 115, 'column': 65, 'index': 3529}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 119, 'column': 50, 'index': 3718}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 120, 'column': 65, 'index': 3788}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 124, 'column': 50, 'index': 3979}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 125, 'column': 65, 'index': 4047}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 129, 'column': 51, 'index': 4241}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 130, 'column': 66, 'index': 4313}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 134, 'column': 51, 'index': 4510}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 135, 'column': 66, 'index': 4581}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 139, 'column': 51, 'index': 4777}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 140, 'column': 66, 'index': 4850}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 144, 'column': 50, 'index': 5043}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
/test/disk-storage.js,Magic Number,"{'line': 145, 'column': 65, 'index': 5117}","it('should process multiple files', function (done) {
    var form = new FormData()
    var parser = upload.fields([
      { name: 'empty', maxCount: 1 },
      { name: 'tiny0', maxCount: 1 },
      { name: 'tiny1', maxCount: 1 },
      { name: 'small0', maxCount: 1 },
      { name: 'small1', maxCount: 1 },
      { name: 'medium', maxCount: 1 },
      { name: 'large', maxCount: 1 }
    ])

    form.append('empty', util.file('empty.dat'))
    form.append('tiny0', util.file('tiny0.dat'))
    form.append('tiny1', util.file('tiny1.dat'))
    form.append('small0', util.file('small0.dat'))
    form.append('small1', util.file('small1.dat'))
    form.append('medium', util.file('medium.dat'))
    form.append('large', util.file('large.jpg'))

    util.submitForm(parser, form, function (err, req) {
      assert.ifError(err)

      assert(deepEqual(req.body, {}))

      assert.strictEqual(req.files.empty[0].fieldname, 'empty')
      assert.strictEqual(req.files.empty[0].originalname, 'empty.dat')
      assert.strictEqual(req.files.empty[0].size, 0)
      assert.strictEqual(util.fileSize(req.files.empty[0].path), 0)

      assert.strictEqual(req.files.tiny0[0].fieldname, 'tiny0')
      assert.strictEqual(req.files.tiny0[0].originalname, 'tiny0.dat')
      assert.strictEqual(req.files.tiny0[0].size, 122)
      assert.strictEqual(util.fileSize(req.files.tiny0[0].path), 122)

      assert.strictEqual(req.files.tiny1[0].fieldname, 'tiny1')
      assert.strictEqual(req.files.tiny1[0].originalname, 'tiny1.dat')
      assert.strictEqual(req.files.tiny1[0].size, 7)
      assert.strictEqual(util.fileSize(req.files.tiny1[0].path), 7)

      assert.strictEqual(req.files.small0[0].fieldname, 'small0')
      assert.strictEqual(req.files.small0[0].originalname, 'small0.dat')
      assert.strictEqual(req.files.small0[0].size, 1778)
      assert.strictEqual(util.fileSize(req.files.small0[0].path), 1778)

      assert.strictEqual(req.files.small1[0].fieldname, 'small1')
      assert.strictEqual(req.files.small1[0].originalname, 'small1.dat')
      assert.strictEqual(req.files.small1[0].size, 315)
      assert.strictEqual(util.fileSize(req.files.small1[0].path), 315)

      assert.strictEqual(req.files.medium[0].fieldname, 'medium')
      assert.strictEqual(req.files.medium[0].originalname, 'medium.dat')
      assert.strictEqual(req.files.medium[0].size, 13196)
      assert.strictEqual(util.fileSize(req.files.medium[0].path), 13196)

      assert.strictEqual(req.files.large[0].fieldname, 'large')
      assert.strictEqual(req.files.large[0].originalname, 'large.jpg')
      assert.strictEqual(req.files.large[0].size, 2413677)
      assert.strictEqual(util.fileSize(req.files.large[0].path), 2413677)

      done()
    })
  })",steel
