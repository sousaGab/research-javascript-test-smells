file,type,line,method,source
/spec/example.spec.js,AnonymousTest,"{'startLine':82,'endLine':84}","it(""custom-template example"", (done) => {
    runExample(""custom-template"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':86,'endLine':88}","it(""default example"", (done) => {
    runExample(""default"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':90,'endLine':92}","it(""favicon example"", (done) => {
    runExample(""favicon"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':94,'endLine':96}","it(""html-loader example"", (done) => {
    runExample(""html-loader"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':98,'endLine':100}","it(""inline example"", (done) => {
    runExample(""inline"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':102,'endLine':104}","it(""pug-loader example"", (done) => {
    runExample(""pug-loader"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':106,'endLine':108}","it(""javascript example"", (done) => {
    runExample(""javascript"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':110,'endLine':112}","it(""javascript-advanced example"", (done) => {
    runExample(""javascript-advanced"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':118,'endLine':120}","it(""multi-page example"", (done) => {
    runExample(""multi-page"", done);
  })",snuts
/spec/example.spec.js,AnonymousTest,"{'startLine':122,'endLine':124}","it(""template-parameters example"", (done) => {
    runExample(""template-parameters"", done);
  })",snuts
/spec/caching.spec.js,SubOptimalAssert,"{'startLine':110,'endLine':112}","it(""should compile nothing if no file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    let childCompilerHash;
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change the template file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that no file was built
        expect(getCompiledModules(stats.toJson())).toEqual([]);
        // Verify that the html was processed only during the initial build
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(1);
        // Verify that the child compilation was executed twice
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",snuts
/spec/caching.spec.js,SubOptimalAssert,"{'startLine':140,'endLine':142}","it(""should not compile the webpack html file if only a javascript file was changed"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin();
    const compiler = setUpCompiler(htmlWebpackPlugin);
    let childCompilerHash;
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed only during the initial build
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(1);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",snuts
/spec/caching.spec.js,SubOptimalAssert,"{'startLine':172,'endLine':174}","it(""should compile the webpack html file even if only a javascript file was changed if caching is disabled"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      cache: false,
    });
    let childCompilerHash;
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed on every run
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",snuts
/spec/caching.spec.js,SubOptimalAssert,"{'startLine':201,'endLine':203}","it(""should compile the webpack html if the template file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(template);
    compiler
      .run()
      // Change the template file and compile again
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 1 -->"" });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed twice
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);

        const [evaluateCompilationResultArgs1, evaluateCompilationResultArgs2] =
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls;
        const compiledSource = evaluateCompilationResultArgs1[0];
        const compiledSourceSecondRun = evaluateCompilationResultArgs2[0];

        // Verify that the child compilation was executed twice
        expect(compiledSource).not.toBe(compiledSourceSecondRun);
      })
      .then(done);
  })",snuts
/spec/caching.spec.js,SubOptimalAssert,"{'startLine':313,'endLine':315}","it(""should keep watching the webpack html if only a js file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const jsFile = path.join(__dirname, ""fixtures/index.js"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(template);
    compiler.addTestFile(jsFile);
    // Build the template file for the first time
    compiler
      .startWatching()
      // Change the template file (second build)
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 1 -->"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 1"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 2"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 3"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change the template file (third build)
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 2 -->"" });
        return compiler.waitForWatchRunComplete();
      })
      .then(() => {
        // Verify that the html was processed trice
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(3);
      })
      .then(() => compiler.stopWatching())
      .then(done);
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':501,'endLine':525}","it(""allows you to inject a specified asset into a given html file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            excludeChunks: [""util""],
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':680,'endLine':695}","it(""allows to append hashes to the assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ hash: true, inject: true })],
      },
      ['<script defer=""defer"" src=""index_bundle.js?%hash%""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':814,'endLine':841}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""/some"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""/some/styles.css?%hash%""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':843,'endLine':870}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""some/"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""some/styles.css?%hash%""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':872,'endLine':898}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css?%hash%""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':900,'endLine':929}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            hash: true,
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""../styles.css?%hash%""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':1076,'endLine':1092}","it(""prepends the publicPath to /some"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""some/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""some/index_bundle.js""'],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':1111,'endLine':1130}","it(""prepends the publicPath to undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""../index_bundle.js""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':1232,'endLine':1251}","it(""handles subdirectories in the webpack output bundles along with a relative path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""../assets/index_bundle.js""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':2720,'endLine':2740}","it(""adds a favicon with publicPath undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""\.\.\/[^""]+\.ico"">/],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':3579,'endLine':3610}","it(""should add the javascript assets to the head for inject:true with scriptLoading:defer"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
            inject: true,
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""index_bundle.js""></script><link href=""styles.css"" rel=""stylesheet""></head>',
      ],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,IdenticalTestDescription,"{'startLine':3612,'endLine':3648}","it(""should allow to use headTags and bodyTags directly in string literals"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            inject: false,
            templateContent: ({ htmlWebpackPlugin }) => `
            <html>
              <head>${htmlWebpackPlugin.tags.headTags}</head>
              <body>${htmlWebpackPlugin.tags.bodyTags}</body>
            </html>
            `,
          }),
        ],
      },
      [
        '<head><script defer=""defer"" src=""index_bundle.js""></script><link href=""styles.css"" rel=""stylesheet""></head>',
      ],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':1662,'endLine':1664}","it(""allows events to add a no-value attribute"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.specialAttribute = true;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [
        /[\s]*<script defer=""defer"" src=""app_bundle.js"" specialattribute><\/script>[\s]*<\/head>/,
      ],
      null,
      done,
      false,
      false,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':1707,'endLine':1709}","it(""allows events to remove an attribute by setting it to false"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = false;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':1750,'endLine':1752}","it(""allows events to remove an attribute by setting it to null"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = null;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':1793,'endLine':1795}","it(""allows events to remove an attribute by setting it to undefined"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = undefined;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':2962,'endLine':2964}","it(""should sort the chunks in custom (reverse alphabetical) order"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/index.js""),
          c: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: function (a, b) {
              if (a < b) {
                return 1;
              }
              if (a > b) {
                return -1;
              }
              return 0;
            },
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""c_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">/,
      ],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,ConditionalTestLogic,"{'startLine':2965,'endLine':2967}","it(""should sort the chunks in custom (reverse alphabetical) order"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/index.js""),
          c: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: function (a, b) {
              if (a < b) {
                return 1;
              }
              if (a > b) {
                return -1;
              }
              return 0;
            },
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""c_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">/,
      ],
      null,
      done,
    );
  })",snuts
/spec/basic.spec.js,SubOptimalAssert,"{'startLine':62,'endLine':62}",Unknown,snuts
/spec/hot.spec.js,Duplicate Assert,"{'line': 150, 'column': 10, 'index': 4730}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 150, 'column': 10, 'index': 4730}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 155, 'column': 10, 'index': 4890}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 155, 'column': 10, 'index': 4890}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 156, 'column': 10, 'index': 4946}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 156, 'column': 10, 'index': 4946}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 166, 'column': 10, 'index': 5235}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 166, 'column': 10, 'index': 5235}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 171, 'column': 10, 'index': 5395}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 171, 'column': 10, 'index': 5395}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 172, 'column': 10, 'index': 5451}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 172, 'column': 10, 'index': 5451}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 185, 'column': 10, 'index': 5791}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 185, 'column': 10, 'index': 5791}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 190, 'column': 10, 'index': 5951}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 190, 'column': 10, 'index': 5951}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 191, 'column': 10, 'index': 6007}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 191, 'column': 10, 'index': 6007}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 263, 'column': 10, 'index': 8001}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 263, 'column': 10, 'index': 8001}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 268, 'column': 10, 'index': 8161}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 268, 'column': 10, 'index': 8161}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 269, 'column': 10, 'index': 8217}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 269, 'column': 10, 'index': 8217}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 279, 'column': 10, 'index': 8506}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 279, 'column': 10, 'index': 8506}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 284, 'column': 10, 'index': 8666}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 284, 'column': 10, 'index': 8666}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 285, 'column': 10, 'index': 8722}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 285, 'column': 10, 'index': 8722}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 298, 'column': 10, 'index': 9062}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 298, 'column': 10, 'index': 9062}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 303, 'column': 10, 'index': 9222}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 303, 'column': 10, 'index': 9222}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 304, 'column': 10, 'index': 9278}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Duplicate Assert,"{'line': 304, 'column': 10, 'index': 9278}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Magic Number,"{'line': 101, 'column': 54, 'index': 3341}","it(""should not cause missing hot-reloaded code of the main compilation"", () => {
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      target: ""node"",
      output: {
        path: OUTPUT_DIR,
      },
      plugins: [
        new webpack.HotModuleReplacementPlugin(),
        new HtmlWebpackPlugin({ template: DEFAULT_TEMPLATE }),
      ],
    };
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    fs.writeFileSync(jsFileTempPath, ""global = 1; module.hot.accept();"");
    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then(() => {
          fs.writeFileSync(jsFileTempPath, ""global = 2; module.hot.accept();"");
          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          const hotUpdateJsFileNames = Object.keys(
            stats.compilation.assets,
          ).filter((fileName) => /\.hot-update\.js$/.test(fileName));
          expect(hotUpdateJsFileNames).not.toEqual([]);
          expect(hotUpdateJsFileNames.length).toEqual(1);
          const hotUpdateFileSize =
            stats.compilation.assets[hotUpdateJsFileNames[0]].size();
          expect(hotUpdateFileSize).not.toEqual(0);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Magic Number,"{'line': 104, 'column': 48, 'index': 3499}","it(""should not cause missing hot-reloaded code of the main compilation"", () => {
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      target: ""node"",
      output: {
        path: OUTPUT_DIR,
      },
      plugins: [
        new webpack.HotModuleReplacementPlugin(),
        new HtmlWebpackPlugin({ template: DEFAULT_TEMPLATE }),
      ],
    };
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    fs.writeFileSync(jsFileTempPath, ""global = 1; module.hot.accept();"");
    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then(() => {
          fs.writeFileSync(jsFileTempPath, ""global = 2; module.hot.accept();"");
          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          const hotUpdateJsFileNames = Object.keys(
            stats.compilation.assets,
          ).filter((fileName) => /\.hot-update\.js$/.test(fileName));
          expect(hotUpdateJsFileNames).not.toEqual([]);
          expect(hotUpdateJsFileNames.length).toEqual(1);
          const hotUpdateFileSize =
            stats.compilation.assets[hotUpdateJsFileNames[0]].size();
          expect(hotUpdateFileSize).not.toEqual(0);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Mystery Guest,"{'column': 28, 'line': 138}","it(""should re-emit favicon and assets from a loader if watch is active"", () => {
    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/hot.spec.js,Mystery Guest,"{'column': 28, 'line': 252}","it(""should re-emit favicon and assets from a loader if watch is active and clean enabled"", () => {
    const expected = [""logo.png"", ""main.js"", ""favicon.ico"", ""index.html""];

    class MyPlugin {
      apply(compiler) {
        compiler.hooks.thisCompilation.tap(
          { name: this.constructor.name },
          (compilation) => {
            return compilation.hooks.processAssets.tap(
              {
                name: this.constructor.name,
                stage: webpack.Compilation.PROCESS_ASSETS_STAGE_ANALYSE,
              },
              (assets) => {
                expect(
                  expected.every((val) => Object.keys(assets).includes(val)),
                ).toBe(true);
              },
            );
          },
        );
      }
    }

    const template = path.join(
      __dirname,
      ""./fixtures/html-template-with-image.html"",
    );
    const config = {
      mode: ""development"",
      entry: path.join(__dirname, ""fixtures/index.js""),
      output: {
        clean: true,
        assetModuleFilename: ""[name][ext]"",
        path: OUTPUT_DIR,
      },
      module: {
        rules: [
          {
            test: /\.html$/,
            loader: ""html-loader"",
          },
        ],
      },
      plugins: [
        new HtmlWebpackPlugin({
          favicon: path.join(__dirname, ""./fixtures/favicon.ico""),
          template,
        }),
        new MyPlugin(),
      ],
    };

    const templateContent = fs.readFileSync(template, ""utf-8"");
    const compiler = new WebpackRecompilationSimulator(webpack(config));
    const jsFileTempPath = compiler.addTestFile(
      path.join(__dirname, ""fixtures/index.js""),
    );

    return (
      compiler
        .startWatching()
        // Change the template file and compile again
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            jsFileTempPath,
            ""module.exports = function calc(a, b){ return a - b };"",
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(
            template,
            templateContent.replace(
              /Some unique text/,
              ""Some other unique text"",
            ),
          );

          return compiler.waitForWatchRunComplete();
        })
        .then((stats) => {
          expect(
            expected.every((val) =>
              Object.keys(stats.compilation.assets).includes(val),
            ),
          ).toBe(true);
          expect(stats.compilation.errors).toEqual([]);
          expect(stats.compilation.warnings).toEqual([]);

          fs.writeFileSync(template, templateContent);
        })
        .then(() => compiler.stopWatching())
    );
  })",steel
/spec/example.spec.js,Conditional Test Logic,"{'line': 34, 'column': 4, 'index': 963}",Unknown,steel
/spec/example.spec.js,Conditional Test Logic,"{'line': 42, 'column': 6, 'index': 1207}",Unknown,steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 82}","it(""custom-template example"", (done) => {
    runExample(""custom-template"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 86}","it(""default example"", (done) => {
    runExample(""default"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 90}","it(""favicon example"", (done) => {
    runExample(""favicon"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 94}","it(""html-loader example"", (done) => {
    runExample(""html-loader"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 98}","it(""inline example"", (done) => {
    runExample(""inline"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 102}","it(""pug-loader example"", (done) => {
    runExample(""pug-loader"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 106}","it(""javascript example"", (done) => {
    runExample(""javascript"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 110}","it(""javascript-advanced example"", (done) => {
    runExample(""javascript-advanced"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 114}","it(""sort manually example"", (done) => {
    runExample(""sort-manually"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 118}","it(""multi-page example"", (done) => {
    runExample(""multi-page"", done);
  })",steel
/spec/example.spec.js,Unknown Test,"{'column': 2, 'line': 122}","it(""template-parameters example"", (done) => {
    runExample(""template-parameters"", done);
  })",steel
/spec/caching.spec.js,Conditional Test Logic,"{'line': 72, 'column': 2, 'index': 1941}",Unknown,steel
/spec/caching.spec.js,Magic Number,"{'line': 112, 'column': 15, 'index': 3290}","it(""should compile nothing if no file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    let childCompilerHash;
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change the template file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that no file was built
        expect(getCompiledModules(stats.toJson())).toEqual([]);
        // Verify that the html was processed only during the initial build
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(1);
        // Verify that the child compilation was executed twice
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 138, 'column': 60, 'index': 4280}","it(""should not compile the webpack html file if only a javascript file was changed"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin();
    const compiler = setUpCompiler(htmlWebpackPlugin);
    let childCompilerHash;
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed only during the initial build
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(1);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 142, 'column': 15, 'index': 4464}","it(""should not compile the webpack html file if only a javascript file was changed"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin();
    const compiler = setUpCompiler(htmlWebpackPlugin);
    let childCompilerHash;
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed only during the initial build
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(1);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 170, 'column': 60, 'index': 5509}","it(""should compile the webpack html file even if only a javascript file was changed if caching is disabled"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      cache: false,
    });
    let childCompilerHash;
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed on every run
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 174, 'column': 15, 'index': 5676}","it(""should compile the webpack html file even if only a javascript file was changed if caching is disabled"", (done) => {
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      cache: false,
    });
    let childCompilerHash;
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(path.join(__dirname, ""fixtures/index.js""));
    compiler
      .run()
      // Change a js file and compile again
      .then(() => {
        childCompilerHash = htmlWebpackPlugin.childCompilerHash;
        compiler.simulateFileChange(path.join(__dirname, ""fixtures/index.js""), {
          footer: ""//1"",
        });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed on every run
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);
        // Verify that the child compilation was executed only once
        expect(htmlWebpackPlugin.childCompilerHash).toBe(childCompilerHash);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 199, 'column': 60, 'index': 6593}","it(""should compile the webpack html if the template file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(template);
    compiler
      .run()
      // Change the template file and compile again
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 1 -->"" });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed twice
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);

        const [evaluateCompilationResultArgs1, evaluateCompilationResultArgs2] =
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls;
        const compiledSource = evaluateCompilationResultArgs1[0];
        const compiledSourceSecondRun = evaluateCompilationResultArgs2[0];

        // Verify that the child compilation was executed twice
        expect(compiledSource).not.toBe(compiledSourceSecondRun);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 203, 'column': 15, 'index': 6753}","it(""should compile the webpack html if the template file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(template);
    compiler
      .run()
      // Change the template file and compile again
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 1 -->"" });
        return compiler.run();
      })
      .then((stats) => {
        // Expect no errors:
        expectNoErrors(stats);
        // Verify that only one file was built
        expect(getCompiledModuleCount(stats.toJson())).toBe(1);
        // Verify that the html was processed twice
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(2);

        const [evaluateCompilationResultArgs1, evaluateCompilationResultArgs2] =
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls;
        const compiledSource = evaluateCompilationResultArgs1[0];
        const compiledSourceSecondRun = evaluateCompilationResultArgs2[0];

        // Verify that the child compilation was executed twice
        expect(compiledSource).not.toBe(compiledSourceSecondRun);
      })
      .then(done);
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 269, 'column': 45, 'index': 9062}","it(""should not slow down linear (10 plugins should not take 2.5 as much time as a 1 plugin)"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const createHtmlWebpackPlugin = () =>
      new HtmlWebpackPlugin({
        template: template,
        minify: false,
      });
    let singlePluginCompileStart;
    let singleCompileRunDuration;
    let multiPluginCompileStart;
    let multiCompileRunDuration;

    let singleCompiler = setUpCompiler(createHtmlWebpackPlugin());
    let multiCompiler = setUpCompiler.apply(
      null,
      Array(10)
        .fill(0)
        .map(() => createHtmlWebpackPlugin()),
    );

    Promise.resolve()
      .then(function singleCompileRun() {
        singlePluginCompileStart = process.hrtime();
        return (
          singleCompiler
            .run()
            // Change the template file and compile again
            .then(() => {
              singleCompileRunDuration = process.hrtime(
                singlePluginCompileStart,
              );
            })
        );
      })
      .then(function multiCompileRun() {
        multiPluginCompileStart = process.hrtime();
        return (
          multiCompiler
            .run()
            // Change the template file and compile again
            .then(() => {
              multiCompileRunDuration = process.hrtime(multiPluginCompileStart);
            })
        );
      })
      .then(function measureTime() {
        const singleCompileRunDurationInNs =
          singleCompileRunDuration[0] * 1e9 + singleCompileRunDuration[1];
        const multiCompileRunDurationInNs =
          multiCompileRunDuration[0] * 1e9 + multiCompileRunDuration[1];
        const speedComparison =
          (multiCompileRunDurationInNs / singleCompileRunDurationInNs) * 100;

        expect(speedComparison).toBeLessThan(260);
        done();
      });
  })",steel
/spec/caching.spec.js,Magic Number,"{'line': 315, 'column': 15, 'index': 10687}","it(""should keep watching the webpack html if only a js file was changed"", (done) => {
    const template = path.join(__dirname, ""fixtures/plain.html"");
    const jsFile = path.join(__dirname, ""fixtures/index.js"");
    const htmlWebpackPlugin = new HtmlWebpackPlugin({
      template: template,
    });
    const compiler = setUpCompiler(htmlWebpackPlugin);
    compiler.addTestFile(template);
    compiler.addTestFile(jsFile);
    // Build the template file for the first time
    compiler
      .startWatching()
      // Change the template file (second build)
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 1 -->"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 1"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 2"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change js
      .then(() => {
        compiler.simulateFileChange(jsFile, { footer: ""// 3"" });
        return compiler.waitForWatchRunComplete();
      })
      // Change the template file (third build)
      .then(() => {
        compiler.simulateFileChange(template, { footer: ""<!-- 2 -->"" });
        return compiler.waitForWatchRunComplete();
      })
      .then(() => {
        // Verify that the html was processed trice
        expect(
          htmlWebpackPlugin.evaluateCompilationResult.mock.calls.length,
        ).toBe(3);
      })
      .then(() => compiler.stopWatching())
      .then(done);
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 20, 'column': 0, 'index': 532}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 43, 'column': 4, 'index': 1141}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 49, 'column': 4, 'index': 1351}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 54, 'column': 4, 'index': 1488}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 65, 'column': 4, 'index': 1987}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 72, 'column': 4, 'index': 2164}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 74, 'column': 6, 'index': 2270}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 76, 'column': 13, 'index': 2376}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 77, 'column': 8, 'index': 2426}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 78, 'column': 10, 'index': 2479}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 99, 'column': 2, 'index': 3061}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 102, 'column': 4, 'index': 3174}",Unknown,steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 1662, 'column': 18, 'index': 43207}","it(""allows events to add a no-value attribute"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.specialAttribute = true;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [
        /[\s]*<script defer=""defer"" src=""app_bundle.js"" specialattribute><\/script>[\s]*<\/head>/,
      ],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 1707, 'column': 18, 'index': 44504}","it(""allows events to remove an attribute by setting it to false"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = false;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 1750, 'column': 18, 'index': 45751}","it(""allows events to remove an attribute by setting it to null"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = null;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 1793, 'column': 18, 'index': 47002}","it(""allows events to remove an attribute by setting it to undefined"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = undefined;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 2962, 'column': 14, 'index': 79081}","it(""should sort the chunks in custom (reverse alphabetical) order"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/index.js""),
          c: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: function (a, b) {
              if (a < b) {
                return 1;
              }
              if (a > b) {
                return -1;
              }
              return 0;
            },
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""c_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Conditional Test Logic,"{'line': 2965, 'column': 14, 'index': 79150}","it(""should sort the chunks in custom (reverse alphabetical) order"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/index.js""),
          c: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: function (a, b) {
              if (a < b) {
                return 1;
              }
              if (a > b) {
                return -1;
              }
              return 0;
            },
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""c_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Magic Number,"{'line': 2451, 'column': 36, 'index': 65874}","it(""fires the events in the correct order"", (done) => {
    const hookCallOrder = [
      ""beforeAssetTagGeneration"",
      ""alterAssetTags"",
      ""alterAssetTagGroups"",
      ""afterTemplateExecution"",
      ""beforeEmit"",
      ""afterEmit"",
    ];
    let eventsFired = [];
    let hookLength = 0;
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          const hooks = HtmlWebpackPlugin.getCompilationHooks(compilation);
          hookLength = hooks.length;
          // Hook into all hooks
          Object.keys(hooks).forEach((hookName) => {
            hooks[hookName].tapAsync(
              ""HtmlWebpackPluginTest"",
              (object, callback) => {
                eventsFired.push(hookName);
                callback();
              },
            );
          });
        });
      },
    };
    const shouldExpectWarnings = webpackMajorVersion < 4;
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [],
      null,
      () => {
        expect(hookLength).not.toBe(0);
        expect(eventsFired).toEqual(hookCallOrder);
        done();
      },
      false,
      shouldExpectWarnings,
    );
  })",steel
/spec/basic.spec.js,Mystery Guest,"{'column': 21, 'line': 594}","it(""allows you to specify your own HTML template function"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: { app: path.join(__dirname, ""fixtures/index.js"") },
        output: {
          path: OUTPUT_DIR,
          filename: ""app_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            templateContent: function () {
              return fs.readFileSync(
                path.join(__dirname, ""fixtures/plain.html""),
                ""utf8"",
              );
            },
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Mystery Guest,"{'column': 15, 'line': 1536}","it(""allows you write multiple HTML files"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin(),
          new HtmlWebpackPlugin({
            filename: ""second-file.html"",
            template: path.join(__dirname, ""fixtures/test.html""),
          }),
          new HtmlWebpackPlugin({
            filename: ""third-file.html"",
            template: path.join(__dirname, ""fixtures/test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""index_bundle.js""'],
      null,
      () => {
        expect(fs.existsSync(path.join(OUTPUT_DIR, ""second-file.html""))).toBe(
          true,
        );
        expect(fs.existsSync(path.join(OUTPUT_DIR, ""third-file.html""))).toBe(
          true,
        );
        done();
      },
    );
  })",steel
/spec/basic.spec.js,Mystery Guest,"{'column': 15, 'line': 1539}","it(""allows you write multiple HTML files"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin(),
          new HtmlWebpackPlugin({
            filename: ""second-file.html"",
            template: path.join(__dirname, ""fixtures/test.html""),
          }),
          new HtmlWebpackPlugin({
            filename: ""third-file.html"",
            template: path.join(__dirname, ""fixtures/test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""index_bundle.js""'],
      null,
      () => {
        expect(fs.existsSync(path.join(OUTPUT_DIR, ""second-file.html""))).toBe(
          true,
        );
        expect(fs.existsSync(path.join(OUTPUT_DIR, ""third-file.html""))).toBe(
          true,
        );
        done();
      },
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 114}","it(""generates a default index.html file for a single entry point"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [/<script defer=""defer"" src=""index_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 131}","it(""properly encodes file names in emitted URIs"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""foo/very fancy+name.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        /<script defer=""defer"" src=""foo\/very%20fancy%2Bname.js""><\/script>[\s]*<\/head>/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 173}","it(""generates a default index.html file with multiple entry points"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        '<script defer=""defer"" src=""util_bundle.js""',
        '<script defer=""defer"" src=""app_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 196}","it(""allows you to specify a custom loader without injection"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: false,
            template:
              ""pug-loader!"" + path.join(__dirname, ""fixtures/template.pug""),
          }),
        ],
      },
      ['<script src=""app_bundle.js', ""Some unique text""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 221}","it(""should pass through loader errors"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        optimization: {
          emitOnErrors: true,
        },
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: false,
            template: path.join(__dirname, ""fixtures/invalid.html""),
          }),
        ],
      },
      [""ReferenceError: foo is not defined""],
      null,
      done,
      true,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 249}","it(""uses a custom loader from webpack config"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        module: {
          rules: [{ test: /\.pug$/, loader: ""pug-loader"" }],
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: false,
            template: path.join(__dirname, ""fixtures/template.pug""),
          }),
        ],
      },
      ['<script src=""app_bundle.js', ""Some unique text""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 276}","it(""works when using html-loader"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            template:
              ""html-loader!"" + path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 301}","it(""allows you to specify your own HTML template file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/test.html""),
            inject: false,
          }),
        ],
      },
      ['<script src=""app_bundle.js', ""Some unique text""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 325}","it(""allows to use a function to map entry names to filenames"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: (entry) => `${entry}.html`,
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js'],
      ""app.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 348}","it(""allows to use [name] for file names"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: ""[name].html"",
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js'],
      ""app.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 371}","it(""picks up src/index.ejs by default"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        context: path.join(__dirname, ""fixtures""),
        entry: {
          app: ""./index.js"",
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""app_bundle.js', ""src/index.ejs""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 391}","it(""allows you to inject the assets into a given html file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""util_bundle.js""',
        '<script defer=""defer"" src=""app_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 419}","it(""allows you to inject the assets into the body of the given template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: ""body"",
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""util_bundle.js""',
        '<script defer=""defer"" src=""app_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 447}","it(""allows you to inject the assets into the head of the given template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: ""head"",
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""util_bundle.js""',
        '<script defer=""defer"" src=""app_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 475}","it(""allows you to inject a specified asset into a given html file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            chunks: [""app""],
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 501}","it(""allows you to inject a specified asset into a given html file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            excludeChunks: [""util""],
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 527}","it(""allows you to use chunkhash with asset into a given html file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: false,
            template: path.join(__dirname, ""fixtures/webpackconfig.html""),
          }),
        ],
      },
      [
        {
          type: ""chunkhash"",
          chunkName: ""app"",
          containStr: '<script src=""app_bundle.js""',
        },
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 557}","it(""allows you to disable injection"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: false,
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      [""<body></body>""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 582}","it(""allows you to specify your own HTML template function"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: { app: path.join(__dirname, ""fixtures/index.js"") },
        output: {
          path: OUTPUT_DIR,
          filename: ""app_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            templateContent: function () {
              return fs.readFileSync(
                path.join(__dirname, ""fixtures/plain.html""),
                ""utf8"",
              );
            },
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 608}","it(""works with source maps"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        devtool: ""source-map"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer src=""index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 626}","it(""handles hashes in bundle filenames"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle_[hash].js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [/<script defer=""defer"" src=""index_bundle_[0-9a-f]+\.js""*/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 643}","it(""handles hashes in the directory which has the bundle file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""/dist/[hash]/"",
          filename: ""index_bundle_[hash].js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        /<script defer=""defer"" src=""\/dist\/[0-9a-f]+\/index_bundle_[0-9a-f]+\.js""*/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 663}","it(""allows to append hashes to the assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ hash: true })],
      },
      ['<script defer=""defer"" src=""index_bundle.js?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 680}","it(""allows to append hashes to the assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ hash: true, inject: true })],
      },
      ['<script defer=""defer"" src=""index_bundle.js?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 697}","it(""should work with the css extract plugin"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin(),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css"" rel=""stylesheet"">'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 725}","it(""works with a javascript returning loader like raw-loader"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        module: {
          rules: [{ test: /\.html$/, use: [""raw-loader""] }],
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name].js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            template: path.join(__dirname, ""fixtures/plain.html""),
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""main.js""',
        ""<title>Example Plain file</title>"",
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 753}","it(""should work with the css extract plugin on windows and protocol relative urls support (#205)"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""//localhost:8080/"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin(),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""//localhost:8080/styles.css""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 782}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""/some/"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            hash: true,
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""/some/styles.css?%hash%""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 814}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""/some"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""/some/styles.css?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 843}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""some/"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""some/styles.css?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 872}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 900}","it(""should allow to add cache hashes to with the css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            hash: true,
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""../styles.css?%hash%""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 931}","it(""should inject css files when using the extract text plugin"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ inject: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 959}","it(""should allow to add cache hashes to with injected css assets"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({ hash: true, inject: true }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css?%hash%""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 987}","it(""should output xhtml link stylesheet tag"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            xhtml: true,
            minify: {
              keepClosingSlash: true,
            },
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      ['<link href=""styles.css"" rel=""stylesheet""/>'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1020}","it(""prepends the publicPath to function"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath() {
            return ""/"";
          },
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1040}","it(""prepends the publicPath to /some/"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""/some/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""/some/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1058}","it(""prepends the publicPath to /some"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""/some"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""/some/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1076}","it(""prepends the publicPath to /some"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""some/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""some/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1094}","it(""prepends the publicPath to undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1111}","it(""prepends the publicPath to undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""../index_bundle.js""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1132}","it('prepends the publicPath to script defer=""defer"" src', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          publicPath: ""http://cdn.example.com/assets/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        '<script defer=""defer"" src=""http://cdn.example.com/assets/index_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1152}","it(""handles subdirectories in the webpack output bundles"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
          publicPath: ""/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""/assets/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1170}","it(""allows to set public path to an empty string"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
          publicPath: """",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: ""foo/index.html"",
          }),
        ],
      },
      ['<script defer=""defer"" src=""assets/index_bundle.js""'],
      ""foo/index.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1192}","it(""allows to set the html-webpack-plugin public path to an empty string"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
          publicPath: ""/"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: ""foo/index.html"",
            publicPath: """",
          }),
        ],
      },
      ['<script defer=""defer"" src=""assets/index_bundle.js""'],
      ""foo/index.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1215}","it(""handles subdirectories in the webpack output bundles along with a relative path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      ['<script defer=""defer"" src=""assets/index_bundle.js""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1232}","it(""handles subdirectories in the webpack output bundles along with a relative path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""../assets/index_bundle.js""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1253}","it(""handles subdirectories in the webpack output bundles along with a absolute path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
          publicPath: ""http://cdn.example.com/"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        '<script defer=""defer"" src=""http://cdn.example.com/assets/index_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1273}","it(""allows you to configure the title of the generated HTML page"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ title: ""My Cool App"" })],
      },
      [""<title>My Cool App</title>""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1290}","it(""allows you to configure the output filename"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ filename: ""test.html"" })],
      },
      ['<script defer=""defer"" src=""index_bundle.js""'],
      ""test.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1307}","it(""will replace [hash] in the filename with the child compilation hash"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: ""test-[hash].html"",
          }),
        ],
      },
      ['<script defer=""defer"" src=""index_bundle.js""'],
      /test-\S+\.html$/,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1328}","it(""should work with hash options provided in output options"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
          hashDigestLength: 16,
        },
        plugins: [
          new HtmlWebpackPlugin({ filename: ""index.[contenthash].html"" }),
        ],
      },
      [],
      /index\.[a-z0-9]{16}\.html/,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1350}","it(""should allow filename in the format of [contenthash:<length>]"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({ filename: ""index.[contenthash:4].html"" }),
        ],
      },
      [],
      /index\.[a-z0-9]{4}\.html/,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1371}","it(""will replace [contenthash] in the filename with a content hash of 32 hex characters"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({ filename: ""index.[contenthash].html"" }),
        ],
      },
      [],
      /index\.[a-f0-9]{20}\.html/,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1392}","it(""will replace [templatehash] in the filename with a content hash of 32 hex characters"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({ filename: ""index.[templatehash].html"" }),
        ],
      },
      [],
      /index\.[a-f0-9]{20}\.html/,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1413}","it(""allows you to use an absolute output filename"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""../index_bundle.js""'],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1434}","it(""allows you to use an absolute output filename outside the output path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: path.join(OUTPUT_DIR, ""app""),
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: path.resolve(OUTPUT_DIR, ""test.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app/index_bundle.js""'],
      ""test.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1455}","it(""allows you to use an relative output filename outside the output path"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: path.join(OUTPUT_DIR, ""app""),
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            filename: ""../test.html"",
          }),
        ],
      },
      ['<script defer=""defer"" src=""app/index_bundle.js""'],
      ""test.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1476}","it(""will try to use a relative name if the filename is in a subdirectory"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ filename: ""assets/test.html"" })],
      },
      ['<script defer=""defer"" src=""../index_bundle.js""'],
      ""assets/test.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1493}","it('will try to use a relative name if the filename and the script defer=""defer"" are in a subdirectory', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""assets/index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ filename: ""assets/demo/test.html"" })],
      },
      ['<script defer=""defer"" src=""../../assets/index_bundle.js""'],
      ""assets/demo/test.html"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1547}","it(""should inject js css files even if the html file is incomplete"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/empty_html.html""),
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      [
        '<link href=""styles.css""',
        '<script defer=""defer"" src=""index_bundle.js""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1580}","it(""exposes the webpack configuration to templates"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          publicPath: ""https://cdn.com"",
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/webpackconfig.html""),
          }),
        ],
      },
      [""Public path is https://cdn.com""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1651}","it(""allows events to add a no-value attribute"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.specialAttribute = true;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [
        /[\s]*<script defer=""defer"" src=""app_bundle.js"" specialattribute><\/script>[\s]*<\/head>/,
      ],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1696}","it(""allows events to remove an attribute by setting it to false"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = false;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1739}","it(""allows events to remove an attribute by setting it to null"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = null;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 1782}","it(""allows events to remove an attribute by setting it to undefined"", (done) => {
    const examplePlugin = {
      apply: function (compiler) {
        compiler.hooks.compilation.tap(""HtmlWebpackPlugin"", (compilation) => {
          HtmlWebpackPlugin.getCompilationHooks(
            compilation,
          ).alterAssetTags.tapAsync(
            ""HtmlWebpackPluginTest"",
            (pluginArgs, callback) => {
              pluginArgs.assetTags.scripts = pluginArgs.assetTags.scripts.map(
                (tag) => {
                  if (tag.tagName === ""script"") {
                    tag.attributes.async = undefined;
                  }
                  return tag;
                },
              );
              callback(null, pluginArgs);
            },
          );
        });
      },
    };
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin(), examplePlugin],
      },
      [/<script defer=""defer"" src=""app_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
      false,
      false,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2459}","it(""works with commons chunk plugin"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        optimization: {
          splitChunks: {
            cacheGroups: {
              commons: {
                chunks: ""initial"",
                name: ""common"",
                enforce: true,
              },
            },
          },
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        /<script defer=""defer"" src=""common_bundle.js"">[\s\S]*<script defer=""defer"" src=""util_bundle.js"">/,
        /<script defer=""defer"" src=""common_bundle.js""[\s\S]*<script defer=""defer"" src=""index_bundle.js"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2493}","it(""adds a favicon"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2514}","it(""adds a base tag with attributes"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            base: {
              href: ""http://example.com/page.html"",
              target: ""_blank"",
            },
          }),
        ],
      },
      [/<base href=""http:\/\/example\.com\/page\.html"" target=""_blank"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2538}","it(""adds a base tag short syntax"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            base: ""http://example.com/page.html"",
          }),
        ],
      },
      [/<base href=""http:\/\/example\.com\/page\.html"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2559}","it(""adds a meta tag"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            meta: {
              viewport: {
                name: ""viewport"",
                content:
                  ""width=device-width, initial-scale=1, shrink-to-fit=no"",
              },
            },
          }),
        ],
      },
      [
        /<meta name=""viewport"" content=""width=device-width,initial-scale=1,shrink-to-fit=no"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2588}","it(""avoid duplicate meta tags for default template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        context: path.join(__dirname, ""fixtures""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [
        /<head><meta charset=""utf-8""\/><meta name=""viewport"" content=""width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover""><title>src\/index\.ejs<\/title><script defer=""defer"" src=""index_bundle.js""><\/script><\/head>/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2608}","it(""adds a meta tag with short notation"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            meta: {
              viewport: ""width=device-width, initial-scale=1, shrink-to-fit=no"",
            },
          }),
        ],
      },
      [
        /<meta name=""viewport"" content=""width=device-width,initial-scale=1,shrink-to-fit=no"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2633}","it(""adds a favicon with publicPath set to /some/"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""/some/"",
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""\/some\/+[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2655}","it(""adds a favicon with publicPath set to /some"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""/some"",
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""\/some\/+[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2677}","it(""adds a favicon with publicPath set to some/"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""some/"",
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""some\/+[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2699}","it(""adds a favicon with publicPath undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2720}","it(""adds a favicon with publicPath undefined"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
            filename: path.resolve(OUTPUT_DIR, ""subfolder"", ""test.html""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""\.\.\/[^""]+\.ico"">/],
      path.join(""subfolder"", ""test.html""),
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2742}","it(""adds a favicon with a publicPath set to /[hash]/ and replaces the hash"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""/[hash]/"",
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""\/[a-z0-9]{20}\/favicon\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2764}","it(""adds a favicon with a publicPath set to [hash]/ and replaces the hash"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          publicPath: ""[hash]/"",
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""[a-z0-9]{20}\/favicon\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2786}","it(""adds a favicon with inject enabled"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""[^""]+\.ico"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2808}","it(""adds a favicon with xhtml enabled"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            xhtml: true,
            minify: {
              keepClosingSlash: true,
            },
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
          }),
        ],
      },
      [/<link rel=""icon"" href=""[^""]+\.ico""\/>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2834}","it(""shows an error if the favicon could not be load"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        optimization: {
          emitOnErrors: true,
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: true,
            favicon: path.join(__dirname, ""fixtures/does_not_exist.ico""),
          }),
        ],
      },
      [""Error: HtmlWebpackPlugin: could not load file""],
      null,
      done,
      true,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2860}","it(""works with webpack BannerPlugin"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new webpack.BannerPlugin(""Copyright and such.""),
          new HtmlWebpackPlugin(),
        ],
      },
      [""<html""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2880}","it(""shows an error when a template fails to load"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(
              __dirname,
              ""fixtures/non-existing-template.html"",
            ),
          }),
        ],
      },
      [
        Number(webpackMajorVersion) >= 5
          ? ""Child compilation failed:\n  Module not found:""
          : ""Child compilation failed:\n  Entry module not found:"",
      ],
      null,
      done,
      true,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2909}","it(""should sort the chunks in auto mode"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          util: path.join(__dirname, ""fixtures/util.js""),
          index: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        optimization: {
          splitChunks: {
            cacheGroups: {
              commons: {
                chunks: ""initial"",
                name: ""common"",
                enforce: true,
              },
            },
          },
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: ""auto"",
          }),
        ],
      },
      [
        /(<script defer=""defer"" src=""common_bundle.js"">.+<script defer=""defer"" src=""util_bundle.js"">.+<script defer=""defer"" src=""index_bundle.js"">)|(<script defer=""defer"" src=""common_bundle.js"">.+<script defer=""defer"" src=""index_bundle.js"">.+<script defer=""defer"" src=""util_bundle.js"">)/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2946}","it(""should sort the chunks in custom (reverse alphabetical) order"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/index.js""),
          c: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: function (a, b) {
              if (a < b) {
                return 1;
              }
              if (a > b) {
                return -1;
              }
              return 0;
            },
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""c_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 2981}","it(""should sort manually by the chunks"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          b: path.join(__dirname, ""fixtures/util.js""),
          a: path.join(__dirname, ""fixtures/theme.js""),
          d: path.join(__dirname, ""fixtures/util.js""),
          c: path.join(__dirname, ""fixtures/theme.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        module: {
          rules: [{ test: /\.css$/, loader: ""css-loader"" }],
        },
        optimization: {
          splitChunks: {
            cacheGroups: {
              commons: {
                chunks: ""initial"",
                name: ""common"",
                enforce: true,
              },
            },
          },
        },
        plugins: [
          new HtmlWebpackPlugin({
            chunksSortMode: ""manual"",
            chunks: [""common"", ""a"", ""b"", ""c""],
          }),
        ],
      },
      [
        /<script defer=""defer"" src=""common_bundle.js"">.+<script defer=""defer"" src=""a_bundle.js"">.+<script defer=""defer"" src=""b_bundle.js"">.+<script defer=""defer"" src=""c_bundle.js"">/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3024}","it(""should add the webpack compilation object as a property of the templateParam object"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.js""),
            inject: false,
          }),
        ],
      },
      ['templateParams keys: ""compilation,webpackConfig,htmlWebpackPlugin""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3046}","it(""should add the webpack compilation object as a property of the templateParam object with cjs"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.cjs""),
            inject: false,
          }),
        ],
      },
      ['templateParams keys: ""compilation,webpackConfig,htmlWebpackPlugin""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3068}","it(""should allow to disable template parameters"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.js""),
            inject: false,
            templateParameters: false,
          }),
        ],
      },
      ['templateParams keys: """"'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3091}","it(""should allow to set specific template parameters"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.js""),
            inject: false,
            templateParameters: { foo: ""bar"" },
          }),
        ],
      },
      [
        'templateParams keys: ""compilation,webpackConfig,htmlWebpackPlugin,foo""',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3116}","it(""should allow to set specific template parameters using a function"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.js""),
            inject: false,
            templateParameters: function () {
              return { foo: ""bar"" };
            },
          }),
        ],
      },
      ['templateParams keys: ""foo""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3141}","it(""should allow to set specific template parameters using a async function"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/templateParam.js""),
            inject: false,
            templateParameters: function () {
              return Promise.resolve({ foo: ""bar"" });
            },
          }),
        ],
      },
      ['templateParams keys: ""foo""'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3166}","it(""should not treat templateContent set to an empty string as missing"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: { app: path.join(__dirname, ""fixtures/index.js"") },
        output: {
          path: OUTPUT_DIR,
          filename: ""app_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            templateContent: """",
          }),
        ],
      },
      [/^<head><script defer=""defer"" src=""app_bundle\.js""><\/script><\/head>$/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3187}","it(""allows you to inject the assets into the body of the given spaced closing tag template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: ""body"",
            template: path.join(__dirname, ""fixtures/spaced_plain.html""),
          }),
        ],
      },
      [
        /<body>[\s]*<script defer=""defer"" src=""index_bundle.js""><\/script>[\s]*<\/body>/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3211}","it(""allows you to inject the assets into the head of the given spaced closing tag template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            inject: ""head"",
            template: path.join(__dirname, ""fixtures/spaced_plain.html""),
          }),
        ],
      },
      [/<script defer=""defer"" src=""index_bundle.js""><\/script>[\s]*<\/head>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3233}","it(""should minify by default when mode is production"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [/<!doctype html><html><head><meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3250}","it(""should not minify by default when mode is development"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin()],
      },
      [/<!DOCTYPE html>\s+<html>\s+<head>\s+<meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3267}","it(""should minify in production if options.minify is true"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ minify: true })],
      },
      [/<!doctype html><html><head><meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3284}","it(""should minify in development if options.minify is true"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ minify: true })],
      },
      [/<!doctype html><html><head><meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3301}","it(""should not minify in production if options.minify is false"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ minify: false })],
      },
      [/<!DOCTYPE html>\s+<html>\s+<head>\s+<meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3318}","it(""should not minify in development if options.minify is false"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [new HtmlWebpackPlugin({ minify: false })],
      },
      [/<!DOCTYPE html>\s+<html>\s+<head>\s+<meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3335}","it(""should allow custom minify options and not merge them with the defaults"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            minify: {
              useShortDoctype: true,
            },
          }),
        ],
      },
      [/<!doctype html>\s+<html>\s+<head>\s+<meta charset=""utf-8"">/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3358}","it('should allow to inject scripts with a defer=""defer"" attribute', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
          }),
        ],
      },
      [/<script defer=""defer"" .+<body>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3379}","it('should allow to inject scripts with a type=""module"" attribute', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""module"",
          }),
        ],
      },
      [/<script type=""module"" src=""index_bundle.js""><\/script>.+<body>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3400}","it('should allow to inject scripts with a type=""systemjs-module"" attribute', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""systemjs-module"",
          }),
        ],
      },
      [
        /<script type=""systemjs-module"" src=""index_bundle.js""><\/script>.+<body>/,
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3423}","it('should allow to inject scripts with a defer=""defer"" attribute to the body', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
            inject: ""body"",
          }),
        ],
      },
      [/<body>.*<script defer=""defer""/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3445}","it('should allow to inject scripts with a defer=""defer"" in front of styles', (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      [/<script defer=""defer"".+<link href=""styles.css""/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3475}","it(""should keep closing slashes from the template"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
            templateContent: ""<html><body> <selfclosed /> </body></html>"",
          }),
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
        ],
      },
      [/<selfclosed\/>/],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3506}","it(""should add the javascript assets to the head for inject:true with scriptLoading:defer"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
            inject: true,
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""index_bundle.js""></script><link href=""styles.css"" rel=""stylesheet""></head>',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3539}","it(""should allow to use headTags and bodyTags directly in string literals"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            scriptLoading: ""blocking"",
            inject: false,
            templateContent: ({ htmlWebpackPlugin }) => `
            <html>
              <head>${htmlWebpackPlugin.tags.headTags}</head>
              <body>${htmlWebpackPlugin.tags.bodyTags}</body>
            </html>
            `,
          }),
        ],
      },
      [
        '<head><link href=""styles.css"" rel=""stylesheet""></head>',
        '<script src=""index_bundle.js""></script></body>',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3579}","it(""should add the javascript assets to the head for inject:true with scriptLoading:defer"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            scriptLoading: ""defer"",
            inject: true,
          }),
        ],
      },
      [
        '<script defer=""defer"" src=""index_bundle.js""></script><link href=""styles.css"" rel=""stylesheet""></head>',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3612}","it(""should allow to use headTags and bodyTags directly in string literals"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/theme.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.css$/,
              use: [MiniCssExtractPlugin.loader, ""css-loader""],
            },
          ],
        },
        plugins: [
          new MiniCssExtractPlugin({ filename: ""styles.css"" }),
          new HtmlWebpackPlugin({
            inject: false,
            templateContent: ({ htmlWebpackPlugin }) => `
            <html>
              <head>${htmlWebpackPlugin.tags.headTags}</head>
              <body>${htmlWebpackPlugin.tags.bodyTags}</body>
            </html>
            `,
          }),
        ],
      },
      [
        '<head><script defer=""defer"" src=""index_bundle.js""></script><link href=""styles.css"" rel=""stylesheet""></head>',
      ],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3650}","it(""should allow to use experiments:{outputModule:true}"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          module: true,
        },
        experiments: { outputModule: true },
        plugins: [new HtmlWebpackPlugin({})],
      },
      ['<script defer=""defer"" src=""index_bundle.js""></script>'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3669}","it(""generates relative path for asset/resource"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          assetModuleFilename: ""assets/demo[ext]"",
        },
        module: {
          rules: [{ test: /\.png$/, type: ""asset/resource"" }],
        },
        plugins: [
          new HtmlWebpackPlugin({
            template:
              ""html-loader!"" + path.join(__dirname, ""fixtures/logo.html""),
            filename: ""demo/index.js"",
          }),
        ],
      },
      ['<img src=""../assets/demo.png'],
      ""demo/index.js"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3696}","it(""uses the absolute path for asset/resource"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          assetModuleFilename: ""assets/demo[ext]"",
        },
        module: {
          rules: [{ test: /\.png$/, type: ""asset/resource"" }],
        },
        plugins: [
          new HtmlWebpackPlugin({
            template:
              ""html-loader!"" + path.join(__dirname, ""fixtures/logo.html""),
            filename: ""demo/index.js"",
            publicPath: ""/foo/"",
          }),
        ],
      },
      ['<img src=""/foo/assets/demo.png'],
      ""demo/index.js"",
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3724}","it(""generates an html file if entry is empty"", (done) => {
    testHtmlPlugin(
      {
        mode: ""development"",
        entry: {},
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
          assetModuleFilename: ""assets/demo[ext]"",
        },
        plugins: [new HtmlWebpackPlugin({})],
      },
      [""<body>""],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3742}","it(""allows to set custom loader interpolation settings"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        module: {
          rules: [
            {
              test: /\.html$/,
              loader: require.resolve(""../lib/loader.js""),
              options: {
                interpolate: /\{%=([\s\S]+?)%\}/g,
              },
            },
          ],
        },
        plugins: [
          new HtmlWebpackPlugin({
            title: ""Interpolation Demo"",
            template: path.join(__dirname, ""fixtures/interpolation.html""),
          }),
        ],
      },
      [""Interpolation Demo""],
      null,
      () => {
        done();
      },
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3779}","it(""allows you to use empty HTML template file"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: {
          app: path.join(__dirname, ""fixtures/index.js""),
        },
        output: {
          path: OUTPUT_DIR,
          filename: ""[name]_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/empty.html""),
          }),
        ],
      },
      ['<script defer=""defer"" src=""app_bundle.js'],
      null,
      done,
    );
  })",steel
/spec/basic.spec.js,Unknown Test,"{'column': 2, 'line': 3802}","it(""allow you to use custom HTML tag attributes in templates"", (done) => {
    testHtmlPlugin(
      {
        mode: ""production"",
        entry: path.join(__dirname, ""fixtures/index.js""),
        output: {
          path: OUTPUT_DIR,
          filename: ""index_bundle.js"",
        },
        plugins: [
          new HtmlWebpackPlugin({
            template: path.join(__dirname, ""fixtures/template.ejs""),
            baseHref: ""/"",
            minify: false,
            appMountIds: [""react-app"", ""portal-root""],
            favicon: path.join(__dirname, ""fixtures/favicon.ico""),
            inject: false,
          }),
        ],
      },
      [
        /<script src=""index_bundle.js"" type=""text\/javascript"" nonce=""NONCE""><\/script>/,
      ],
      null,
      done,
    );
  })",steel
