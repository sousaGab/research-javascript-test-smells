file,type,line,frame
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 18}","  16 |       var cb = after(2, function (err, res, line) {
  17 |         if (err) return done(err)
> 18 |         assert(res.text.length > 0)
     |        ^ Assertion Roulette
  19 |         assert.strictEqual(line.substr(0, res.text.length), res.text)
  20 |         done()
  21 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 19}","  17 |         if (err) return done(err)
  18 |         assert(res.text.length > 0)
> 19 |         assert.strictEqual(line.substr(0, res.text.length), res.text)
     |        ^ Assertion Roulette
  20 |         done()
  21 |       })
  22 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 12, 'line': 93}","  91 |           var cb = after(2, function (err, res, line) {
  92 |             if (err) return done(err)
> 93 |             assert(res.text.length > 0)
     |            ^ Assertion Roulette
  94 |             assert.strictEqual(line.substr(0, res.text.length), res.text)
  95 |             done()
  96 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 12, 'line': 94}","  92 |             if (err) return done(err)
  93 |             assert(res.text.length > 0)
> 94 |             assert.strictEqual(line.substr(0, res.text.length), res.text)
     |            ^ Assertion Roulette
  95 |             done()
  96 |           })
  97 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 159}","  157 |         var cb = after(2, function (err, res, line) {
  158 |           if (err) return done(err)
> 159 |           assert(res.text.length > 0)
      |          ^ Assertion Roulette
  160 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
  161 |           done()
  162 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 160}","  158 |           if (err) return done(err)
  159 |           assert(res.text.length > 0)
> 160 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
      |          ^ Assertion Roulette
  161 |           done()
  162 |         })
  163 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 180}","  178 |         var cb = after(2, function (err, res, line) {
  179 |           if (err) return done(err)
> 180 |           assert(res.text.length > 0)
      |          ^ Assertion Roulette
  181 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
  182 |           done()
  183 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 181}","  179 |           if (err) return done(err)
  180 |           assert(res.text.length > 0)
> 181 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
      |          ^ Assertion Roulette
  182 |           done()
  183 |         })
  184 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 377}","  375 |         var cb = after(2, function (err, res, line) {
  376 |           if (err) return done(err)
> 377 |           assert.ok(res.text.length > 0)
      |          ^ Assertion Roulette
  378 |           assert.strictEqual(line, res.text)
  379 |           done()
  380 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 378}","  376 |           if (err) return done(err)
  377 |           assert.ok(res.text.length > 0)
> 378 |           assert.strictEqual(line, res.text)
      |          ^ Assertion Roulette
  379 |           done()
  380 |         })
  381 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 414}","  412 |         var cb = after(2, function (err, res, line) {
  413 |           if (err) return done(err)
> 414 |           assert.ok(res.text.length > 0)
      |          ^ Assertion Roulette
  415 |           assert.strictEqual(line, res.text)
  416 |           done()
  417 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 415}","  413 |           if (err) return done(err)
  414 |           assert.ok(res.text.length > 0)
> 415 |           assert.strictEqual(line, res.text)
      |          ^ Assertion Roulette
  416 |           done()
  417 |         })
  418 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 434}","  432 |         var cb = after(2, function (err, res, line) {
  433 |           if (err) return done(err)
> 434 |           assert.ok(res.text.length > 0)
      |          ^ Assertion Roulette
  435 |           assert.strictEqual(line, res.text)
  436 |           done()
  437 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 435}","  433 |           if (err) return done(err)
  434 |           assert.ok(res.text.length > 0)
> 435 |           assert.strictEqual(line, res.text)
      |          ^ Assertion Roulette
  436 |           done()
  437 |         })
  438 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 452}","  450 |         var cb = after(2, function (err, res, line) {
  451 |           if (err) return done(err)
> 452 |           assert.ok(res.text.length > 0)
      |          ^ Assertion Roulette
  453 |           assert.strictEqual(line, res.text)
  454 |
  455 |           res.req.connection.destroy()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 453}","  451 |           if (err) return done(err)
  452 |           assert.ok(res.text.length > 0)
> 453 |           assert.strictEqual(line, res.text)
      |          ^ Assertion Roulette
  454 |
  455 |           res.req.connection.destroy()
  456 |           server.close(done)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 500}","  498 |         var cb = after(2, function (err, res, line) {
  499 |           if (err) return done(err)
> 500 |           assert.ok(res.text.length > 0)
      |          ^ Assertion Roulette
  501 |           assert.strictEqual(line, res.text)
  502 |
  503 |           res.req.connection.destroy()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 501}","  499 |           if (err) return done(err)
  500 |           assert.ok(res.text.length > 0)
> 501 |           assert.strictEqual(line, res.text)
      |          ^ Assertion Roulette
  502 |
  503 |           res.req.connection.destroy()
  504 |           server.close(done)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 580}","  578 |           var end = Date.now()
  579 |           var ms = parseFloat(line)
> 580 |           assert(ms > 0)
      |          ^ Assertion Roulette
  581 |           assert(ms < end - start + 1)
  582 |           done()
  583 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 581}","  579 |           var ms = parseFloat(line)
  580 |           assert(ms > 0)
> 581 |           assert(ms < end - start + 1)
      |          ^ Assertion Roulette
  582 |           done()
  583 |         })
  584 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 649}","  647 |           var end = Date.now()
  648 |           var ms = parseFloat(line)
> 649 |           assert(ms > 0)
      |          ^ Assertion Roulette
  650 |           assert(ms < end - start + 1)
  651 |           assert(ms < write - start + 1)
  652 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 650}","  648 |           var ms = parseFloat(line)
  649 |           assert(ms > 0)
> 650 |           assert(ms < end - start + 1)
      |          ^ Assertion Roulette
  651 |           assert(ms < write - start + 1)
  652 |           done()
  653 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 651}","  649 |           assert(ms > 0)
  650 |           assert(ms < end - start + 1)
> 651 |           assert(ms < write - start + 1)
      |          ^ Assertion Roulette
  652 |           done()
  653 |         })
  654 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 807}","  805 |           var end = Date.now()
  806 |           var ms = parseFloat(line)
> 807 |           assert(ms > 0)
      |          ^ Assertion Roulette
  808 |           assert(ms < end - start + 1)
  809 |           done()
  810 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 808}","  806 |           var ms = parseFloat(line)
  807 |           assert(ms > 0)
> 808 |           assert(ms < end - start + 1)
      |          ^ Assertion Roulette
  809 |           done()
  810 |         })
  811 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 876}","  874 |           var end = Date.now()
  875 |           var ms = parseFloat(line)
> 876 |           assert(ms > 0)
      |          ^ Assertion Roulette
  877 |           assert(ms > write - start - 1)
  878 |           assert(ms < end - start + 1)
  879 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 877}","  875 |           var ms = parseFloat(line)
  876 |           assert(ms > 0)
> 877 |           assert(ms > write - start - 1)
      |          ^ Assertion Roulette
  878 |           assert(ms < end - start + 1)
  879 |           done()
  880 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 878}","  876 |           assert(ms > 0)
  877 |           assert(ms > write - start - 1)
> 878 |           assert(ms < end - start + 1)
      |          ^ Assertion Roulette
  879 |           done()
  880 |         })
  881 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1199}","  1197 |         var cb = after(2, function (err, res, line) {
  1198 |           if (err) return done(err)
> 1199 |           assert.strictEqual(line.substr(0, 36), '_color_0_GET / _color_0_102_color_0_')
       |          ^ Assertion Roulette
  1200 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1201 |           done()
  1202 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1200}","  1198 |           if (err) return done(err)
  1199 |           assert.strictEqual(line.substr(0, 36), '_color_0_GET / _color_0_102_color_0_')
> 1200 |           assert.strictEqual(line.substr(-9), '_color_0_')
       |          ^ Assertion Roulette
  1201 |           done()
  1202 |         })
  1203 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1230}","  1228 |         var cb = after(2, function (err, res, line) {
  1229 |           if (err) return done(err)
> 1230 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_32_200_color_0_')
       |          ^ Assertion Roulette
  1231 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1232 |           done()
  1233 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1231}","  1229 |           if (err) return done(err)
  1230 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_32_200_color_0_')
> 1231 |           assert.strictEqual(line.substr(-9), '_color_0_')
       |          ^ Assertion Roulette
  1232 |           done()
  1233 |         })
  1234 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1252}","  1250 |         var cb = after(2, function (err, res, line) {
  1251 |           if (err) return done(err)
> 1252 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_36_300_color_0_')
       |          ^ Assertion Roulette
  1253 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1254 |           done()
  1255 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1253}","  1251 |           if (err) return done(err)
  1252 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_36_300_color_0_')
> 1253 |           assert.strictEqual(line.substr(-9), '_color_0_')
       |          ^ Assertion Roulette
  1254 |           done()
  1255 |         })
  1256 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1274}","  1272 |         var cb = after(2, function (err, res, line) {
  1273 |           if (err) return done(err)
> 1274 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_33_400_color_0_')
       |          ^ Assertion Roulette
  1275 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1276 |           done()
  1277 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1275}","  1273 |           if (err) return done(err)
  1274 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_33_400_color_0_')
> 1275 |           assert.strictEqual(line.substr(-9), '_color_0_')
       |          ^ Assertion Roulette
  1276 |           done()
  1277 |         })
  1278 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1296}","  1294 |         var cb = after(2, function (err, res, line) {
  1295 |           if (err) return done(err)
> 1296 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_31_500_color_0_')
       |          ^ Assertion Roulette
  1297 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1298 |           done()
  1299 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 10, 'line': 1297}","  1295 |           if (err) return done(err)
  1296 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_31_500_color_0_')
> 1297 |           assert.strictEqual(line.substr(-9), '_color_0_')
       |          ^ Assertion Roulette
  1298 |           done()
  1299 |         })
  1300 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1383}","  1381 |       var cb = after(2, function (err, res, log) {
  1382 |         if (err) return done(err)
> 1383 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
       |        ^ Assertion Roulette
  1384 |         assert.ok(Date.now() - time >= 1000)
  1385 |         assert.ok(Date.now() - time <= 1100)
  1386 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1384}","  1382 |         if (err) return done(err)
  1383 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
> 1384 |         assert.ok(Date.now() - time >= 1000)
       |        ^ Assertion Roulette
  1385 |         assert.ok(Date.now() - time <= 1100)
  1386 |         done()
  1387 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1385}","  1383 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1384 |         assert.ok(Date.now() - time >= 1000)
> 1385 |         assert.ok(Date.now() - time <= 1100)
       |        ^ Assertion Roulette
  1386 |         done()
  1387 |       })
  1388 |       var server = createServer(':method :url', {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1411}","  1409 |       var cb = after(2, function (err, res, log) {
  1410 |         if (err) return done(err)
> 1411 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
       |        ^ Assertion Roulette
  1412 |         assert.ok(Date.now() - time >= 200)
  1413 |         assert.ok(Date.now() - time <= 300)
  1414 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1412}","  1410 |         if (err) return done(err)
  1411 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
> 1412 |         assert.ok(Date.now() - time >= 200)
       |        ^ Assertion Roulette
  1413 |         assert.ok(Date.now() - time <= 300)
  1414 |         done()
  1415 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1413}","  1411 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1412 |         assert.ok(Date.now() - time >= 200)
> 1413 |         assert.ok(Date.now() - time <= 300)
       |        ^ Assertion Roulette
  1414 |         done()
  1415 |       })
  1416 |       var server = createServer(':method :url', {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1505}","  1503 |       var cb = after(2, function (err, res, line) {
  1504 |         if (err) return done(err)
> 1505 |         assert.strictEqual(line, 'GET / -')
       |        ^ Assertion Roulette
  1506 |         done()
  1507 |       })
  1508 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1515}","  1513 |
  1514 |       var server = createServer(':method :url :res[x-sent]', { immediate: true, stream: stream }, function (req, res, next) {
> 1515 |         assert.ok(lineLogged)
       |        ^ Assertion Roulette
  1516 |         next()
  1517 |       })
  1518 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1574}","  1572 |       it('should compile a string into a function', function () {
  1573 |         var fn = morgan.compile(':method')
> 1574 |         assert.ok(typeof fn === 'function')
       |        ^ Assertion Roulette
  1575 |         assert.ok(fn.length === 3)
  1576 |       })
  1577 |     })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Assertion Roulette,"{'column': 8, 'line': 1575}","  1573 |         var fn = morgan.compile(':method')
  1574 |         assert.ok(typeof fn === 'function')
> 1575 |         assert.ok(fn.length === 3)
       |        ^ Assertion Roulette
  1576 |       })
  1577 |     })
  1578 |   })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 17, 'column': 8, 'index': 461}","  15 |     it('should use default format', function (done) {
  16 |       var cb = after(2, function (err, res, line) {
> 17 |         if (err) return done(err)
     |        ^ Conditional Test Logic
  18 |         assert(res.text.length > 0)
  19 |         assert.strictEqual(line.substr(0, res.text.length), res.text)
  20 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 35, 'column': 10, 'index': 988}","  33 |       it('should accept format as format name', function (done) {
  34 |         var cb = after(2, function (err, res, line) {
> 35 |           if (err) return done(err)
     |          ^ Conditional Test Logic
  36 |           assert(/^GET \/ 200 - - \d+\.\d{3} ms$/.test(line))
  37 |           done()
  38 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 51, 'column': 10, 'index': 1451}","  49 |       it('should accept format as format string', function (done) {
  50 |         var cb = after(2, function (err, res, line) {
> 51 |           if (err) return done(err)
     |          ^ Conditional Test Logic
  52 |           assert.strictEqual(line, 'GET /')
  53 |           done()
  54 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 67, 'column': 10, 'index': 1899}","  65 |       it('should accept format as function', function (done) {
  66 |         var cb = after(2, function (err, res, line) {
> 67 |           if (err) return done(err)
     |          ^ Conditional Test Logic
  68 |           assert.strictEqual(line, 'GET / 200')
  69 |           done()
  70 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 92, 'column': 12, 'index': 2647}","  90 |         it('should accept options object', function (done) {
  91 |           var cb = after(2, function (err, res, line) {
> 92 |             if (err) return done(err)
     |            ^ Conditional Test Logic
  93 |             assert(res.text.length > 0)
  94 |             assert.strictEqual(line.substr(0, res.text.length), res.text)
  95 |             done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 109, 'column': 12, 'index': 3188}","  107 |         it('should accept format in options for back-compat', function (done) {
  108 |           var cb = after(2, function (err, res, line) {
> 109 |             if (err) return done(err)
      |            ^ Conditional Test Logic
  110 |             assert.strictEqual(line, 'GET /')
  111 |             done()
  112 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 125, 'column': 12, 'index': 3694}","  123 |         it('should accept format function in options for back-compat', function (done) {
  124 |           var cb = after(2, function (err, res, line) {
> 125 |             if (err) return done(err)
      |            ^ Conditional Test Logic
  126 |             assert.strictEqual(line, 'apple')
  127 |             done()
  128 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 158, 'column': 10, 'index': 4495}","  156 |       it('should default to process.stdout', function (done) {
  157 |         var cb = after(2, function (err, res, line) {
> 158 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  159 |           assert(res.text.length > 0)
  160 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
  161 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 179, 'column': 10, 'index': 5096}","  177 |       it('should set stream to write logs to', function (done) {
  178 |         var cb = after(2, function (err, res, line) {
> 179 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  180 |           assert(res.text.length > 0)
  181 |           assert.strictEqual(line.substr(0, res.text.length), res.text)
  182 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 200, 'column': 10, 'index': 5706}","  198 |       it('should get current date in ""web"" format by default', function (done) {
  199 |         var cb = after(2, function (err, res, line) {
> 200 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  201 |           assert.ok(/^\w{3}, \d{2} \w{3} \d{4} \d{2}:\d{2}:\d{2} GMT$/.test(line))
  202 |           done()
  203 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 216, 'column': 10, 'index': 6193}","  214 |       it('should get current date in ""clf"" format', function (done) {
  215 |         var cb = after(2, function (err, res, line) {
> 216 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  217 |           assert.ok(/^\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000$/.test(line))
  218 |           done()
  219 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 232, 'column': 10, 'index': 6683}","  230 |       it('should get current date in ""iso"" format', function (done) {
  231 |         var cb = after(2, function (err, res, line) {
> 232 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  233 |           assert.ok(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(line))
  234 |           done()
  235 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 248, 'column': 10, 'index': 7175}","  246 |       it('should get current date in ""web"" format', function (done) {
  247 |         var cb = after(2, function (err, res, line) {
> 248 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  249 |           assert.ok(/^\w{3}, \d{2} \w{3} \d{4} \d{2}:\d{2}:\d{2} GMT$/.test(line))
  250 |           done()
  251 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 264, 'column': 10, 'index': 7662}","  262 |       it('should be blank for unknown format', function (done) {
  263 |         var cb = after(2, function (err, res, line) {
> 264 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  265 |           assert.strictEqual(line, '-')
  266 |           done()
  267 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 282, 'column': 10, 'index': 8145}","  280 |       it('should be 1.0 or 1.1', function (done) {
  281 |         var cb = after(2, function (err, res, line) {
> 282 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  283 |           assert.ok(/^1\.[01]$/.test(line))
  284 |           done()
  285 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 300, 'column': 10, 'index': 8633}","  298 |       it('should get request properties', function (done) {
  299 |         var cb = after(2, function (err, res, line) {
> 300 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  301 |           assert.strictEqual(line, 'me')
  302 |           done()
  303 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 317, 'column': 10, 'index': 9133}","  315 |       it('should display all values of array headers', function (done) {
  316 |         var cb = after(2, function (err, res, line) {
> 317 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  318 |           assert.strictEqual(line, 'foo=bar, fizz=buzz')
  319 |           done()
  320 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 336, 'column': 10, 'index': 9693}","  334 |       it('should get response properties', function (done) {
  335 |         var cb = after(2, function (err, res, line) {
> 336 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  337 |           assert.strictEqual(line, 'true')
  338 |           done()
  339 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 352, 'column': 10, 'index': 10150}","  350 |       it('should display all values of array headers', function (done) {
  351 |         var cb = after(2, function (err, res, line) {
> 352 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  353 |           assert.strictEqual(line, 'foo, bar')
  354 |           done()
  355 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 376, 'column': 10, 'index': 10819}","  374 |       it('should get remote address', function (done) {
  375 |         var cb = after(2, function (err, res, line) {
> 376 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  377 |           assert.ok(res.text.length > 0)
  378 |           assert.strictEqual(line, res.text)
  379 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 393, 'column': 10, 'index': 11303}","  391 |       it('should use req.ip if there', function (done) {
  392 |         var cb = after(2, function (err, res, line) {
> 393 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  394 |           assert.strictEqual(line, '10.0.0.1')
  395 |           done()
  396 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 413, 'column': 10, 'index': 11842}","  411 |       it('should work on https server', function (done) {
  412 |         var cb = after(2, function (err, res, line) {
> 413 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  414 |           assert.ok(res.text.length > 0)
  415 |           assert.strictEqual(line, res.text)
  416 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 433, 'column': 10, 'index': 12396}","  431 |       it('should work when connection: close', function (done) {
  432 |         var cb = after(2, function (err, res, line) {
> 433 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  434 |           assert.ok(res.text.length > 0)
  435 |           assert.strictEqual(line, res.text)
  436 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 451, 'column': 10, 'index': 12931}","  449 |       it('should work when connection: keep-alive', function (done) {
  450 |         var cb = after(2, function (err, res, line) {
> 451 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  452 |           assert.ok(res.text.length > 0)
  453 |           assert.strictEqual(line, res.text)
  454 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 476, 'column': 10, 'index': 13649}","  474 |       it('should work when req.ip is a getter', function (done) {
  475 |         var cb = after(2, function (err, res, line) {
> 476 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  477 |           assert.strictEqual(line, '10.0.0.1')
  478 |           done()
  479 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 499, 'column': 10, 'index': 14362}","  497 |       it('should not fail if req.connection missing', function (done) {
  498 |         var cb = after(2, function (err, res, line) {
> 499 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  500 |           assert.ok(res.text.length > 0)
  501 |           assert.strictEqual(line, res.text)
  502 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 525, 'column': 10, 'index': 15100}","  523 |       it('should be empty if none present', function (done) {
  524 |         var cb = after(2, function (err, res, line) {
> 525 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  526 |           assert.strictEqual(line, '-')
  527 |           done()
  528 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 541, 'column': 10, 'index': 15546}","  539 |       it('should support Basic authorization', function (done) {
  540 |         var cb = after(2, function (err, res, line) {
> 541 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  542 |           assert.strictEqual(line, 'tj')
  543 |           done()
  544 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 558, 'column': 10, 'index': 16055}","  556 |       it('should be empty for empty Basic authorization user', function (done) {
  557 |         var cb = after(2, function (err, res, line) {
> 558 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  559 |           assert.strictEqual(line, '-')
  560 |           done()
  561 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 577, 'column': 10, 'index': 16590}","  575 |       it('should be in milliseconds', function (done) {
  576 |         var cb = after(2, function (err, res, line) {
> 577 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  578 |           var end = Date.now()
  579 |           var ms = parseFloat(line)
  580 |           assert(ms > 0)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 598, 'column': 10, 'index': 17162}","  596 |       it('should have three digits by default', function (done) {
  597 |         var cb = after(2, function (err, res, line) {
> 598 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  599 |           assert.ok(/^[0-9]+\.[0-9]{3}$/.test(line))
  600 |           done()
  601 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 614, 'column': 10, 'index': 17630}","  612 |       it('should have five digits with argument ""5""', function (done) {
  613 |         var cb = after(2, function (err, res, line) {
> 614 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  615 |           assert.ok(/^[0-9]+\.[0-9]{5}$/.test(line))
  616 |           done()
  617 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 630, 'column': 10, 'index': 18099}","  628 |       it('should have no digits with argument ""0""', function (done) {
  629 |         var cb = after(2, function (err, res, line) {
> 630 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  631 |           assert.ok(/^[0-9]+$/.test(line))
  632 |           done()
  633 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 646, 'column': 10, 'index': 18557}","  644 |       it('should not include response write time', function (done) {
  645 |         var cb = after(2, function (err, res, line) {
> 646 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  647 |           var end = Date.now()
  648 |           var ms = parseFloat(line)
  649 |           assert(ms > 0)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 678, 'column': 10, 'index': 19404}","  676 |       it('should be empty without hidden property', function (done) {
  677 |         var cb = after(2, function (err, res, line) {
> 678 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  679 |           assert.strictEqual(line, '-')
  680 |           done()
  681 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 699, 'column': 10, 'index': 19964}","  697 |       it('should be empty before response', function (done) {
  698 |         var cb = after(2, function (err, res, line) {
> 699 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  700 |           assert.strictEqual(line, '-')
  701 |           done()
  702 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 720, 'column': 10, 'index': 20505}","  718 |       it('should be empty if morgan invoked after response sent', function (done) {
  719 |         var cb = after(3, function (err, res, line) {
> 720 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  721 |           assert.strictEqual(line, '-')
  722 |           done()
  723 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 751, 'column': 10, 'index': 21237}","  749 |       it('should get response status', function (done) {
  750 |         var cb = after(2, function (err, res, line) {
> 751 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  752 |           assert.strictEqual(line, String(res.statusCode))
  753 |           done()
  754 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 767, 'column': 10, 'index': 21700}","  765 |       it('should not exist before response sent', function (done) {
  766 |         var cb = after(2, function (err, res, line) {
> 767 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  768 |           assert.strictEqual(line, '-')
  769 |           done()
  770 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 804, 'column': 10, 'index': 22652}","  802 |       it('should be in milliseconds', function (done) {
  803 |         var cb = after(2, function (err, res, line) {
> 804 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  805 |           var end = Date.now()
  806 |           var ms = parseFloat(line)
  807 |           assert(ms > 0)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 825, 'column': 10, 'index': 23221}","  823 |       it('should have three digits by default', function (done) {
  824 |         var cb = after(2, function (err, res, line) {
> 825 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  826 |           assert.ok(/^[0-9]+\.[0-9]{3}$/.test(line))
  827 |           done()
  828 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 841, 'column': 10, 'index': 23686}","  839 |       it('should have five digits with argument ""5""', function (done) {
  840 |         var cb = after(2, function (err, res, line) {
> 841 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  842 |           assert.ok(/^[0-9]+\.[0-9]{5}$/.test(line))
  843 |           done()
  844 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 857, 'column': 10, 'index': 24152}","  855 |       it('should have no digits with argument ""0""', function (done) {
  856 |         var cb = after(2, function (err, res, line) {
> 857 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  858 |           assert.ok(/^[0-9]+$/.test(line))
  859 |           done()
  860 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 873, 'column': 10, 'index': 24603}","  871 |       it('should include response write time', function (done) {
  872 |         var cb = after(2, function (err, res, line) {
> 873 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  874 |           var end = Date.now()
  875 |           var ms = parseFloat(line)
  876 |           assert(ms > 0)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 905, 'column': 10, 'index': 25447}","  903 |       it('should be empty without hidden property', function (done) {
  904 |         var cb = after(2, function (err, res, line) {
> 905 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  906 |           assert.strictEqual(line, '-')
  907 |           done()
  908 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 926, 'column': 10, 'index': 26004}","  924 |       it('should be empty before response', function (done) {
  925 |         var cb = after(2, function (err, res, line) {
> 926 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  927 |           assert.strictEqual(line, '-')
  928 |           done()
  929 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 947, 'column': 10, 'index': 26542}","  945 |       it('should be empty if morgan invoked after response sent', function (done) {
  946 |         var cb = after(3, function (err, res, line) {
> 947 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  948 |           assert.strictEqual(line, '-')
  949 |           done()
  950 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 978, 'column': 10, 'index': 27264}","  976 |       it('should get request URL', function (done) {
  977 |         var cb = after(2, function (err, res, line) {
> 978 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  979 |           assert.strictEqual(line, '/foo')
  980 |           done()
  981 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 994, 'column': 10, 'index': 27710}","  992 |       it('should use req.originalUrl if exists', function (done) {
  993 |         var cb = after(2, function (err, res, line) {
> 994 |           if (err) return done(err)
      |          ^ Conditional Test Logic
  995 |           assert.strictEqual(line, '/bar')
  996 |           done()
  997 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1033, 'column': 10, 'index': 28752}","  1031 |       it('should log result of function', function (done) {
  1032 |         var cb = after(2, function (err, res, line) {
> 1033 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1034 |           assert.strictEqual(line, 'GET / 200')
  1035 |           done()
  1036 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1083, 'column': 10, 'index': 30126}","  1081 |       it('should accept format as format string of tokens', function (done) {
  1082 |         var cb = after(2, function (err, res, line) {
> 1083 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1084 |           assert.strictEqual(line, 'GET /')
  1085 |           done()
  1086 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1099, 'column': 10, 'index': 30578}","  1097 |       it('should accept text mixed with tokens', function (done) {
  1098 |         var cb = after(2, function (err, res, line) {
> 1099 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1100 |           assert.strictEqual(line, 'method=GET url=/')
  1101 |           done()
  1102 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1115, 'column': 10, 'index': 31048}","  1113 |       it('should accept special characters', function (done) {
  1114 |         var cb = after(2, function (err, res, line) {
> 1115 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1116 |           assert.strictEqual(line, 'LOCAL\\tobi ""GET /"" 200')
  1117 |           done()
  1118 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1134, 'column': 10, 'index': 31637}","  1132 |       it('should match expectations', function (done) {
  1133 |         var cb = after(2, function (err, res, line) {
> 1134 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1135 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
  1136 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')
  1137 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1156, 'column': 10, 'index': 32426}","  1154 |       it('should match expectations', function (done) {
  1155 |         var cb = after(2, function (err, res, line) {
> 1156 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1157 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
  1158 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 -')
  1159 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1176, 'column': 10, 'index': 33101}","  1174 |       it('should match expectations', function (done) {
  1175 |         var cb = after(2, function (err, res, line) {
> 1176 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1177 |           var masked = line.replace(/\w+, \d+ \w+ \d+ \d+:\d+:\d+ \w+/, '_timestamp_')
  1178 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')
  1179 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1198, 'column': 10, 'index': 33869}","  1196 |       it('should not color 1xx', function (done) {
  1197 |         var cb = after(2, function (err, res, line) {
> 1198 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1199 |           assert.strictEqual(line.substr(0, 36), '_color_0_GET / _color_0_102_color_0_')
  1200 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1201 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1216, 'column': 12, 'index': 34433}","  1214 |           .get('/')
  1215 |           .expect(102, function (err, res) {
> 1216 |             if (err && err.code === 'ECONNRESET') {
       |            ^ Conditional Test Logic
  1217 |               // finishing response with 1xx is invalid http
  1218 |               // but node.js server lets the server do this, so
  1219 |               // morgan needs to test in this condition even if"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1229, 'column': 10, 'index': 34915}","  1227 |       it('should color 2xx green', function (done) {
  1228 |         var cb = after(2, function (err, res, line) {
> 1229 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1230 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_32_200_color_0_')
  1231 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1232 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1251, 'column': 10, 'index': 35576}","  1249 |       it('should color 3xx cyan', function (done) {
  1250 |         var cb = after(2, function (err, res, line) {
> 1251 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1252 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_36_300_color_0_')
  1253 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1254 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1273, 'column': 10, 'index': 36238}","  1271 |       it('should color 4xx yelow', function (done) {
  1272 |         var cb = after(2, function (err, res, line) {
> 1273 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1274 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_33_400_color_0_')
  1275 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1276 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1295, 'column': 10, 'index': 36898}","  1293 |       it('should color 5xx red', function (done) {
  1294 |         var cb = after(2, function (err, res, line) {
> 1295 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1296 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_31_500_color_0_')
  1297 |           assert.strictEqual(line.substr(-9), '_color_0_')
  1298 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1318, 'column': 12, 'index': 37646}","  1316 |         it('should not have color or response values', function (done) {
  1317 |           var cb = after(2, function (err, res, line) {
> 1318 |             if (err) return done(err)
       |            ^ Conditional Test Logic
  1319 |             assert.strictEqual(line, '_color_0_GET / _color_0_-_color_0_ - ms - -_color_0_')
  1320 |             done()
  1321 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1342, 'column': 10, 'index': 38291}","  1340 |       it('should match expectations', function (done) {
  1341 |         var cb = after(2, function (err, res, line) {
> 1342 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1343 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
  1344 |           assert.strictEqual(masked, res.text + ' tj GET / HTTP/1.1 200 - - _timer_')
  1345 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1362, 'column': 10, 'index': 38919}","  1360 |       it('should match expectations', function (done) {
  1361 |         var cb = after(2, function (err, res, line) {
> 1362 |           if (err) return done(err)
       |          ^ Conditional Test Logic
  1363 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
  1364 |           assert.strictEqual(masked, 'GET / 200 - - _timer_')
  1365 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1382, 'column': 8, 'index': 39490}","  1380 |     it('should flush log periodically', function (done) {
  1381 |       var cb = after(2, function (err, res, log) {
> 1382 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1383 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1384 |         assert.ok(Date.now() - time >= 1000)
  1385 |         assert.ok(Date.now() - time <= 1100)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1401, 'column': 10, 'index': 39999}","  1399 |         .get('/first')
  1400 |         .expect(200, function (err) {
> 1401 |           if (err) return cb(err)
       |          ^ Conditional Test Logic
  1402 |           request(server)
  1403 |             .get('/second')
  1404 |             .expect(200, cb)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1410, 'column': 8, 'index': 40242}","  1408 |     it('should accept custom interval', function (done) {
  1409 |       var cb = after(2, function (err, res, log) {
> 1410 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1411 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1412 |         assert.ok(Date.now() - time >= 200)
  1413 |         assert.ok(Date.now() - time <= 300)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1429, 'column': 10, 'index': 40748}","  1427 |         .get('/first')
  1428 |         .expect(200, function (err) {
> 1429 |           if (err) return cb(err)
       |          ^ Conditional Test Logic
  1430 |           request(server)
  1431 |             .get('/second')
  1432 |             .expect(200, cb)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1440, 'column': 8, 'index': 41048}","  1438 |     it('should not have value for :res', function (done) {
  1439 |       var cb = after(2, function (err, res, line) {
> 1440 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1441 |         assert.strictEqual(line, 'GET / -')
  1442 |         done()
  1443 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1461, 'column': 8, 'index': 41559}","  1459 |     it('should not have value for :response-time', function (done) {
  1460 |       var cb = after(2, function (err, res, line) {
> 1461 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1462 |         assert.strictEqual(line, 'GET / -')
  1463 |         done()
  1464 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1482, 'column': 8, 'index': 42065}","  1480 |     it('should not have value for :status', function (done) {
  1481 |       var cb = after(2, function (err, res, line) {
> 1482 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1483 |         assert.strictEqual(line, 'GET / -')
  1484 |         done()
  1485 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1504, 'column': 8, 'index': 42586}","  1502 |       var lineLogged = false
  1503 |       var cb = after(2, function (err, res, line) {
> 1504 |         if (err) return done(err)
       |        ^ Conditional Test Logic
  1505 |         assert.strictEqual(line, 'GET / -')
  1506 |         done()
  1507 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1592, 'column': 4, 'index': 44954}","  1590 |     args[2] = args[2] || arg2
  1591 |
> 1592 |     if (count === i) {
       |    ^ Conditional Test Logic
  1593 |       callback.apply(null, args)
  1594 |     }
  1595 |   }"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1614, 'column': 4, 'index': 45444}","  1612 |   return function onRequest (req, res) {
  1613 |     // prior alterations
> 1614 |     if (fn1) {
       |    ^ Conditional Test Logic
  1615 |       fn1(req, res)
  1616 |     }
  1617 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Conditional Test Logic,"{'line': 1621, 'column': 8, 'index': 45615}","  1619 |       // allow req, res alterations
  1620 |       middle(req, res, function onDone () {
> 1621 |         if (err) {
       |        ^ Conditional Test Logic
  1622 |           res.statusCode = 500
  1623 |           res.end(err.message)
  1624 |         }"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Exception Handling,"{'line': 1053, 'column': 10, 'index': 29318}","  1051 |       it('should not log for undefined return', function (done) {
  1052 |         var stream = createLineStream(function () {
> 1053 |           throw new Error('should not log line')
       |          ^ Exception Handling
  1054 |         })
  1055 |
  1056 |         function format (tokens, req, res) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Exception Handling,"{'line': 1067, 'column': 10, 'index': 29692}","  1065 |       it('should not log for null return', function (done) {
  1066 |         var stream = createLineStream(function () {
> 1067 |           throw new Error('should not log line')
       |          ^ Exception Handling
  1068 |         })
  1069 |
  1070 |         function format (tokens, req, res) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Exception Handling,"{'line': 1528, 'column': 8, 'index': 43230}","  1526 |     it('should be able to skip based on request', function (done) {
  1527 |       var stream = createLineStream(function () {
> 1528 |         throw new Error('should not log line')
       |        ^ Exception Handling
  1529 |       })
  1530 |
  1531 |       function skip (req) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Exception Handling,"{'line': 1543, 'column': 8, 'index': 43672}","  1541 |     it('should be able to skip based on response', function (done) {
  1542 |       var stream = createLineStream(function () {
> 1543 |         throw new Error('should not log line')
       |        ^ Exception Handling
  1544 |       })
  1545 |
  1546 |       function skip (req, res) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 16, 'column': 6, 'index': 407}","  14 |   describe('arguments', function () {
  15 |     it('should use default format', function (done) {
> 16 |       var cb = after(2, function (err, res, line) {
     |      ^ Global Variable
  17 |         if (err) return done(err)
  18 |         assert(res.text.length > 0)
  19 |         assert.strictEqual(line.substr(0, res.text.length), res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 23, 'column': 6, 'index': 624}","  21 |       })
  22 |
> 23 |       var stream = createLineStream(function (line) {
     |      ^ Global Variable
  24 |         cb(null, null, line)
  25 |       })
  26 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 34, 'column': 8, 'index': 932}","  32 |     describe('format', function () {
  33 |       it('should accept format as format name', function (done) {
> 34 |         var cb = after(2, function (err, res, line) {
     |        ^ Global Variable
  35 |           if (err) return done(err)
  36 |           assert(/^GET \/ 200 - - \d+\.\d{3} ms$/.test(line))
  37 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 40, 'column': 8, 'index': 1113}","  38 |         })
  39 |
> 40 |         var stream = createLineStream(function (line) {
     |        ^ Global Variable
  41 |           cb(null, null, line)
  42 |         })
  43 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 50, 'column': 8, 'index': 1395}","  48 |
  49 |       it('should accept format as format string', function (done) {
> 50 |         var cb = after(2, function (err, res, line) {
     |        ^ Global Variable
  51 |           if (err) return done(err)
  52 |           assert.strictEqual(line, 'GET /')
  53 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 56, 'column': 8, 'index': 1558}","  54 |         })
  55 |
> 56 |         var stream = createLineStream(function (line) {
     |        ^ Global Variable
  57 |           cb(null, null, line)
  58 |         })
  59 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 66, 'column': 8, 'index': 1843}","  64 |
  65 |       it('should accept format as function', function (done) {
> 66 |         var cb = after(2, function (err, res, line) {
     |        ^ Global Variable
  67 |           if (err) return done(err)
  68 |           assert.strictEqual(line, 'GET / 200')
  69 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 72, 'column': 8, 'index': 2010}","  70 |         })
  71 |
> 72 |         var stream = createLineStream(function (line) {
     |        ^ Global Variable
  73 |           cb(null, null, line)
  74 |         })
  75 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 91, 'column': 10, 'index': 2589}","  89 |       describe('back-compat', function () {
  90 |         it('should accept options object', function (done) {
> 91 |           var cb = after(2, function (err, res, line) {
     |          ^ Global Variable
  92 |             if (err) return done(err)
  93 |             assert(res.text.length > 0)
  94 |             assert.strictEqual(line.substr(0, res.text.length), res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 98, 'column': 10, 'index': 2830}","   96 |           })
   97 |
>  98 |           var stream = createLineStream(function (line) {
      |          ^ Global Variable
   99 |             cb(null, null, line)
  100 |           })
  101 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 108, 'column': 10, 'index': 3130}","  106 |
  107 |         it('should accept format in options for back-compat', function (done) {
> 108 |           var cb = after(2, function (err, res, line) {
      |          ^ Global Variable
  109 |             if (err) return done(err)
  110 |             assert.strictEqual(line, 'GET /')
  111 |             done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 114, 'column': 10, 'index': 3303}","  112 |           })
  113 |
> 114 |           var stream = createLineStream(function (line) {
      |          ^ Global Variable
  115 |             cb(null, null, line)
  116 |           })
  117 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 124, 'column': 10, 'index': 3636}","  122 |
  123 |         it('should accept format function in options for back-compat', function (done) {
> 124 |           var cb = after(2, function (err, res, line) {
      |          ^ Global Variable
  125 |             if (err) return done(err)
  126 |             assert.strictEqual(line, 'apple')
  127 |             done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 130, 'column': 10, 'index': 3809}","  128 |           })
  129 |
> 130 |           var stream = createLineStream(function (line) {
      |          ^ Global Variable
  131 |             cb(null, null, line)
  132 |           })
  133 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 157, 'column': 8, 'index': 4439}","  155 |
  156 |       it('should default to process.stdout', function (done) {
> 157 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  158 |           if (err) return done(err)
  159 |           assert(res.text.length > 0)
  160 |           assert.strictEqual(line.substr(0, res.text.length), res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 164, 'column': 8, 'index': 4668}","  162 |         })
  163 |
> 164 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  165 |           cb(null, null, line)
  166 |         })
  167 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 178, 'column': 8, 'index': 5040}","  176 |
  177 |       it('should set stream to write logs to', function (done) {
> 178 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  179 |           if (err) return done(err)
  180 |           assert(res.text.length > 0)
  181 |           assert.strictEqual(line.substr(0, res.text.length), res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 185, 'column': 8, 'index': 5269}","  183 |         })
  184 |
> 185 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  186 |           cb(null, null, line)
  187 |         })
  188 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 199, 'column': 8, 'index': 5650}","  197 |     describe(':date', function () {
  198 |       it('should get current date in ""web"" format by default', function (done) {
> 199 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  200 |           if (err) return done(err)
  201 |           assert.ok(/^\w{3}, \d{2} \w{3} \d{4} \d{2}:\d{2}:\d{2} GMT$/.test(line))
  202 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 205, 'column': 8, 'index': 5852}","  203 |         })
  204 |
> 205 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  206 |           cb(null, null, line)
  207 |         })
  208 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 215, 'column': 8, 'index': 6137}","  213 |
  214 |       it('should get current date in ""clf"" format', function (done) {
> 215 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  216 |           if (err) return done(err)
  217 |           assert.ok(/^\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000$/.test(line))
  218 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 221, 'column': 8, 'index': 6337}","  219 |         })
  220 |
> 221 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  222 |           cb(null, null, line)
  223 |         })
  224 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 231, 'column': 8, 'index': 6627}","  229 |
  230 |       it('should get current date in ""iso"" format', function (done) {
> 231 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  232 |           if (err) return done(err)
  233 |           assert.ok(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(line))
  234 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 237, 'column': 8, 'index': 6829}","  235 |         })
  236 |
> 237 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  238 |           cb(null, null, line)
  239 |         })
  240 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 247, 'column': 8, 'index': 7119}","  245 |
  246 |       it('should get current date in ""web"" format', function (done) {
> 247 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  248 |           if (err) return done(err)
  249 |           assert.ok(/^\w{3}, \d{2} \w{3} \d{4} \d{2}:\d{2}:\d{2} GMT$/.test(line))
  250 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 253, 'column': 8, 'index': 7321}","  251 |         })
  252 |
> 253 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  254 |           cb(null, null, line)
  255 |         })
  256 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 263, 'column': 8, 'index': 7606}","  261 |
  262 |       it('should be blank for unknown format', function (done) {
> 263 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  264 |           if (err) return done(err)
  265 |           assert.strictEqual(line, '-')
  266 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 269, 'column': 8, 'index': 7765}","  267 |         })
  268 |
> 269 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  270 |           cb(null, null, line)
  271 |         })
  272 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 281, 'column': 8, 'index': 8089}","  279 |     describe(':http-version', function () {
  280 |       it('should be 1.0 or 1.1', function (done) {
> 281 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  282 |           if (err) return done(err)
  283 |           assert.ok(/^1\.[01]$/.test(line))
  284 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 287, 'column': 8, 'index': 8252}","  285 |         })
  286 |
> 287 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  288 |           cb(null, null, line)
  289 |         })
  290 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 299, 'column': 8, 'index': 8577}","  297 |     describe(':req', function () {
  298 |       it('should get request properties', function (done) {
> 299 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  300 |           if (err) return done(err)
  301 |           assert.strictEqual(line, 'me')
  302 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 305, 'column': 8, 'index': 8737}","  303 |         })
  304 |
> 305 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  306 |           cb(null, null, line)
  307 |         })
  308 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 316, 'column': 8, 'index': 9077}","  314 |
  315 |       it('should display all values of array headers', function (done) {
> 316 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  317 |           if (err) return done(err)
  318 |           assert.strictEqual(line, 'foo=bar, fizz=buzz')
  319 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 322, 'column': 8, 'index': 9253}","  320 |         })
  321 |
> 322 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  323 |           cb(null, null, line)
  324 |         })
  325 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 335, 'column': 8, 'index': 9637}","  333 |     describe(':res', function () {
  334 |       it('should get response properties', function (done) {
> 335 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  336 |           if (err) return done(err)
  337 |           assert.strictEqual(line, 'true')
  338 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 341, 'column': 8, 'index': 9799}","  339 |         })
  340 |
> 341 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  342 |           cb(null, null, line)
  343 |         })
  344 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 351, 'column': 8, 'index': 10094}","  349 |
  350 |       it('should display all values of array headers', function (done) {
> 351 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  352 |           if (err) return done(err)
  353 |           assert.strictEqual(line, 'foo, bar')
  354 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 357, 'column': 8, 'index': 10260}","  355 |         })
  356 |
> 357 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  358 |           cb(null, null, line)
  359 |         })
  360 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 361, 'column': 8, 'index': 10359}","  359 |         })
  360 |
> 361 |         var server = createServer(':res[x-keys]', { stream: stream }, function (req, res, next) {
      |        ^ Global Variable
  362 |           res.setHeader('X-Keys', ['foo', 'bar'])
  363 |           next()
  364 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 375, 'column': 8, 'index': 10763}","  373 |     describe(':remote-addr', function () {
  374 |       it('should get remote address', function (done) {
> 375 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  376 |           if (err) return done(err)
  377 |           assert.ok(res.text.length > 0)
  378 |           assert.strictEqual(line, res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 382, 'column': 8, 'index': 10968}","  380 |         })
  381 |
> 382 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  383 |           cb(null, null, line)
  384 |         })
  385 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 392, 'column': 8, 'index': 11247}","  390 |
  391 |       it('should use req.ip if there', function (done) {
> 392 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  393 |           if (err) return done(err)
  394 |           assert.strictEqual(line, '10.0.0.1')
  395 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 398, 'column': 8, 'index': 11413}","  396 |         })
  397 |
> 398 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  399 |           cb(null, null, line)
  400 |         })
  401 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 402, 'column': 8, 'index': 11512}","  400 |         })
  401 |
> 402 |         var server = createServer(':remote-addr', { stream: stream }, null, function (req) {
      |        ^ Global Variable
  403 |           req.ip = '10.0.0.1'
  404 |         })
  405 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 412, 'column': 8, 'index': 11786}","  410 |
  411 |       it('should work on https server', function (done) {
> 412 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  413 |           if (err) return done(err)
  414 |           assert.ok(res.text.length > 0)
  415 |           assert.strictEqual(line, res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 419, 'column': 8, 'index': 11991}","  417 |         })
  418 |
> 419 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  420 |           cb(null, null, line)
  421 |         })
  422 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 423, 'column': 8, 'index': 12090}","  421 |         })
  422 |
> 423 |         var server = createSecureServer(':remote-addr', { stream: stream })
      |        ^ Global Variable
  424 |
  425 |         request(server)
  426 |           .get('/')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 432, 'column': 8, 'index': 12340}","  430 |
  431 |       it('should work when connection: close', function (done) {
> 432 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  433 |           if (err) return done(err)
  434 |           assert.ok(res.text.length > 0)
  435 |           assert.strictEqual(line, res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 439, 'column': 8, 'index': 12545}","  437 |         })
  438 |
> 439 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  440 |           cb(null, null, line)
  441 |         })
  442 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 450, 'column': 8, 'index': 12875}","  448 |
  449 |       it('should work when connection: keep-alive', function (done) {
> 450 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  451 |           if (err) return done(err)
  452 |           assert.ok(res.text.length > 0)
  453 |           assert.strictEqual(line, res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 459, 'column': 8, 'index': 13132}","  457 |         })
  458 |
> 459 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  460 |           cb(null, null, line)
  461 |         })
  462 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 463, 'column': 8, 'index': 13231}","  461 |         })
  462 |
> 463 |         var server = createServer(':remote-addr', { stream: stream }, function (req, res, next) {
      |        ^ Global Variable
  464 |           delete req._remoteAddress
  465 |           next()
  466 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 475, 'column': 8, 'index': 13593}","  473 |
  474 |       it('should work when req.ip is a getter', function (done) {
> 475 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  476 |           if (err) return done(err)
  477 |           assert.strictEqual(line, '10.0.0.1')
  478 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 481, 'column': 8, 'index': 13759}","  479 |         })
  480 |
> 481 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  482 |           cb(null, null, line)
  483 |         })
  484 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 485, 'column': 8, 'index': 13858}","  483 |         })
  484 |
> 485 |         var server = createServer(':remote-addr', { stream: stream }, null, function (req) {
      |        ^ Global Variable
  486 |           Object.defineProperty(req, 'ip', {
  487 |             get: function () { return req.connection.remoteAddress ? '10.0.0.1' : undefined }
  488 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 498, 'column': 8, 'index': 14306}","  496 |
  497 |       it('should not fail if req.connection missing', function (done) {
> 498 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  499 |           if (err) return done(err)
  500 |           assert.ok(res.text.length > 0)
  501 |           assert.strictEqual(line, res.text)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 507, 'column': 8, 'index': 14563}","  505 |         })
  506 |
> 507 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  508 |           cb(null, null, line)
  509 |         })
  510 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 511, 'column': 8, 'index': 14662}","  509 |         })
  510 |
> 511 |         var server = createServer(':remote-addr', { stream: stream }, null, function (req) {
      |        ^ Global Variable
  512 |           delete req.connection
  513 |         })
  514 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 524, 'column': 8, 'index': 15044}","  522 |     describe(':remote-user', function () {
  523 |       it('should be empty if none present', function (done) {
> 524 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  525 |           if (err) return done(err)
  526 |           assert.strictEqual(line, '-')
  527 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 530, 'column': 8, 'index': 15203}","  528 |         })
  529 |
> 530 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  531 |           cb(null, null, line)
  532 |         })
  533 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 540, 'column': 8, 'index': 15490}","  538 |
  539 |       it('should support Basic authorization', function (done) {
> 540 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  541 |           if (err) return done(err)
  542 |           assert.strictEqual(line, 'tj')
  543 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 546, 'column': 8, 'index': 15650}","  544 |         })
  545 |
> 546 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  547 |           cb(null, null, line)
  548 |         })
  549 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 557, 'column': 8, 'index': 15999}","  555 |
  556 |       it('should be empty for empty Basic authorization user', function (done) {
> 557 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  558 |           if (err) return done(err)
  559 |           assert.strictEqual(line, '-')
  560 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 563, 'column': 8, 'index': 16158}","  561 |         })
  562 |
> 563 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  564 |           cb(null, null, line)
  565 |         })
  566 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 576, 'column': 8, 'index': 16534}","  574 |     describe(':response-time', function () {
  575 |       it('should be in milliseconds', function (done) {
> 576 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  577 |           if (err) return done(err)
  578 |           var end = Date.now()
  579 |           var ms = parseFloat(line)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 578, 'column': 10, 'index': 16626}","  576 |         var cb = after(2, function (err, res, line) {
  577 |           if (err) return done(err)
> 578 |           var end = Date.now()
      |          ^ Global Variable
  579 |           var ms = parseFloat(line)
  580 |           assert(ms > 0)
  581 |           assert(ms < end - start + 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 579, 'column': 10, 'index': 16657}","  577 |           if (err) return done(err)
  578 |           var end = Date.now()
> 579 |           var ms = parseFloat(line)
      |          ^ Global Variable
  580 |           assert(ms > 0)
  581 |           assert(ms < end - start + 1)
  582 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 585, 'column': 8, 'index': 16784}","  583 |         })
  584 |
> 585 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  586 |           cb(null, null, line)
  587 |         })
  588 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 589, 'column': 8, 'index': 16883}","  587 |         })
  588 |
> 589 |         var start = Date.now()
      |        ^ Global Variable
  590 |
  591 |         request(createServer(':response-time', { stream: stream }))
  592 |           .get('/')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 597, 'column': 8, 'index': 17106}","  595 |
  596 |       it('should have three digits by default', function (done) {
> 597 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  598 |           if (err) return done(err)
  599 |           assert.ok(/^[0-9]+\.[0-9]{3}$/.test(line))
  600 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 603, 'column': 8, 'index': 17278}","  601 |         })
  602 |
> 603 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  604 |           cb(null, null, line)
  605 |         })
  606 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 613, 'column': 8, 'index': 17574}","  611 |
  612 |       it('should have five digits with argument ""5""', function (done) {
> 613 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  614 |           if (err) return done(err)
  615 |           assert.ok(/^[0-9]+\.[0-9]{5}$/.test(line))
  616 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 619, 'column': 8, 'index': 17746}","  617 |         })
  618 |
> 619 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  620 |           cb(null, null, line)
  621 |         })
  622 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 629, 'column': 8, 'index': 18043}","  627 |
  628 |       it('should have no digits with argument ""0""', function (done) {
> 629 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  630 |           if (err) return done(err)
  631 |           assert.ok(/^[0-9]+$/.test(line))
  632 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 635, 'column': 8, 'index': 18205}","  633 |         })
  634 |
> 635 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  636 |           cb(null, null, line)
  637 |         })
  638 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 645, 'column': 8, 'index': 18501}","  643 |
  644 |       it('should not include response write time', function (done) {
> 645 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  646 |           if (err) return done(err)
  647 |           var end = Date.now()
  648 |           var ms = parseFloat(line)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 647, 'column': 10, 'index': 18593}","  645 |         var cb = after(2, function (err, res, line) {
  646 |           if (err) return done(err)
> 647 |           var end = Date.now()
      |          ^ Global Variable
  648 |           var ms = parseFloat(line)
  649 |           assert(ms > 0)
  650 |           assert(ms < end - start + 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 648, 'column': 10, 'index': 18624}","  646 |           if (err) return done(err)
  647 |           var end = Date.now()
> 648 |           var ms = parseFloat(line)
      |          ^ Global Variable
  649 |           assert(ms > 0)
  650 |           assert(ms < end - start + 1)
  651 |           assert(ms < write - start + 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 655, 'column': 8, 'index': 18792}","  653 |         })
  654 |
> 655 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  656 |           cb(null, null, line)
  657 |         })
  658 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 659, 'column': 8, 'index': 18891}","  657 |         })
  658 |
> 659 |         var server = createServer(':response-time', { stream: stream }, function (req, res) {
      |        ^ Global Variable
  660 |           res.write('hello, ')
  661 |           write = Date.now()
  662 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 668, 'column': 8, 'index': 19140}","  666 |         })
  667 |
> 668 |         var start = Date.now()
      |        ^ Global Variable
  669 |         var write = null
  670 |
  671 |         request(server)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 669, 'column': 8, 'index': 19171}","  667 |
  668 |         var start = Date.now()
> 669 |         var write = null
      |        ^ Global Variable
  670 |
  671 |         request(server)
  672 |           .get('/')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 677, 'column': 8, 'index': 19348}","  675 |
  676 |       it('should be empty without hidden property', function (done) {
> 677 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  678 |           if (err) return done(err)
  679 |           assert.strictEqual(line, '-')
  680 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 683, 'column': 8, 'index': 19507}","  681 |         })
  682 |
> 683 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  684 |           cb(null, null, line)
  685 |         })
  686 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 687, 'column': 8, 'index': 19606}","  685 |         })
  686 |
> 687 |         var server = createServer(':response-time', { stream: stream }, function (req, res, next) {
      |        ^ Global Variable
  688 |           delete req._startAt
  689 |           next()
  690 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 698, 'column': 8, 'index': 19908}","  696 |
  697 |       it('should be empty before response', function (done) {
> 698 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  699 |           if (err) return done(err)
  700 |           assert.strictEqual(line, '-')
  701 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 704, 'column': 8, 'index': 20067}","  702 |         })
  703 |
> 704 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  705 |           cb(null, null, line)
  706 |         })
  707 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 708, 'column': 8, 'index': 20166}","  706 |         })
  707 |
> 708 |         var server = createServer(':response-time', {
      |        ^ Global Variable
  709 |           immediate: true,
  710 |           stream: stream
  711 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 719, 'column': 8, 'index': 20449}","  717 |
  718 |       it('should be empty if morgan invoked after response sent', function (done) {
> 719 |         var cb = after(3, function (err, res, line) {
      |        ^ Global Variable
  720 |           if (err) return done(err)
  721 |           assert.strictEqual(line, '-')
  722 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 725, 'column': 8, 'index': 20608}","  723 |         })
  724 |
> 725 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  726 |           cb(null, null, line)
  727 |         })
  728 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 729, 'column': 8, 'index': 20707}","  727 |         })
  728 |
> 729 |         var logger = morgan(':response-time', {
      |        ^ Global Variable
  730 |           immediate: true,
  731 |           stream: stream
  732 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 734, 'column': 8, 'index': 20819}","  732 |         })
  733 |
> 734 |         var server = http.createServer(function (req, res) {
      |        ^ Global Variable
  735 |           setTimeout(function () {
  736 |             logger(req, res, cb)
  737 |           }, 10)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 750, 'column': 8, 'index': 21181}","  748 |     describe(':status', function () {
  749 |       it('should get response status', function (done) {
> 750 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  751 |           if (err) return done(err)
  752 |           assert.strictEqual(line, String(res.statusCode))
  753 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 756, 'column': 8, 'index': 21359}","  754 |         })
  755 |
> 756 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  757 |           cb(null, null, line)
  758 |         })
  759 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 766, 'column': 8, 'index': 21644}","  764 |
  765 |       it('should not exist before response sent', function (done) {
> 766 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  767 |           if (err) return done(err)
  768 |           assert.strictEqual(line, '-')
  769 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 772, 'column': 8, 'index': 21803}","  770 |         })
  771 |
> 772 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  773 |           cb(null, null, line)
  774 |         })
  775 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 776, 'column': 8, 'index': 21902}","  774 |         })
  775 |
> 776 |         var server = createServer(':status', {
      |        ^ Global Variable
  777 |           immediate: true,
  778 |           stream: stream
  779 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 787, 'column': 8, 'index': 22161}","  785 |
  786 |       it('should not exist for aborted request', function (done) {
> 787 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  788 |           assert.strictEqual(line, '-')
  789 |           server.close(done)
  790 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 792, 'column': 8, 'index': 22298}","  790 |         })
  791 |
> 792 |         var server = createServer(':status', { stream: stream }, function () {
      |        ^ Global Variable
  793 |           test.abort()
  794 |         })
  795 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 796, 'column': 8, 'index': 22412}","  794 |         })
  795 |
> 796 |         var test = request(server).post('/')
      |        ^ Global Variable
  797 |         test.write('0')
  798 |       })
  799 |     })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 803, 'column': 8, 'index': 22596}","  801 |     describe(':total-time', function () {
  802 |       it('should be in milliseconds', function (done) {
> 803 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  804 |           if (err) return done(err)
  805 |           var end = Date.now()
  806 |           var ms = parseFloat(line)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 805, 'column': 10, 'index': 22688}","  803 |         var cb = after(2, function (err, res, line) {
  804 |           if (err) return done(err)
> 805 |           var end = Date.now()
      |          ^ Global Variable
  806 |           var ms = parseFloat(line)
  807 |           assert(ms > 0)
  808 |           assert(ms < end - start + 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 806, 'column': 10, 'index': 22719}","  804 |           if (err) return done(err)
  805 |           var end = Date.now()
> 806 |           var ms = parseFloat(line)
      |          ^ Global Variable
  807 |           assert(ms > 0)
  808 |           assert(ms < end - start + 1)
  809 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 812, 'column': 8, 'index': 22846}","  810 |         })
  811 |
> 812 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  813 |           cb(null, null, line)
  814 |         })
  815 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 816, 'column': 8, 'index': 22945}","  814 |         })
  815 |
> 816 |         var start = Date.now()
      |        ^ Global Variable
  817 |
  818 |         request(createServer(':total-time', { stream: stream }))
  819 |           .get('/')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 824, 'column': 8, 'index': 23165}","  822 |
  823 |       it('should have three digits by default', function (done) {
> 824 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  825 |           if (err) return done(err)
  826 |           assert.ok(/^[0-9]+\.[0-9]{3}$/.test(line))
  827 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 830, 'column': 8, 'index': 23337}","  828 |         })
  829 |
> 830 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  831 |           cb(null, null, line)
  832 |         })
  833 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 840, 'column': 8, 'index': 23630}","  838 |
  839 |       it('should have five digits with argument ""5""', function (done) {
> 840 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  841 |           if (err) return done(err)
  842 |           assert.ok(/^[0-9]+\.[0-9]{5}$/.test(line))
  843 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 846, 'column': 8, 'index': 23802}","  844 |         })
  845 |
> 846 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  847 |           cb(null, null, line)
  848 |         })
  849 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 856, 'column': 8, 'index': 24096}","  854 |
  855 |       it('should have no digits with argument ""0""', function (done) {
> 856 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  857 |           if (err) return done(err)
  858 |           assert.ok(/^[0-9]+$/.test(line))
  859 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 862, 'column': 8, 'index': 24258}","  860 |         })
  861 |
> 862 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  863 |           cb(null, null, line)
  864 |         })
  865 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 872, 'column': 8, 'index': 24547}","  870 |
  871 |       it('should include response write time', function (done) {
> 872 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  873 |           if (err) return done(err)
  874 |           var end = Date.now()
  875 |           var ms = parseFloat(line)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 874, 'column': 10, 'index': 24639}","  872 |         var cb = after(2, function (err, res, line) {
  873 |           if (err) return done(err)
> 874 |           var end = Date.now()
      |          ^ Global Variable
  875 |           var ms = parseFloat(line)
  876 |           assert(ms > 0)
  877 |           assert(ms > write - start - 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 875, 'column': 10, 'index': 24670}","  873 |           if (err) return done(err)
  874 |           var end = Date.now()
> 875 |           var ms = parseFloat(line)
      |          ^ Global Variable
  876 |           assert(ms > 0)
  877 |           assert(ms > write - start - 1)
  878 |           assert(ms < end - start + 1)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 882, 'column': 8, 'index': 24838}","  880 |         })
  881 |
> 882 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  883 |           cb(null, null, line)
  884 |         })
  885 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 886, 'column': 8, 'index': 24937}","  884 |         })
  885 |
> 886 |         var server = createServer(':total-time', { stream: stream }, function (req, res) {
      |        ^ Global Variable
  887 |           res.write('hello, ')
  888 |           write = Date.now()
  889 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 895, 'column': 8, 'index': 25183}","  893 |         })
  894 |
> 895 |         var start = Date.now()
      |        ^ Global Variable
  896 |         var write = null
  897 |
  898 |         request(server)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 896, 'column': 8, 'index': 25214}","  894 |
  895 |         var start = Date.now()
> 896 |         var write = null
      |        ^ Global Variable
  897 |
  898 |         request(server)
  899 |           .get('/')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 904, 'column': 8, 'index': 25391}","  902 |
  903 |       it('should be empty without hidden property', function (done) {
> 904 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  905 |           if (err) return done(err)
  906 |           assert.strictEqual(line, '-')
  907 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 910, 'column': 8, 'index': 25550}","  908 |         })
  909 |
> 910 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  911 |           cb(null, null, line)
  912 |         })
  913 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 914, 'column': 8, 'index': 25649}","  912 |         })
  913 |
> 914 |         var server = createServer(':total-time', { stream: stream }, function (req, res, next) {
      |        ^ Global Variable
  915 |           delete req._startAt
  916 |           next()
  917 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 925, 'column': 8, 'index': 25948}","  923 |
  924 |       it('should be empty before response', function (done) {
> 925 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  926 |           if (err) return done(err)
  927 |           assert.strictEqual(line, '-')
  928 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 931, 'column': 8, 'index': 26107}","  929 |         })
  930 |
> 931 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  932 |           cb(null, null, line)
  933 |         })
  934 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 935, 'column': 8, 'index': 26206}","  933 |         })
  934 |
> 935 |         var server = createServer(':total-time', {
      |        ^ Global Variable
  936 |           immediate: true,
  937 |           stream: stream
  938 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 946, 'column': 8, 'index': 26486}","  944 |
  945 |       it('should be empty if morgan invoked after response sent', function (done) {
> 946 |         var cb = after(3, function (err, res, line) {
      |        ^ Global Variable
  947 |           if (err) return done(err)
  948 |           assert.strictEqual(line, '-')
  949 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 952, 'column': 8, 'index': 26645}","  950 |         })
  951 |
> 952 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  953 |           cb(null, null, line)
  954 |         })
  955 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 956, 'column': 8, 'index': 26744}","  954 |         })
  955 |
> 956 |         var logger = morgan(':total-time', {
      |        ^ Global Variable
  957 |           immediate: true,
  958 |           stream: stream
  959 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 961, 'column': 8, 'index': 26853}","  959 |         })
  960 |
> 961 |         var server = http.createServer(function (req, res) {
      |        ^ Global Variable
  962 |           setTimeout(function () {
  963 |             logger(req, res, cb)
  964 |           }, 10)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 977, 'column': 8, 'index': 27208}","  975 |     describe(':url', function () {
  976 |       it('should get request URL', function (done) {
> 977 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  978 |           if (err) return done(err)
  979 |           assert.strictEqual(line, '/foo')
  980 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 983, 'column': 8, 'index': 27370}","  981 |         })
  982 |
> 983 |         var stream = createLineStream(function (line) {
      |        ^ Global Variable
  984 |           cb(null, null, line)
  985 |         })
  986 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 993, 'column': 8, 'index': 27654}","  991 |
  992 |       it('should use req.originalUrl if exists', function (done) {
> 993 |         var cb = after(2, function (err, res, line) {
      |        ^ Global Variable
  994 |           if (err) return done(err)
  995 |           assert.strictEqual(line, '/bar')
  996 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 999, 'column': 8, 'index': 27816}","   997 |         })
   998 |
>  999 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1000 |           cb(null, null, line)
  1001 |         })
  1002 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1003, 'column': 8, 'index': 27915}","  1001 |         })
  1002 |
> 1003 |         var server = createServer(':url', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1004 |           req.originalUrl = '/bar'
  1005 |           next()
  1006 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1014, 'column': 8, 'index': 28217}","  1012 |
  1013 |       it('should not exist for aborted request', function (done) {
> 1014 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1015 |           assert.strictEqual(line, '-')
  1016 |           server.close(done)
  1017 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1019, 'column': 8, 'index': 28354}","  1017 |         })
  1018 |
> 1019 |         var server = createServer(':status', { stream: stream }, function () {
       |        ^ Global Variable
  1020 |           test.abort()
  1021 |         })
  1022 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1023, 'column': 8, 'index': 28468}","  1021 |         })
  1022 |
> 1023 |         var test = request(server).post('/')
       |        ^ Global Variable
  1024 |         test.write('0')
  1025 |       })
  1026 |     })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1032, 'column': 8, 'index': 28696}","  1030 |     describe('a function', function () {
  1031 |       it('should log result of function', function (done) {
> 1032 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1033 |           if (err) return done(err)
  1034 |           assert.strictEqual(line, 'GET / 200')
  1035 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1038, 'column': 8, 'index': 28863}","  1036 |         })
  1037 |
> 1038 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1039 |           cb(null, null, line)
  1040 |         })
  1041 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1052, 'column': 8, 'index': 29264}","  1050 |
  1051 |       it('should not log for undefined return', function (done) {
> 1052 |         var stream = createLineStream(function () {
       |        ^ Global Variable
  1053 |           throw new Error('should not log line')
  1054 |         })
  1055 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1066, 'column': 8, 'index': 29638}","  1064 |
  1065 |       it('should not log for null return', function (done) {
> 1066 |         var stream = createLineStream(function () {
       |        ^ Global Variable
  1067 |           throw new Error('should not log line')
  1068 |         })
  1069 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1082, 'column': 8, 'index': 30070}","  1080 |     describe('a string', function () {
  1081 |       it('should accept format as format string of tokens', function (done) {
> 1082 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1083 |           if (err) return done(err)
  1084 |           assert.strictEqual(line, 'GET /')
  1085 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1088, 'column': 8, 'index': 30233}","  1086 |         })
  1087 |
> 1088 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1089 |           cb(null, null, line)
  1090 |         })
  1091 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1098, 'column': 8, 'index': 30522}","  1096 |
  1097 |       it('should accept text mixed with tokens', function (done) {
> 1098 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1099 |           if (err) return done(err)
  1100 |           assert.strictEqual(line, 'method=GET url=/')
  1101 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1104, 'column': 8, 'index': 30696}","  1102 |         })
  1103 |
> 1104 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1105 |           cb(null, null, line)
  1106 |         })
  1107 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1114, 'column': 8, 'index': 30992}","  1112 |
  1113 |       it('should accept special characters', function (done) {
> 1114 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1115 |           if (err) return done(err)
  1116 |           assert.strictEqual(line, 'LOCAL\\tobi ""GET /"" 200')
  1117 |           done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1120, 'column': 8, 'index': 31173}","  1118 |         })
  1119 |
> 1120 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1121 |           cb(null, null, line)
  1122 |         })
  1123 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1133, 'column': 8, 'index': 31581}","  1131 |     describe('combined', function () {
  1132 |       it('should match expectations', function (done) {
> 1133 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1134 |           if (err) return done(err)
  1135 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
  1136 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1135, 'column': 10, 'index': 31673}","  1133 |         var cb = after(2, function (err, res, line) {
  1134 |           if (err) return done(err)
> 1135 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
       |          ^ Global Variable
  1136 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')
  1137 |           done()
  1138 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1140, 'column': 8, 'index': 31921}","  1138 |         })
  1139 |
> 1140 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1141 |           cb(null, null, line)
  1142 |         })
  1143 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1155, 'column': 8, 'index': 32370}","  1153 |     describe('common', function () {
  1154 |       it('should match expectations', function (done) {
> 1155 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1156 |           if (err) return done(err)
  1157 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
  1158 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 -')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1157, 'column': 10, 'index': 32462}","  1155 |         var cb = after(2, function (err, res, line) {
  1156 |           if (err) return done(err)
> 1157 |           var masked = line.replace(/\d{2}\/\w{3}\/\d{4}:\d{2}:\d{2}:\d{2} \+0000/, '_timestamp_')
       |          ^ Global Variable
  1158 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 -')
  1159 |           done()
  1160 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1162, 'column': 8, 'index': 32682}","  1160 |         })
  1161 |
> 1162 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1163 |           cb(null, null, line)
  1164 |         })
  1165 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1175, 'column': 8, 'index': 33045}","  1173 |     describe('default', function () {
  1174 |       it('should match expectations', function (done) {
> 1175 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1176 |           if (err) return done(err)
  1177 |           var masked = line.replace(/\w+, \d+ \w+ \d+ \d+:\d+:\d+ \w+/, '_timestamp_')
  1178 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1177, 'column': 10, 'index': 33137}","  1175 |         var cb = after(2, function (err, res, line) {
  1176 |           if (err) return done(err)
> 1177 |           var masked = line.replace(/\w+, \d+ \w+ \d+ \d+:\d+:\d+ \w+/, '_timestamp_')
       |          ^ Global Variable
  1178 |           assert.strictEqual(masked, res.text + ' - tj [_timestamp_] ""GET / HTTP/1.1"" 200 - ""http://localhost/"" ""my-ua""')
  1179 |           done()
  1180 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1182, 'column': 8, 'index': 33373}","  1180 |         })
  1181 |
> 1182 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1183 |           cb(null, null, line)
  1184 |         })
  1185 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1197, 'column': 8, 'index': 33813}","  1195 |     describe('dev', function () {
  1196 |       it('should not color 1xx', function (done) {
> 1197 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1198 |           if (err) return done(err)
  1199 |           assert.strictEqual(line.substr(0, 36), '_color_0_GET / _color_0_102_color_0_')
  1200 |           assert.strictEqual(line.substr(-9), '_color_0_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1204, 'column': 8, 'index': 34080}","  1202 |         })
  1203 |
> 1204 |         var stream = createColorLineStream(function onLine (line) {
       |        ^ Global Variable
  1205 |           cb(null, null, line)
  1206 |         })
  1207 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1208, 'column': 8, 'index': 34191}","  1206 |         })
  1207 |
> 1208 |         var server = createServer('dev', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1209 |           res.statusCode = 102
  1210 |           next()
  1211 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1228, 'column': 8, 'index': 34859}","  1226 |
  1227 |       it('should color 2xx green', function (done) {
> 1228 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1229 |           if (err) return done(err)
  1230 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_32_200_color_0_')
  1231 |           assert.strictEqual(line.substr(-9), '_color_0_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1235, 'column': 8, 'index': 35127}","  1233 |         })
  1234 |
> 1235 |         var stream = createColorLineStream(function onLine (line) {
       |        ^ Global Variable
  1236 |           cb(null, null, line)
  1237 |         })
  1238 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1239, 'column': 8, 'index': 35238}","  1237 |         })
  1238 |
> 1239 |         var server = createServer('dev', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1240 |           res.statusCode = 200
  1241 |           next()
  1242 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1250, 'column': 8, 'index': 35520}","  1248 |
  1249 |       it('should color 3xx cyan', function (done) {
> 1250 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1251 |           if (err) return done(err)
  1252 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_36_300_color_0_')
  1253 |           assert.strictEqual(line.substr(-9), '_color_0_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1257, 'column': 8, 'index': 35788}","  1255 |         })
  1256 |
> 1257 |         var stream = createColorLineStream(function onLine (line) {
       |        ^ Global Variable
  1258 |           cb(null, null, line)
  1259 |         })
  1260 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1261, 'column': 8, 'index': 35899}","  1259 |         })
  1260 |
> 1261 |         var server = createServer('dev', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1262 |           res.statusCode = 300
  1263 |           next()
  1264 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1272, 'column': 8, 'index': 36182}","  1270 |
  1271 |       it('should color 4xx yelow', function (done) {
> 1272 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1273 |           if (err) return done(err)
  1274 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_33_400_color_0_')
  1275 |           assert.strictEqual(line.substr(-9), '_color_0_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1279, 'column': 8, 'index': 36450}","  1277 |         })
  1278 |
> 1279 |         var stream = createColorLineStream(function onLine (line) {
       |        ^ Global Variable
  1280 |           cb(null, null, line)
  1281 |         })
  1282 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1283, 'column': 8, 'index': 36561}","  1281 |         })
  1282 |
> 1283 |         var server = createServer('dev', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1284 |           res.statusCode = 400
  1285 |           next()
  1286 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1294, 'column': 8, 'index': 36842}","  1292 |
  1293 |       it('should color 5xx red', function (done) {
> 1294 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1295 |           if (err) return done(err)
  1296 |           assert.strictEqual(line.substr(0, 37), '_color_0_GET / _color_31_500_color_0_')
  1297 |           assert.strictEqual(line.substr(-9), '_color_0_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1301, 'column': 8, 'index': 37110}","  1299 |         })
  1300 |
> 1301 |         var stream = createColorLineStream(function onLine (line) {
       |        ^ Global Variable
  1302 |           cb(null, null, line)
  1303 |         })
  1304 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1305, 'column': 8, 'index': 37221}","  1303 |         })
  1304 |
> 1305 |         var server = createServer('dev', { stream: stream }, function (req, res, next) {
       |        ^ Global Variable
  1306 |           res.statusCode = 500
  1307 |           next()
  1308 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1317, 'column': 10, 'index': 37588}","  1315 |       describe('with ""immediate: true"" option', function () {
  1316 |         it('should not have color or response values', function (done) {
> 1317 |           var cb = after(2, function (err, res, line) {
       |          ^ Global Variable
  1318 |             if (err) return done(err)
  1319 |             assert.strictEqual(line, '_color_0_GET / _color_0_-_color_0_ - ms - -_color_0_')
  1320 |             done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1323, 'column': 10, 'index': 37808}","  1321 |           })
  1322 |
> 1323 |           var stream = createColorLineStream(function onLine (line) {
       |          ^ Global Variable
  1324 |             cb(null, null, line)
  1325 |           })
  1326 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1327, 'column': 10, 'index': 37925}","  1325 |           })
  1326 |
> 1327 |           var server = createServer('dev', {
       |          ^ Global Variable
  1328 |             immediate: true,
  1329 |             stream: stream
  1330 |           })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1341, 'column': 8, 'index': 38235}","  1339 |     describe('short', function () {
  1340 |       it('should match expectations', function (done) {
> 1341 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1342 |           if (err) return done(err)
  1343 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
  1344 |           assert.strictEqual(masked, res.text + ' tj GET / HTTP/1.1 200 - - _timer_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1343, 'column': 10, 'index': 38327}","  1341 |         var cb = after(2, function (err, res, line) {
  1342 |           if (err) return done(err)
> 1343 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
       |          ^ Global Variable
  1344 |           assert.strictEqual(masked, res.text + ' tj GET / HTTP/1.1 200 - - _timer_')
  1345 |           done()
  1346 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1348, 'column': 8, 'index': 38504}","  1346 |         })
  1347 |
> 1348 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1349 |           cb(null, null, line)
  1350 |         })
  1351 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1361, 'column': 8, 'index': 38863}","  1359 |     describe('tiny', function () {
  1360 |       it('should match expectations', function (done) {
> 1361 |         var cb = after(2, function (err, res, line) {
       |        ^ Global Variable
  1362 |           if (err) return done(err)
  1363 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
  1364 |           assert.strictEqual(masked, 'GET / 200 - - _timer_')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1363, 'column': 10, 'index': 38955}","  1361 |         var cb = after(2, function (err, res, line) {
  1362 |           if (err) return done(err)
> 1363 |           var masked = line.replace(/\d+\.\d{3} ms/, '_timer_')
       |          ^ Global Variable
  1364 |           assert.strictEqual(masked, 'GET / 200 - - _timer_')
  1365 |           done()
  1366 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1368, 'column': 8, 'index': 39108}","  1366 |         })
  1367 |
> 1368 |         var stream = createLineStream(function (line) {
       |        ^ Global Variable
  1369 |           cb(null, null, line)
  1370 |         })
  1371 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1381, 'column': 6, 'index': 39437}","  1379 |   describe('with buffer option', function () {
  1380 |     it('should flush log periodically', function (done) {
> 1381 |       var cb = after(2, function (err, res, log) {
       |      ^ Global Variable
  1382 |         if (err) return done(err)
  1383 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1384 |         assert.ok(Date.now() - time >= 1000)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1388, 'column': 6, 'index': 39697}","  1386 |         done()
  1387 |       })
> 1388 |       var server = createServer(':method :url', {
       |      ^ Global Variable
  1389 |         buffer: true,
  1390 |         stream: { write: writeLog }
  1391 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1392, 'column': 6, 'index': 39814}","  1390 |         stream: { write: writeLog }
  1391 |       })
> 1392 |       var time = Date.now()
       |      ^ Global Variable
  1393 |
  1394 |       function writeLog (log) {
  1395 |         cb(null, null, log)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1409, 'column': 6, 'index': 40189}","  1407 |
  1408 |     it('should accept custom interval', function (done) {
> 1409 |       var cb = after(2, function (err, res, log) {
       |      ^ Global Variable
  1410 |         if (err) return done(err)
  1411 |         assert.strictEqual(log, 'GET /first\nGET /second\n')
  1412 |         assert.ok(Date.now() - time >= 200)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1416, 'column': 6, 'index': 40447}","  1414 |         done()
  1415 |       })
> 1416 |       var server = createServer(':method :url', {
       |      ^ Global Variable
  1417 |         buffer: 200,
  1418 |         stream: { write: writeLog }
  1419 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1420, 'column': 6, 'index': 40563}","  1418 |         stream: { write: writeLog }
  1419 |       })
> 1420 |       var time = Date.now()
       |      ^ Global Variable
  1421 |
  1422 |       function writeLog (log) {
  1423 |         cb(null, null, log)"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1439, 'column': 6, 'index': 40994}","  1437 |   describe('with immediate option', function () {
  1438 |     it('should not have value for :res', function (done) {
> 1439 |       var cb = after(2, function (err, res, line) {
       |      ^ Global Variable
  1440 |         if (err) return done(err)
  1441 |         assert.strictEqual(line, 'GET / -')
  1442 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1445, 'column': 6, 'index': 41149}","  1443 |       })
  1444 |
> 1445 |       var stream = createLineStream(function (line) {
       |      ^ Global Variable
  1446 |         cb(null, null, line)
  1447 |       })
  1448 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1449, 'column': 6, 'index': 41242}","  1447 |       })
  1448 |
> 1449 |       var server = createServer(':method :url :res[x-sent]', {
       |      ^ Global Variable
  1450 |         immediate: true,
  1451 |         stream: stream
  1452 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1460, 'column': 6, 'index': 41505}","  1458 |
  1459 |     it('should not have value for :response-time', function (done) {
> 1460 |       var cb = after(2, function (err, res, line) {
       |      ^ Global Variable
  1461 |         if (err) return done(err)
  1462 |         assert.strictEqual(line, 'GET / -')
  1463 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1466, 'column': 6, 'index': 41660}","  1464 |       })
  1465 |
> 1466 |       var stream = createLineStream(function (line) {
       |      ^ Global Variable
  1467 |         cb(null, null, line)
  1468 |       })
  1469 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1470, 'column': 6, 'index': 41753}","  1468 |       })
  1469 |
> 1470 |       var server = createServer(':method :url :response-time', {
       |      ^ Global Variable
  1471 |         immediate: true,
  1472 |         stream: stream
  1473 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1481, 'column': 6, 'index': 42011}","  1479 |
  1480 |     it('should not have value for :status', function (done) {
> 1481 |       var cb = after(2, function (err, res, line) {
       |      ^ Global Variable
  1482 |         if (err) return done(err)
  1483 |         assert.strictEqual(line, 'GET / -')
  1484 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1487, 'column': 6, 'index': 42166}","  1485 |       })
  1486 |
> 1487 |       var stream = createLineStream(function (line) {
       |      ^ Global Variable
  1488 |         cb(null, null, line)
  1489 |       })
  1490 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1491, 'column': 6, 'index': 42259}","  1489 |       })
  1490 |
> 1491 |       var server = createServer(':method :url :status', {
       |      ^ Global Variable
  1492 |         immediate: true,
  1493 |         stream: stream
  1494 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1502, 'column': 6, 'index': 42503}","  1500 |
  1501 |     it('should log before response', function (done) {
> 1502 |       var lineLogged = false
       |      ^ Global Variable
  1503 |       var cb = after(2, function (err, res, line) {
  1504 |         if (err) return done(err)
  1505 |         assert.strictEqual(line, 'GET / -')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1503, 'column': 6, 'index': 42532}","  1501 |     it('should log before response', function (done) {
  1502 |       var lineLogged = false
> 1503 |       var cb = after(2, function (err, res, line) {
       |      ^ Global Variable
  1504 |         if (err) return done(err)
  1505 |         assert.strictEqual(line, 'GET / -')
  1506 |         done()"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1509, 'column': 6, 'index': 42687}","  1507 |       })
  1508 |
> 1509 |       var stream = createLineStream(function (line) {
       |      ^ Global Variable
  1510 |         lineLogged = true
  1511 |         cb(null, null, line)
  1512 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1514, 'column': 6, 'index': 42806}","  1512 |       })
  1513 |
> 1514 |       var server = createServer(':method :url :res[x-sent]', { immediate: true, stream: stream }, function (req, res, next) {
       |      ^ Global Variable
  1515 |         assert.ok(lineLogged)
  1516 |         next()
  1517 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1527, 'column': 6, 'index': 43178}","  1525 |   describe('with skip option', function () {
  1526 |     it('should be able to skip based on request', function (done) {
> 1527 |       var stream = createLineStream(function () {
       |      ^ Global Variable
  1528 |         throw new Error('should not log line')
  1529 |       })
  1530 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1542, 'column': 6, 'index': 43620}","  1540 |
  1541 |     it('should be able to skip based on response', function (done) {
> 1542 |       var stream = createLineStream(function () {
       |      ^ Global Variable
  1543 |         throw new Error('should not log line')
  1544 |       })
  1545 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1573, 'column': 8, 'index': 44542}","  1571 |
  1572 |       it('should compile a string into a function', function () {
> 1573 |         var fn = morgan.compile(':method')
       |        ^ Global Variable
  1574 |         assert.ok(typeof fn === 'function')
  1575 |         assert.ok(fn.length === 3)
  1576 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1582, 'column': 2, 'index': 44718}","  1580 |
  1581 | function after (count, callback) {
> 1582 |   var args = new Array(3)
       |  ^ Global Variable
  1583 |   var i = 0
  1584 |
  1585 |   return function (err, arg1, arg2) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1583, 'column': 2, 'index': 44744}","  1581 | function after (count, callback) {
  1582 |   var args = new Array(3)
> 1583 |   var i = 0
       |  ^ Global Variable
  1584 |
  1585 |   return function (err, arg1, arg2) {
  1586 |     assert.ok(i++ < count, 'callback called ' + count + ' times')"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1609, 'column': 2, 'index': 45303}","  1607 |
  1608 | function createRequestListener (format, opts, fn, fn1) {
> 1609 |   var logger = morgan(format, opts)
       |  ^ Global Variable
  1610 |   var middle = fn || noopMiddleware
  1611 |
  1612 |   return function onRequest (req, res) {"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1610, 'column': 2, 'index': 45339}","  1608 | function createRequestListener (format, opts, fn, fn1) {
  1609 |   var logger = morgan(format, opts)
> 1610 |   var middle = fn || noopMiddleware
       |  ^ Global Variable
  1611 |
  1612 |   return function onRequest (req, res) {
  1613 |     // prior alterations"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1634, 'column': 2, 'index': 45891}","  1632 |
  1633 | function createSecureServer (format, opts, fn, fn1) {
> 1634 |   var cert = fs.readFileSync(join(__dirname, 'fixtures', 'server.crt'), 'ascii')
       |  ^ Global Variable
  1635 |   var key = fs.readFileSync(join(__dirname, 'fixtures', 'server.key'), 'ascii')
  1636 |
  1637 |   return https.createServer({ cert: cert, key: key })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Global Variable,"{'line': 1635, 'column': 2, 'index': 45972}","  1633 | function createSecureServer (format, opts, fn, fn1) {
  1634 |   var cert = fs.readFileSync(join(__dirname, 'fixtures', 'server.crt'), 'ascii')
> 1635 |   var key = fs.readFileSync(join(__dirname, 'fixtures', 'server.key'), 'ascii')
       |  ^ Global Variable
  1636 |
  1637 |   return https.createServer({ cert: cert, key: key })
  1638 |     .on('request', createRequestListener(format, opts, fn, fn1))"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Sleepy Test,"{'line': 663, 'column': 10, 'index': 19048}","  661 |           write = Date.now()
  662 |
> 663 |           setTimeout(function () {
      |          ^ Sleepy Test
  664 |             res.end('world!')
  665 |           }, 50)
  666 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Sleepy Test,"{'line': 735, 'column': 10, 'index': 20882}","  733 |
  734 |         var server = http.createServer(function (req, res) {
> 735 |           setTimeout(function () {
      |          ^ Sleepy Test
  736 |             logger(req, res, cb)
  737 |           }, 10)
  738 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Sleepy Test,"{'line': 890, 'column': 10, 'index': 25091}","  888 |           write = Date.now()
  889 |
> 890 |           setTimeout(function () {
      |          ^ Sleepy Test
  891 |             res.end('world!')
  892 |           }, 50)
  893 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Sleepy Test,"{'line': 962, 'column': 10, 'index': 26916}","  960 |
  961 |         var server = http.createServer(function (req, res) {
> 962 |           setTimeout(function () {
      |          ^ Sleepy Test
  963 |             logger(req, res, cb)
  964 |           }, 10)
  965 |"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Unknown Test,"{'column': 6, 'line': 1051}","  1049 |       })
  1050 |
> 1051 |       it('should not log for undefined return', function (done) {
       |      ^ Unknown Test
  1052 |         var stream = createLineStream(function () {
  1053 |           throw new Error('should not log line')
  1054 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Unknown Test,"{'column': 6, 'line': 1065}","  1063 |       })
  1064 |
> 1065 |       it('should not log for null return', function (done) {
       |      ^ Unknown Test
  1066 |         var stream = createLineStream(function () {
  1067 |           throw new Error('should not log line')
  1068 |         })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Unknown Test,"{'column': 4, 'line': 1526}","  1524 |
  1525 |   describe('with skip option', function () {
> 1526 |     it('should be able to skip based on request', function (done) {
       |    ^ Unknown Test
  1527 |       var stream = createLineStream(function () {
  1528 |         throw new Error('should not log line')
  1529 |       })"
/Users/gabriel.amaralmercos.com/Desktop/research-javascript-test-smells/repositories/morgan/test/morgan.js,Unknown Test,"{'column': 4, 'line': 1541}","  1539 |     })
  1540 |
> 1541 |     it('should be able to skip based on response', function (done) {
       |    ^ Unknown Test
  1542 |       var stream = createLineStream(function () {
  1543 |         throw new Error('should not log line')
  1544 |       })"
